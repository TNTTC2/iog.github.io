<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>iPhoneOS 1 - Functional Edition</title>
    <style>
        :root {
            --dock-height: 90px;
            --home-area-height: 70px;
            --status-bar-height: 20px;
            --system-font: "Helvetica Neue", Helvetica, Arial, sans-serif;
            --stripe-bg: repeating-linear-gradient(0deg, #c5ccd4, #c5ccd4 1px, #cbd2d8 1px, #cbd2d8 2px);
            --blue-header: linear-gradient(#6d8fb3, #466e99 50%, #365e8d 51%, #315783);
            --black-header: linear-gradient(#444, #222 50%, #111 51%, #000);
            --grey-header: linear-gradient(#cdcdcd, #9c9c9c);
        }

        body {
            margin: 0; padding: 0; background-color: #000; height: 100vh;
            display: flex; flex-direction: column; overflow: hidden;
            font-family: var(--system-font); color: black;
            user-select: none; -webkit-user-select: none;
        }

        /* --- UI Components --- */
        .status-bar {
            height: var(--status-bar-height); background: linear-gradient(to bottom, #666 0%, #333 50%, #000 51%, #000 100%);
            display: flex; justify-content: space-between; align-items: center; padding: 0 6px;
            font-size: 12px; font-weight: bold; color: white; z-index: 1000; flex-shrink: 0;
        }

        .app-window {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 600; display: none; flex-direction: column;
            animation: zoomIn 0.2s ease-out;
        }
        @keyframes zoomIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .nav-bar {
            height: 44px; display: flex; justify-content: center; align-items: center;
            font-weight: bold; font-size: 20px; flex-shrink: 0; position: relative;
            color: #000; text-shadow: 0 1px 0 rgba(255,255,255,0.5); border-bottom: 1px solid #666;
            background: var(--grey-header);
        }
        .nav-bar.blue { background: var(--blue-header); color: white; text-shadow: 0 -1px 0 rgba(0,0,0,0.5); border-color: #2d4f78; }
        .nav-bar.black { background: var(--black-header); color: white; text-shadow: none; border-color: #333; }

        .nav-btn {
            position: absolute; font-size: 12px; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-weight: bold;
        }
        .nav-btn.left { left: 5px; } .nav-btn.right { right: 5px; }
        .btn-default { background: linear-gradient(#f9f9f9, #d0d0d0); border: 1px solid #999; color: black; }
        .btn-blue { background: linear-gradient(#4a7fb5, #26558b); border: 1px solid #1a3e66; color: white; }

        /* Tabs */
        .tab-bar {
            height: 49px; background: linear-gradient(to bottom, #2d2d2d, #000);
            display: flex; justify-content: space-around; align-items: center; flex-shrink: 0;
            border-top: 1px solid #444;
        }
        .tab-item { width: 100%; display: flex; flex-direction: column; align-items: center; color: #999; font-size: 10px; cursor: pointer; padding-top: 2px;}
        .tab-item.active { background: radial-gradient(circle at bottom, rgba(255,255,255,0.15), transparent 70%); color: #fff; }
        .tab-icon { font-size: 24px; margin-bottom: 1px; }

        /* Main Display */
        #main-display { flex-grow: 1; position: relative; overflow: hidden; background: #000; }

        /* Springboard */
        #home-screen { width: 100%; height: 100%; display: flex; flex-direction: column; padding-top: 15px; background: #000; }
        .grid-container {
            flex-grow: 1; display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(4, min-content);
            gap: 20px 5px; padding: 0 10px; width: 100%; max-width: 400px; margin: 0 auto;
        }
        .app-icon { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .app-icon:active { opacity: 0.7; }
        .icon-box {
            width: 58px; height: 58px; border-radius: 12px; background: #555;
            display: flex; justify-content: center; align-items: center; font-size: 30px;
            position: relative; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.6);
        }
        .icon-box::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 50%;
            background: linear-gradient(to bottom, rgba(255,255,255,0.6) 0%, rgba(255,255,255,0.1) 100%);
            pointer-events: none;
        }
        .app-name { font-size: 11px; margin-top: 4px; color: #ddd; text-align: center; font-weight: bold; text-shadow: 0 1px 2px #000; }

        .dock {
            height: var(--dock-height); background: linear-gradient(to bottom, rgba(140,140,140,0.4), rgba(0,0,0,0.9));
            border-top: 1px solid rgba(255,255,255,0.2); display: flex; justify-content: space-evenly; align-items: center;
            position: relative; perspective: 600px; flex-shrink: 0; z-index: 10;
        }
        .dock::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 100%;
            background: linear-gradient(to bottom, #aab 0%, #668 50%, #446 51%, #224 100%);
            transform: rotateX(40deg) scaleY(1.3) translateY(5px); transform-origin: bottom; z-index: -1; opacity: 0.6;
        }

        /* Home Button */
        #home-area {
            height: var(--home-area-height); background: #111; border-top: 1px solid #333;
            display: flex; justify-content: center; align-items: center; flex-shrink: 0;
        }
        .home-button {
            width: 58px; height: 58px; border-radius: 50%; border: 2px solid #222;
            background: radial-gradient(circle at center, #222 0%, #000 100%);
            display: flex; justify-content: center; align-items: center; cursor: pointer;
        }
        .home-button .square { width: 20px; height: 20px; border: 2px solid #777; border-radius: 4px; }

        /* Specific App Styles */
        
        /* Camera */
        #camera-video { width: 100%; height: 100%; object-fit: cover; }
        .camera-controls { height: 100px; background: url('https://www.transparenttextures.com/patterns/brushed-alum.png'), #111; display: flex; justify-content: center; align-items: center; position: absolute; bottom: 0; width: 100%; z-index: 10;}
        .shutter-btn { width: 60px; height: 60px; border-radius: 50%; background: #ccc; border: 4px solid #444; cursor: pointer; }
        .shutter-btn:active { background: #999; }
        
        /* Photos */
        .photo-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 2px; padding: 2px; overflow-y: auto; flex-grow: 1; align-content: flex-start; }
        .photo-thumb { aspect-ratio: 1; background: #ddd; background-size: cover; background-position: center; border: 1px solid #fff;}

        /* Clock - Timer */
        .timer-picker { flex-grow: 1; display: flex; justify-content: center; align-items: center; background: #fff; flex-direction: column; gap: 20px; }
        .time-inputs { display: flex; gap: 10px; align-items: center; font-size: 24px; }
        .time-input { width: 60px; height: 60px; font-size: 30px; text-align: center; border: 1px solid #ccc; border-radius: 10px; background: #eee;}
        .timer-display { font-size: 60px; font-family: monospace; font-weight: bold; display: none; }
        .timer-btn { width: 150px; height: 50px; background: #4cd964; border-radius: 10px; color: white; font-size: 20px; font-weight: bold; border: none; cursor: pointer; }
        .timer-btn.stop { background: #ff3b30; }

        /* Safari */
        .url-bar { background: #c5ccd4; padding: 8px; border-bottom: 1px solid #888; display: flex; gap: 5px; }
        .url-input { flex-grow: 1; border-radius: 15px; border: 1px solid #999; padding: 5px 10px; font-size: 14px; outline: none; }
        #safari-frame { flex-grow: 1; border: none; background: white; }
        
        /* Maps */
        #google-map { flex-grow: 1; border: none; }

        /* iPod */
        .ipod-file-input { display: none; }
        .ipod-import-btn { margin-top: 10px; padding: 10px 20px; background: #333; color: #fff; border: 1px solid #555; border-radius: 5px; cursor: pointer; font-size: 12px; }

    </style>
</head>
<body>

    <div class="status-bar">
        <div style="display:flex; gap:5px;"><span>AT&T</span><span>üì∂</span></div>
        <div id="status-clock">9:41 AM</div>
        <div>üîã</div>
    </div>

    <div id="main-display">
        
        <div id="home-screen">
            <div class="grid-container">
                <div class="app-icon" onclick="openApp('sms')"><div class="icon-box" style="background:#4cd964;">üí¨</div><div class="app-name">Text</div></div>
                <div class="app-icon" onclick="openApp('calendar')">
                    <div class="icon-box" style="background:#fff; color:#333; display:block; text-align:center;">
                        <div style="color:#c00; font-size:10px; margin-top:6px; font-weight:bold;">TUE</div>
                        <div style="font-size:32px; font-weight:bold; line-height:1;">9</div>
                    </div><div class="app-name">Calendar</div>
                </div>
                <div class="app-icon" onclick="openApp('photos')"><div class="icon-box" style="background:linear-gradient(#add8e6, #fff);">üåª</div><div class="app-name">Photos</div></div>
                <div class="app-icon" onclick="openApp('camera')"><div class="icon-box" style="background:#ccc;">üì∑</div><div class="app-name">Camera</div></div>
                <div class="app-icon" onclick="openApp('youtube')"><div class="icon-box" style="background:#5c3d2e;">üì∫</div><div class="app-name">YouTube</div></div>
                <div class="app-icon" onclick="openApp('stocks')"><div class="icon-box" style="background:#333;">üìà</div><div class="app-name">Stocks</div></div>
                <div class="app-icon" onclick="openApp('maps')"><div class="icon-box" style="background:#f4d03f;">üó∫Ô∏è</div><div class="app-name">Maps</div></div>
                <div class="app-icon" onclick="openApp('weather')"><div class="icon-box" style="background:#2980b9;">‚òÄÔ∏è</div><div class="app-name">Weather</div></div>
                <div class="app-icon" onclick="openApp('clock')"><div class="icon-box" style="background:#000;">‚è∞</div><div class="app-name">Clock</div></div>
                <div class="app-icon" onclick="openApp('calculator')"><div class="icon-box" style="background:#e67e22;">üî¢</div><div class="app-name">Calculator</div></div>
                <div class="app-icon" onclick="openApp('notes')"><div class="icon-box" style="background:#f1c40f;">üìù</div><div class="app-name">Notes</div></div>
                <div class="app-icon" onclick="openApp('settings')"><div class="icon-box" style="background:#7f8c8d;">‚öôÔ∏è</div><div class="app-name">Settings</div></div>
            </div>
            <div class="dock">
                <div class="app-icon" onclick="openApp('phone')"><div class="icon-box" style="background:#2ecc71;">üìû</div><div class="app-name">Phone</div></div>
                <div class="app-icon" onclick="openApp('mail')"><div class="icon-box" style="background:#3498db;">‚úâÔ∏è</div><div class="app-name">Mail</div></div>
                <div class="app-icon" onclick="openApp('safari')"><div class="icon-box" style="background:#3498db;">üß≠</div><div class="app-name">Safari</div></div>
                <div class="app-icon" onclick="openApp('ipod')"><div class="icon-box" style="background:#e67e22;">üéµ</div><div class="app-name">iPod</div></div>
            </div>
        </div>

        <div id="app-camera" class="app-window" style="background:#000;">
            <video id="camera-video" autoplay playsinline muted></video>
            <div class="camera-controls">
                <div class="shutter-btn" onclick="takePhoto()"></div>
            </div>
            <canvas id="camera-canvas" style="display:none;"></canvas>
        </div>

        <div id="app-photos" class="app-window">
            <div class="nav-bar black">Camera Roll</div>
            <div class="photo-grid" id="photo-gallery">
                <div class="photo-thumb" style="background-color:#ccc;"></div>
                <div class="photo-thumb" style="background-color:#999;"></div>
            </div>
            <div class="tab-bar">
                <div class="tab-item active"><span class="tab-icon">üñº</span>Photos</div>
                <div class="tab-item"><span class="tab-icon">üìÅ</span>Albums</div>
            </div>
        </div>

        <div id="app-clock" class="app-window">
            <div class="nav-bar black" id="clock-header">Timer</div>
            
            <div id="clock-view-timer" class="timer-picker">
                <div class="time-inputs" id="timer-inputs">
                    <div>
                        <input type="number" id="timer-h" class="time-input" value="0" min="0" max="23"> H
                    </div>
                    <div>
                        <input type="number" id="timer-m" class="time-input" value="1" min="0" max="59"> M
                    </div>
                </div>
                <div id="timer-countdown" class="timer-display">00:00:00</div>
                <button class="timer-btn" id="timer-toggle-btn" onclick="toggleTimer()">Start Timer</button>
            </div>

            <div id="clock-view-other" style="flex-grow:1; display:none; justify-content:center; align-items:center;">
                Feature not implemented
            </div>

            <div class="tab-bar">
                <div class="tab-item" onclick="switchClockTab('world')"><span class="tab-icon">üåç</span>World Clock</div>
                <div class="tab-item" onclick="switchClockTab('alarm')"><span class="tab-icon">‚è∞</span>Alarm</div>
                <div class="tab-item" onclick="switchClockTab('stopwatch')"><span class="tab-icon">‚è±</span>Stopwatch</div>
                <div class="tab-item active" onclick="switchClockTab('timer')"><span class="tab-icon">‚è≥</span>Timer</div>
            </div>
        </div>

        <div id="app-ipod" class="app-window">
            <div class="nav-bar black">Now Playing</div>
            <div style="flex-grow:1; background:#000; color:white; display:flex; flex-direction:column; align-items:center; padding-top:20px;">
                <div style="width:200px; height:200px; background:linear-gradient(#333,#111); border:1px solid #444; display:flex; justify-content:center; align-items:center; font-size:60px; box-shadow:0 5px 15px rgba(255,255,255,0.1);">üéµ</div>
                
                <div style="text-align:center; margin-top:20px;">
                    <h3 id="ipod-title" style="margin:0;">No Music Selected</h3>
                    <p id="ipod-artist" style="color:#999; margin:5px;">Tap below to import</p>
                </div>
                
                <label class="ipod-import-btn">
                    Import MP3
                    <input type="file" class="ipod-file-input" accept="audio/*" onchange="loadAudio(this)">
                </label>

                <audio id="audio-player" controls style="margin-top:20px; width:80%;"></audio>
            </div>
            <div class="tab-bar">
                <div class="tab-item"><span class="tab-icon">üìÑ</span>Playlists</div>
                <div class="tab-item"><span class="tab-icon">üé§</span>Artists</div>
                <div class="tab-item"><span class="tab-icon">üéµ</span>Songs</div>
                <div class="tab-item"><span class="tab-icon">üìÄ</span>Videos</div>
                <div class="tab-item active"><span class="tab-icon">...</span>More</div>
            </div>
        </div>

        <div id="app-safari" class="app-window">
            <div class="url-bar">
                <input type="text" id="safari-input" class="url-input" value="https://en.m.wikipedia.org" onkeydown="if(event.key==='Enter') loadUrl()">
                <button class="btn-blue" style="border-radius:5px; padding:0 10px; cursor:pointer;" onclick="loadUrl()">Go</button>
            </div>
            <iframe id="safari-frame" src="https://en.m.wikipedia.org/wiki/IPhone_(1st_generation)"></iframe>
            <div class="tab-bar" style="height:44px; background:#eee;">
                <div class="tab-item" onclick="window.history.back()">‚óÄ</div>
                <div class="tab-item">‚ñ∂</div>
                <div class="tab-item">‚ûï</div>
                <div class="tab-item">üìñ</div>
                <div class="tab-item">‚ùê</div>
            </div>
        </div>

        <div id="app-maps" class="app-window">
            <div class="nav-bar blue">
                <div class="nav-btn left btn-default">Search</div>
                Maps
                <div class="nav-btn right btn-default">Directions</div>
            </div>
            <iframe id="google-map" src="https://maps.google.com/maps?q=New+York&t=&z=13&ie=UTF8&iwloc=&output=embed"></iframe>
            <div class="tab-bar">
                <div class="tab-item active"><span class="tab-icon">üîç</span>Search</div>
                <div class="tab-item"><span class="tab-icon">‚Ü±</span>Directions</div>
            </div>
        </div>

        <div id="app-phone" class="app-window">
             <div style="flex-grow:1; display:flex; flex-direction:column; justify-content:flex-end; background:#eee;">
                <div style="height:80px; background:white; display:flex; justify-content:center; align-items:center; font-size:32px; border-bottom:1px solid #ccc;" id="phone-display"></div>
                <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:15px; padding:20px 30px;">
                    <button class="home-button" style="width:60px; height:60px; background:#fff; border:1px solid #999; font-size:24px; color:#000;" onclick="phKey('1')">1</button>
                    <button class="home-button" style="width:60px; height:60px; background:#fff; border:1px solid #999; font-size:24px; color:#000;" onclick="phKey('2')">2</button>
                    <button class="home-button" style="width:60px; height:60px; background:#fff; border:1px solid #999; font-size:24px; color:#000;" onclick="phKey('3')">3</button>
                    <button class="home-button" style="width:60px; height:60px; background:#fff; border:1px solid #999; font-size:24px; color:#000;" onclick="phKey('4')">4</button>
                    <button class="home-button" style="width:60px; height:60px; background:#fff; border:1px solid #999; font-size:24px; color:#000;" onclick="phKey('5')">5</button>
                    <button class="home-button" style="width:60px; height:60px; background:#fff; border:1px solid #999; font-size:24px; color:#000;" onclick="phKey('6')">6</button>
                    <button class="home-button" style="width:60px; height:60px; background:#fff; border:1px solid #999; font-size:24px; color:#000;" onclick="phKey('7')">7</button>
                    <button class="home-button" style="width:60px; height:60px; background:#fff; border:1px solid #999; font-size:24px; color:#000;" onclick="phKey('8')">8</button>
                    <button class="home-button" style="width:60px; height:60px; background:#fff; border:1px solid #999; font-size:24px; color:#000;" onclick="phKey('9')">9</button>
                    <button class="home-button" style="width:60px; height:60px; background:#fff; border:1px solid #999; font-size:24px; color:#000;" onclick="phKey('*')">*</button>
                    <button class="home-button" style="width:60px; height:60px; background:#fff; border:1px solid #999; font-size:24px; color:#000;" onclick="phKey('0')">0</button>
                    <button class="home-button" style="width:60px; height:60px; background:#fff; border:1px solid #999; font-size:24px; color:#000;" onclick="phKey('#')">#</button>
                </div>
                <div style="padding:0 30px 20px;">
                     <div style="background:linear-gradient(#57e671, #28a745); height:50px; border-radius:10px; display:flex; justify-content:center; align-items:center; color:white; font-size:22px; font-weight:bold; cursor:pointer;" onclick="alert('Calling...')">Call</div>
                </div>
             </div>
             <div class="tab-bar">
                <div class="tab-item"><span class="tab-icon">‚òÖ</span>Favorites</div>
                <div class="tab-item"><span class="tab-icon">üïí</span>Recents</div>
                <div class="tab-item"><span class="tab-icon">üë§</span>Contacts</div>
                <div class="tab-item active"><span class="tab-icon">‚ñ¶</span>Keypad</div>
                <div class="tab-item"><span class="tab-icon">‚ûø</span>Voicemail</div>
            </div>
        </div>
        
        <div id="app-sms" class="app-window"><div class="nav-bar blue">Text</div></div>
        <div id="app-calendar" class="app-window"><div class="nav-bar">Calendar</div></div>
        <div id="app-youtube" class="app-window"><div class="nav-bar">YouTube</div></div>
        <div id="app-stocks" class="app-window" style="background:black; color:white;"><div class="nav-bar black">Stocks</div></div>
        <div id="app-weather" class="app-window"><div class="nav-bar">Weather</div></div>
        <div id="app-calculator" class="app-window"><div class="nav-bar">Calculator</div></div>
        <div id="app-notes" class="app-window"><div class="nav-bar">Notes</div></div>
        <div id="app-settings" class="app-window"><div class="nav-bar">Settings</div></div>
        <div id="app-mail" class="app-window"><div class="nav-bar blue">Mail</div></div>

    </div>

    <div id="home-area">
        <div class="home-button" onclick="goHome()">
            <div class="square"></div>
        </div>
    </div>

    <script>
        // --- 1. System Navigation ---
        function openApp(id) {
            document.querySelectorAll('.app-window').forEach(el => el.style.display = 'none');
            const app = document.getElementById('app-' + id);
            if(app) {
                app.style.display = 'flex';
                // Trigger Camera
                if(id === 'camera') startCamera();
                else stopCamera();
            }
        }

        function goHome() {
            document.querySelectorAll('.app-window').forEach(el => el.style.display = 'none');
            stopCamera();
        }

        function updateClock() {
            const now = new Date();
            let h = now.getHours();
            const m = String(now.getMinutes()).padStart(2, '0');
            const ampm = h >= 12 ? 'PM' : 'AM';
            h = h % 12 || 12;
            document.getElementById('status-clock').innerText = `${h}:${m} ${ampm}`;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // --- 2. Camera & Photos Logic ---
        let videoStream = null;
        const photoArray = [];

        async function startCamera() {
            const video = document.getElementById('camera-video');
            try {
                if(!videoStream) {
                    videoStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
                    video.srcObject = videoStream;
                }
            } catch (err) {
                console.error("Camera access denied or unavailable", err);
                //alert("ÁÑ°Ê≥ïÂ≠òÂèñÁõ∏Ê©ü„ÄÇË´ãÁ¢∫‰øùÂú® HTTPS Êàñ Localhost Áí∞Â¢É‰∏ãÂü∑Ë°åÔºå‰∏¶ÂÖÅË®±Ê¨äÈôê„ÄÇ");
            }
        }

        function stopCamera() {
            if(videoStream) {
                videoStream.getTracks().forEach(track => track.stop());
                videoStream = null;
            }
        }

        function takePhoto() {
            const video = document.getElementById('camera-video');
            const canvas = document.getElementById('camera-canvas');
            const context = canvas.getContext('2d');
            
            if(video.videoWidth) {
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                context.drawImage(video, 0, 0, canvas.width, canvas.height);
                
                // Save photo
                const dataUrl = canvas.toDataURL('image/png');
                photoArray.push(dataUrl);
                
                // Flash effect
                video.style.opacity = 0;
                setTimeout(() => video.style.opacity = 1, 100);

                updatePhotosApp();
            }
        }

        function updatePhotosApp() {
            const gallery = document.getElementById('photo-gallery');
            // Keep the static placeholders if you want, or clear them. Let's append new ones.
            // Clear existing generated thumbs to avoid duplicates if we simply re-render
            const existingGenerated = gallery.querySelectorAll('.generated-photo');
            existingGenerated.forEach(e => e.remove());

            photoArray.forEach(src => {
                const div = document.createElement('div');
                div.className = 'photo-thumb generated-photo';
                div.style.backgroundImage = `url(${src})`;
                gallery.prepend(div); // Newest first
            });
        }

        // --- 3. Clock Timer Logic ---
        let timerInterval = null;
        let timerSeconds = 0;

        function switchClockTab(tab) {
            document.getElementById('clock-view-timer').style.display = 'none';
            document.getElementById('clock-view-other').style.display = 'none';
            document.getElementById('clock-header').innerText = tab.charAt(0).toUpperCase() + tab.slice(1);
            
            if(tab === 'timer') {
                document.getElementById('clock-view-timer').style.display = 'flex';
            } else {
                document.getElementById('clock-view-other').style.display = 'flex';
                document.getElementById('clock-view-other').innerText = tab.charAt(0).toUpperCase() + tab.slice(1) + " (Coming Soon)";
            }
        }

        function toggleTimer() {
            const btn = document.getElementById('timer-toggle-btn');
            const inputs = document.getElementById('timer-inputs');
            const display = document.getElementById('timer-countdown');

            if(timerInterval) {
                // Stop Timer
                clearInterval(timerInterval);
                timerInterval = null;
                btn.innerText = "Start Timer";
                btn.classList.remove('stop');
                inputs.style.display = 'flex';
                display.style.display = 'none';
                return;
            }

            // Start Timer
            const h = parseInt(document.getElementById('timer-h').value) || 0;
            const m = parseInt(document.getElementById('timer-m').value) || 0;
            
            if(h === 0 && m === 0) return;

            timerSeconds = (h * 3600) + (m * 60);
            
            inputs.style.display = 'none';
            display.style.display = 'block';
            btn.innerText = "Cancel";
            btn.classList.add('stop');
            
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timerSeconds--;
                if(timerSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                    display.innerText = "Done";
                    btn.innerText = "OK";
                    btn.classList.remove('stop');
                    // Play sound or alert here
                } else {
                    updateTimerDisplay();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const h = Math.floor(timerSeconds / 3600);
            const m = Math.floor((timerSeconds % 3600) / 60);
            const s = timerSeconds % 60;
            document.getElementById('timer-countdown').innerText = 
                `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
        }

        // --- 4. iPod Audio Import ---
        function loadAudio(input) {
            const file = input.files[0];
            if(file) {
                const url = URL.createObjectURL(file);
                const player = document.getElementById('audio-player');
                player.src = url;
                player.play();
                
                document.getElementById('ipod-title').innerText = file.name;
                document.getElementById('ipod-artist').innerText = "Local Audio";
            }
        }

        // --- 5. Safari URL Logic ---
        function loadUrl() {
            let url = document.getElementById('safari-input').value;
            if(!url.startsWith('http')) {
                url = 'https://' + url;
            }
            document.getElementById('safari-frame').src = url;
        }

        // --- 6. Phone Keypad ---
        function phKey(key) {
            const display = document.getElementById('phone-display');
            if(display.innerText.length < 13) display.innerText += key;
        }

    </script>
</body>
</html>
