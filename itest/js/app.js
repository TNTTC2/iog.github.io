var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/x4Q":function(e,t,n){var i,a,o,s;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s=function(e){"use strict";
/*!
   * ScrollToPlugin 3.2.4
   * https://greensock.com
   *
   * @license Copyright 2008-2020, GreenSock. All rights reserved.
   * Subject to the terms at https://greensock.com/standard-license or for
   * Club GreenSock members, the agreement issued with that membership.
   * @author: Jack Doyle, jack@greensock.com
  */var t,n,i,a,o,s,l,h=function(){return"undefined"!=typeof window},c=function(){return t||h()&&(t=window.gsap)&&t.registerPlugin&&t},u=function(e){return"string"==typeof e},d=function(e,t){var n="x"===t?"Width":"Height",s="scroll"+n,r="client"+n;return e===i||e===a||e===o?Math.max(a[s],o[s])-(i["inner"+n]||a[r]||o[r]):e[s]-e["offset"+n]},f=function(e,t){var n="scroll"+("x"===t?"Left":"Top");return e===i&&(null!=e.pageXOffset?n="page"+t.toUpperCase()+"Offset":e=null!=a[n]?a:o),function(){return e[n]}},p=function(e,t){var n=s(e)[0].getBoundingClientRect(),r=!t||t===i||t===o,l=r?{top:a.clientTop-(i.pageYOffset||a.scrollTop||o.scrollTop||0),left:a.clientLeft-(i.pageXOffset||a.scrollLeft||o.scrollLeft||0)}:t.getBoundingClientRect(),h={x:n.left-l.left,y:n.top-l.top};return!r&&t&&(h.x+=f(t,"x")(),h.y+=f(t,"y")()),h},m=function(e,t,n,i){return isNaN(e)||"object"===r(e)?u(e)&&"="===e.charAt(1)?parseFloat(e.substr(2))*("-"===e.charAt(0)?-1:1)+i:"max"===e?d(t,n):Math.min(d(t,n),p(e,t)[n]):parseFloat(e)},y=function(){t=c(),h()&&t&&document.body&&(i=window,o=document.body,a=document.documentElement,s=t.utils.toArray,t.config({autoKillThreshold:7}),l=t.config(),n=1)},g={version:"3.2.4",name:"scrollTo",rawVars:1,register:function(e){t=e,y()},init:function(e,t,a,o,s){n||y(),this.isWin=e===i,this.target=e,this.tween=a,"object"!==r(t)?u((t={y:t}).y)&&"max"!==t.y&&"="!==t.y.charAt(1)&&(t.x=t.y):t.nodeType&&(t={y:t,x:t}),this.vars=t,this.autoKill=!!t.autoKill,this.getX=f(e,"x"),this.getY=f(e,"y"),this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),null!=t.x?(this.add(this,"x",this.x,m(t.x,e,"x",this.x)-(t.offsetX||0),o,s,Math.round),this._props.push("scrollTo_x")):this.skipX=1,null!=t.y?(this.add(this,"y",this.y,m(t.y,e,"y",this.y)-(t.offsetY||0),o,s,Math.round),this._props.push("scrollTo_y")):this.skipY=1},render:function(e,t){for(var n,a,o,s,r,h=t._pt,c=t.target,u=t.tween,f=t.autoKill,p=t.xPrev,m=t.yPrev,y=t.isWin;h;)h.r(e,h.d),h=h._next;n=y||!t.skipX?t.getX():p,o=(a=y||!t.skipY?t.getY():m)-m,s=n-p,r=l.autoKillThreshold,t.x<0&&(t.x=0),t.y<0&&(t.y=0),f&&(!t.skipX&&(s>r||s<-r)&&n<d(c,"x")&&(t.skipX=1),!t.skipY&&(o>r||o<-r)&&a<d(c,"y")&&(t.skipY=1),t.skipX&&t.skipY&&(u.kill(),t.vars.onAutoKill&&t.vars.onAutoKill.apply(u,t.vars.onAutoKillParams||[]))),y?i.scrollTo(t.skipX?n:t.x,t.skipY?a:t.y):(t.skipY||(c.scrollTop=t.y),t.skipX||(c.scrollLeft=t.x)),t.xPrev=t.x,t.yPrev=t.y},kill:function(e){var t="scrollTo"===e;(t||"scrollTo_x"===e)&&(this.skipX=1),(t||"scrollTo_y"===e)&&(this.skipY=1)}};g.max=d,g.getOffset=p,g.buildGetter=f,c()&&t.registerPlugin(g),e.ScrollToPlugin=g,e.default=g,Object.defineProperty(e,"__esModule",{value:!0})},"object"===r(t)&&void 0!==e?s(t):(a=[t],void 0===(o="function"==typeof(i=s)?i.apply(t,a):i)||(e.exports=o))},0:function(e,t,n){n("kOmT"),e.exports=n("IMnL")},IMnL:function(e,t){},kOmT:function(e,t,n){"use strict";n.r(t);var i=n("EVdn"),a=n.n(i),o=n("z/o8"),s=n("MZFn"),r=n.n(s),l=n("/x4Q"),h=n.n(l);function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return u(e,null,[{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}}]),u(e,[{key:"isTouch",value:function(){if(this.isWindows())return!1;var e=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||function(e){return window.matchMedia(e).matches}(["(",e.join("touch-enabled),("),"heartz",")"].join(""))}},{key:"isOldIE",value:function(){return!!window.MSInputMethodContext&&!!document.documentMode}},{key:"isIE",value:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var i=e.indexOf("Edge/");return i>0&&parseInt(e.substring(i+5,e.indexOf(".",i)),10)}},{key:"isMobileSafari",value:function(){var e=navigator.userAgent;return/(iPad|iPhone|iPod)/gi.test(e)&&!/CriOS/.test(e)&&!/FxiOS/.test(e)&&!/OPiOS/.test(e)&&!/mercury/.test(e)}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return-1!=navigator.userAgent.indexOf("Firefox")}},{key:"isWindows",value:function(){return navigator.platform.indexOf("Win")>-1}},{key:"isSamsung",value:function(){return!!navigator.userAgent.match(/SAMSUNG|SGH-[I|N|T]|GT-[I|P|N]|SM-[N|P|T|Z|G]|SHV-E|SCH-[I|J|R|S]|SPH-L/i)}},{key:"iOSVersion",value:function(){var e,t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return null!=t&&(e=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)],parseFloat(e.join(".")))}},{key:"hasNotch",value:function(){if(CSS.supports("padding-bottom: env(safe-area-inset-bottom)")){var e=document.createElement("div");e.style.paddingBottom="env(safe-area-inset-bottom)",document.body.appendChild(e);var t=parseInt(window.getComputedStyle(e).paddingBottom,10);if(document.body.removeChild(e),t>0)return!0}return!1}},{key:"getOS",value:function(){var e,t,n=navigator.userAgent;return n.match(/iPad/i)||n.match(/iPhone/i)?(e="iOS",t=n.indexOf("OS ")):n.match(/Android/i)?(e="Android",t=n.indexOf("Android ")):e="unknown","iOS"===e&&t>-1?n.substr(t+3,3).replace("_","."):"Android"===e&&t>-1?n.substr(t+8,3):"unknown",e}},{key:"getIPhoneModel",value:function(){return window.screen.height/window.screen.width==812/375&&3==window.devicePixelRatio?10:window.screen.height/window.screen.width==736/414&&3==window.devicePixelRatio?8:window.screen.height/window.screen.width==667/375&&3==window.devicePixelRatio?7:window.screen.height/window.screen.width==667/375&&2==window.devicePixelRatio?6:window.screen.height/window.screen.width==1.775&&2==window.devicePixelRatio?5:window.screen.height/window.screen.width==1.5&&2==window.devicePixelRatio?4:window.screen.height/window.screen.width==1.5&&1==window.devicePixelRatio?1:11}}]),e}();function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageTitle=document.title,this.debubMode=!1}return p(e,null,[{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}}]),p(e,[{key:"trackPage",value:function(e,t){var n="".concat(this.pageTitle," - ").concat(e);this.debubMode?(console.log("[gtag] - track-page:"),console.log("[gtag] - page_title:",n),console.log("[gtag] - page_path:",t),console.log("--------------")):dataLayer.push({event:"virtual_pageview",_event:"virtual_pageview",page_title:n,page_path:t})}},{key:"trackEvent",value:function(e,t,n,i){this.debubMode}}]),e}(),y=m;function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function w(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}m.instance;var v=function(){function e(t,n){g(this,e),this.render(t,n)}return w(e,[{key:"render",value:function(e,t){this.element=a()(e),this.debug=!1,-1==window.location.href.indexOf("localhost")&&-1==window.location.href.indexOf("gtm_debug")||(this.debug=!0),this.refs={fallbackContent:this.element.find('*[data-ref="app-fallback-content"]'),fallbackInstall:this.element.find('*[data-ref="app-fallback-install"]'),fallbackBrowser:this.element.find('*[data-ref="app-fallback-browser"]'),fallbackSocial:this.element.find('*[data-ref="app-fallback-social"]'),fallbackDesktop:this.element.find('*[data-ref="app-fallback-desktop"]'),fallbackPhone:this.element.find('*[data-ref="app-fallback-phone"]'),fallbackSamsung:this.element.find('*[data-ref="app-fallback-samsung"]'),fallbackAndroid:this.element.find('*[data-ref="app-fallback-android"]')};var n=null,i=window.navigator.standalone,s=window.navigator.userAgent.toLowerCase(),r=/safari/.test(s),l=/iphone|ipod/.test(s);-1!=window.location.href.indexOf("gtm_debug")?(n=this.refs.fallbackContent,a()("body").addClass("full-screen"),a()("html").addClass("full-screen")):l?(this.debug?(n=this.refs.fallbackContent,a()("body").addClass("full-screen"),a()("html").addClass("full-screen")):!i&&r?n=d.instance.isMobileSafari()?this.refs.fallbackInstall:this.refs.fallbackBrowser:i&&!r||i||r?(n=this.refs.fallbackContent,a()("body").addClass("full-screen"),a()("html").addClass("full-screen")):n=this.refs.fallbackSocial,d.instance.getIPhoneModel()<=5&&(n=this.refs.fallbackPhone)):n=d.instance.isSamsung()?this.refs.fallbackSamsung:"Android"==d.instance.getOS()?this.refs.fallbackAndroid:this.refs.fallbackDesktop;if(n){if("app-fallback-content"==n.data("ref"))for(var h in this.refs){var c=this.refs[h];"app-fallback-content"!=c.data("ref")&&c.remove()}var u=n.data("track-title"),f=n.data("track-path");y.instance.trackPage(u,f),o.a.set(n,{visibility:"visible"})}}}]),e}(),E=function(){function e(t,n){g(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return w(e,null,[{key:"EVENT",get:function(){return{START:"CApp.EVENT.START"}}}]),w(e,[{key:"render",value:function(e,t){new v(e,t)}}]),e}();function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"spanize",value:function(e){e=e.split(" ");for(var t="",n=0;n<e.length;n++)t+="<span>"+e[n]+"</span>";return t}},{key:"toNumber",value:function(e){return e<10?"0"+e:e}},{key:"toMonthName",value:function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e]}},{key:"toWeekdayName",value:function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]}},{key:"slugfy",value:function(e){return e.replace(/[ÁÀÂÃÄ]/gi,"a").replace(/[ÉÈÊË]/gi,"e").replace(/[ÍÌÎÏ]/gi,"i").replace(/[ÓÒÔÕÖ]/gi,"o").replace(/[ÚÙÛÜ]/gi,"u").replace(/[Ç]/gi,"c").toLowerCase().replace(/^\s+|\s+$/g,"").replace(/[_|\s]+/g,"-").replace(/[^a-z0-9-\/]+/g,"").replace(/[-]+/g,"-").replace(/^-+|-+$/g,"")}},{key:"preventInjection",value:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace("javascript:","")}}],(n=null)&&T(t.prototype,n),i&&T(t,i),e}();function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"getDiff",value:function(e,t){return e>t?e-t:t-e}},{key:"getDistance",value:function(t,n,i,a){var o=e.getDiff(t,i),s=e.getDiff(n,a);return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}],(n=null)&&C(t.prototype,n),i&&C(t,i),e}();function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function N(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}var S=function(){function e(t,n){P(this,e),this.render(t,n)}return N(e,[{key:"animate",value:function(){o.a.fromTo(this.refs.pulse,{scale:.7},{scale:1,duration:2,ease:"power3.out"}),o.a.fromTo(this.refs.pulse,{opacity:.1},{opacity:0,duration:.8,delay:1.2,ease:"none",onComplete:this.animate.bind(this)})}},{key:"on_TOUCH_END",value:function(e){e.preventDefault(),o.a.set(this.refs.pulseContainer,{opacity:1}),o.a.killTweensOf(this.refs.background),this.currentScale=1,o.a.killTweensOf([this.refs.overlay,this.refs.background,this.element,this.refs.nextButton]),o.a.to(this.refs.overlay,{scale:this.currentScale?1:.2,duration:.2,ease:"power3.out"}),o.a.to(this.refs.background,{scale:this.currentScale?1:.2,duration:.3,ease:"power3.out"}),this.currentScale?(this.element.css("pointer-events","none"),this.refs.nextButton.css("pointer-events","none"),o.a.to(this.refs.nextButton,{opacity:0,duration:.3,ease:"power3.out"}),o.a.to(this.element,{opacity:0,duration:.3,ease:"power3.out"}),"start"==this.data.id?a()(window).trigger(A.EVENT.START):a()(window).trigger(A.EVENT.END)):(o.a.to(this.refs.nextButton,{opacity:1,duration:.3,ease:"power3.out"}),o.a.to(this.element,{opacity:1,duration:.3,ease:"power3.out"})),a()(document).off("touchend"),a()(document).off("touchmove")}},{key:"on_TOUCH_MOVE",value:function(e){e.preventDefault();var t=e.touches[0]||e.changedTouches[0];this.currentTouchPosition={x:t.pageX-this.initialTouchPosition.x,y:t.pageY-this.initialTouchPosition.y};var n=O.getDistance(0,0,this.currentTouchPosition.x,this.currentTouchPosition.y);this.currentScale=n/200,this.currentScale=this.currentScale<0?0:this.currentScale,this.currentScale=this.currentScale>1?1:this.currentScale;var i=.8*this.currentScale;i=(i=i>.8?.8:i)<0?0:i;var a=-1*(.8-this.currentScale);a=a<0?0:a,a*=5,o.a.to(this.refs.nextButton,{opacity:1-a,duration:.2,ease:"none"}),o.a.to(this.refs.overlay,{scale:.2+i,duration:.2,ease:"none"})}},{key:"hit_TOUCH_START",value:function(e){e.preventDefault(),this.currentScale=0;var t=e.touches[0]||e.changedTouches[0];this.initialTouchPosition={x:t.pageX,y:t.pageY},this.currentTouchPosition={x:t.pageX-this.initialTouchPosition.x,y:t.pageY-this.initialTouchPosition.y},o.a.set(this.refs.pulseContainer,{opacity:0}),o.a.killTweensOf(this.refs.background),o.a.to(this.refs.background,{scale:1,duration:.6,ease:"power3.out"}),a()(document).on("touchend",this.on_TOUCH_END.bind(this)),a()(document).on("touchmove",this.on_TOUCH_MOVE.bind(this))}},{key:"reset",value:function(){this.element.css("pointer-events","auto"),this.refs.nextButton.css("pointer-events","auto"),this.currentScale=0,o.a.set(this.refs.background,{scale:.2}),o.a.set(this.refs.overlay,{scale:0}),o.a.set(this.refs.nextButton,{opacity:1}),o.a.set(this.element,{opacity:1})}},{key:"render",value:function(e,t){this.element=a()(e),this.currentScale=0,this.initialTouchPosition={x:0,y:0},this.currentTouchPosition={x:0,y:0},this.data={id:this.element.data("button-call-id"),next:this.element.data("button-call-extra")},this.refs={pulseContainer:this.element.find('*[data-ref="button-call-pulse-container"]'),background:this.element.find('*[data-ref="button-call-background"]'),overlay:this.element.find('*[data-ref="button-call-overlay"]'),pulse:this.element.find('*[data-ref="button-call-pulse"]'),hit:this.element.find('*[data-ref="button-call-hit"]'),nextButton:a()("*[".concat(this.data.next,"]"))},a()(this.refs.hit).on("touchstart",this.hit_TOUCH_START.bind(this)),this.animate(),a()(window).on(A.EVENT.RESET,this.reset.bind(this))}}]),e}(),A=function(){function e(t,n){P(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return N(e,null,[{key:"EVENT",get:function(){return{START:"CAppButtonCall.EVENT.START",END:"CAppButtonCall.EVENT.END",RESET:"CAppButtonCall.EVENT.RESET"}}}]),N(e,[{key:"render",value:function(e,t){new S(e,t)}}]),e}(),I=A;function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var V=function(){var e,t,n;function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.volume=1}return e=i,n=[{key:"EVENT",get:function(){return{}}},{key:"instance",get:function(){return this._instance||(this._instance=new i("singletonEnforcer")),this._instance}}],(t=null)&&x(e.prototype,t),n&&x(e,n),i}();function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function D(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),e}var R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.date=new Date,this.isAutoTextInited=!1,this.isSamTextApplied=!1,this.isDeveloperTextApplied=!1,this.data=[{name:"".concat(localization.data.messages.samsungContactName),color:"#85e3c9",phone:"".concat(localization.data.messages.phoneCode,"**********"),time:new Date,isDraft:!1,chat:[],reply:{messages:["This is a ‘slimmed down’ experience, you won’t be able to do ‘everything’ you can on the real phone. It’s more about seeing that it’s easy to jump in, the waters fine.","Keep looking around and I’ll call you soon.","There are lots of other apps to play around with, not just text. Go explore."]},push:{messages:[{delay:5,text:"Welcome to the other side. Swipe up, down, left and right, see what everything does, tap on all the apps, make yourself at home… it’s your phone after all."}]}},{name:"".concat(localization.data.messages.influencerContactName),color:"#83d9b2",phone:"".concat(localization.data.messages.phoneCode,"**********"),time:new Date,isDraft:!1,chat:[],reply:{messages:["Hey, just jumping on a helicopter, will text back when I land.","Hey, just at some epic beach somewhere, can’t talk now, will text back later.","Hey, sorry haven’t had time to read your messages, just about to go diving in this amazing location."]},push:{messages:[{delay:60,text:"Hey, it’s ".concat(localization.data.messages.influencerContactName.split(" ")[0],". Check out the camera. I’ve put together a little walk through for you. Enjoy.")}]}},{name:"Generic friend 1",color:"#9dd894",phone:"".concat(localization.data.messages.phoneCode,"**********"),time:new Date,isDraft:!1,chat:[{message:"What’s up?",direction:"from",type:"text",minutesPast:30,readed:!0},{message:"Not much, have cleared my calendar to try out this android on apple thing.",direction:"to",type:"text",minutesPast:28,readed:!0},{message:"What?",direction:"from",type:"text",minutesPast:26,readed:!0},{message:"Never mind.",direction:"to",type:"text",minutesPast:24,readed:!0},{message:"Helen just told me you have me in your phone as Generic Friend 1. I really don’t know how I feel about that.",direction:"from",type:"text",minutesPast:22,readed:!0},{message:"",direction:"from",type:"image",image:"https://web.archive.org/web/20220119053530/https://media.giphy.com/media/l3q2K5jinAlChoCLS/source.gif",minutesPast:21,readed:!0},{message:"You should be flattered you are Generic Friend 1 and not Generic Friend 2.",direction:"to",type:"text",minutesPast:20,readed:!0},{message:"Good point.",direction:"from",type:"text",minutesPast:18,readed:!0}],reply:{messages:["I’m in a meeting, this is the generic response my phone suggests. Seems fitting for a generic friend.","Was that to me?","Have you finished your iTest yet? Seen the light?"]},push:{messages:[{delay:15,text:"Check out Themes. It’s an app on your homescreen. Your phone shouldn’t be generic, so Samsung lets you transform the whole design. Try applying one now."}]}},{name:"Friend with kids",color:"#c2cf75",phone:"".concat(localization.data.messages.phoneCode,"**********"),time:new Date,isDraft:!1,chat:[{message:"Hjdnks",direction:"from",type:"text",minutesPast:20,readed:!0},{message:"Ijdfb sieufienfos",direction:"from",type:"text",minutesPast:19,readed:!0},{message:"seodoijfsef",direction:"from",type:"text",minutesPast:18,readed:!0},{message:"",direction:"from",type:"image",image:"".concat(host,"/assets/img/messages/message-1.jpg"),minutesPast:17,readed:!0},{message:"Picture",direction:"from",type:"image",image:"".concat(host,"/assets/img/messages/message-2.jpg"),minutesPast:15,readed:!0},{message:"uNdlsndo",direction:"from",type:"text",minutesPast:14,readed:!0}],reply:{messages:["Hnndfk djfn","Od eindfim","uNdlsndo"]},push:{messages:[{delay:180,text:"hbsjissesdfsdf"},{delay:10,text:"Sorry, my daughter was playing with my phone. You’re lucky, you’ve got Samsung Kids, make sure you check it out… life saver!"}]}}],this.preloadChatImages()}return D(e,null,[{key:"EVENT",get:function(){return{UPDATE:"CAppMessagesData.EVENT.UPDATE",NEW_MESSAGE:"CAppMessagesData.EVENT.NEW_MESSAGE"}}},{key:"instance",get:function(){return this._instance||(this._instance=new e("singletonEnforcer")),window.notifications=this,this._instance}}]),D(e,[{key:"preloadChatImages",value:function(){for(var e=0;e<this.data.length;e++){this.data[e].chat.forEach((function(e){"image"==e.type&&(e.texture=new Image,e.texture.src=e.image,e.texture.onload=function(){})}))}}},{key:"startAutoText",value:function(){if(!this.isAutoTextInited){this.isAutoTextInited=!0;for(var e=0;e<this.data.length;e++){var t=this.data[e];if(o.a.killTweensOf(t),t.push){t.push.counter||(t.push.counter=0);var n=t.push.messages[t.push.counter].delay;this.delayNotification(t,n)}}}}},{key:"startCallText",value:function(){}},{key:"startDeveloperText",value:function(){if(!this.isDeveloperTextApplied){this.isDeveloperTextApplied=!0;var t={name:"Dev",color:"#000000",phone:"danillocastilho on github",time:new Date,isDraft:!1,chat:[{message:"Made with love by a few nerds on an island somewhere in the Southwest Pacific. 🖤",direction:"from",type:"text",minutesPast:1,readed:!0}],reply:{messages:[]},push:{messages:[]}};localStorage&&(window.isDevMessage=!0),this.data.push(t),a()(window).trigger(e.EVENT.UPDATE)}}},{key:"maskChatAsReaded",value:function(t){for(var n=this.data[t],i=0;i<n.chat.length;i++){n.chat[i].readed=!0}a()(window).trigger(e.EVENT.UPDATE)}},{key:"getIndexFromCurrentChat",value:function(e){for(var t=0,n=0;n<this.data.length;n++){-1!=this.data[n].name.indexOf(e)&&(t=n)}return t}},{key:"pushUserMessage",value:function(t,n){this.data[t].chat.push(n),a()(window).trigger(e.EVENT.UPDATE)}},{key:"delayNotification",value:function(e,t){e.push.messages[e.push.counter]&&(o.a.killTweensOf(e),o.a.fromTo(e,{},{duration:t,delay:0,onComplete:this.pushNotificationMessage.bind(this),onCompleteParams:[e]}))}},{key:"pushNotificationMessage",value:function(t){var n=t.push.messages[t.push.counter],i=!t.chat.filter((function(e){return!e.readed})).length;if(window.games||"messages"==window.app||"camera"==window.app||"kids"==window.app||!i||window.calling||window.dashboardSearchOpen||window.dashboardNotificationOpen)this.delayNotification(t,n.delay);else{var o={message:n.text,direction:"from",type:"text",minutesPast:0,readed:!1};n.link&&(o.link=n.link,o.title=n.title,o.image=n.image),t.time=new Date,t.push.counter++,t.chat.push(o),a()(window).trigger(e.EVENT.UPDATE),a()(window).trigger(e.EVENT.NEW_MESSAGE,[t]);var s=t.push.messages[t.push.counter];s&&this.delayNotification(t,s.delay)}}},{key:"pushExternalMessage",value:function(t){this.data.filter((function(e){return e.name==t.name})).length?this.pushBotMessage(t.name,t.chat[0]):(this.data.unshift(t),a()(window).trigger(e.EVENT.UPDATE),a()(window).trigger(e.EVENT.NEW_MESSAGE,[t]))}},{key:"pushBotMessage",value:function(t,n){for(var i=-1,o=0;o<this.data.length;o++){this.data[o].name==t&&(i=o)}-1!=i&&(this.data[i].chat.push(n),this.data[i].time=new Date,a()(window).trigger(e.EVENT.NEW_MESSAGE,[this.data[i]]),a()(window).trigger(e.EVENT.UPDATE))}}]),e}();function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function U(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),e}var H=function(){function e(t,n){M(this,e),this.render(t,n)}return U(e,[{key:"toHex",value:function(e){var t=e.toString(16);return 1==t.length?"0"+t:t}},{key:"parseColor",value:function(e){var t=[];return e.replace(/[\d+\.]+/g,(function(e){t.push(parseFloat(e))})),{hex:"#"+t.slice(0,3).map(this.toHex).join(""),opacity:4==t.length?t[3]:1}}},{key:"open",value:function(e,t,n){if(window.interactive&&!this.onTransition){switch(window.calling=!0,this.disableDetails(),this.disableStatus(),this.disableOptions(),a()(window).trigger(K.EVENT.ON_OPEN),a()(window).trigger(I.EVENT.RESET),this.onTransition=!1,this.counter=0,this.state.callType=t,this.element.css("display","block"),o.a.killTweensOf(this.element),o.a.set(this.element,{color:"#fff"}),o.a.set(this.refs.overlay,{opacity:0}),o.a.set(this.refs.buttonEnd,{opacity:1}),o.a.set(this.refs.optionsOut,{opacity:1}),t){case K.TYPE.OUTGOING:this.refs.number.html(n.phone),this.refs.country.html(n.country),this.refs.optionsOut.css("display","block"),this.refs.optionsCalling.css("display","block"),this.refs.statusCalling.css("display","block"),this.refs.audioOut.currentTime=0,this.refs.audioOut.play(),o.a.set(this.refs.optionsBackground,{opacity:1}),y.instance.trackPage("Phone","/app/phone/outgoing");break;case K.TYPE.INCOMING:o.a.killTweensOf(this.animation),this.refs.number.html(n.name),this.refs.country.html(n.phone);var i=new Date;i.setMinutes(i.getMinutes()-30);var s=k.toNumber(i.getHours()),r=k.toNumber(i.getMinutes());this.refs.recentCallTime.html("".concat(s,":").concat(r)),this.refs.optionsIn.css("display","block"),this.refs.optionsRecentCall.css("display","block"),this.refs.statusIncoming.css("display","block"),this.refs.audioIn.currentTime=0,this.refs.audioRingtone.currentTime=0,this.refs.audioRingtone.play(),o.a.set(this.refs.optionsBackground,{opacity:0}),y.instance.trackPage("Phone","/app/phone/incoming")}o.a.fromTo(this.element,{opacity:0,scale:1},{opacity:1,scale:1,delay:1,duration:.3,ease:"power3.out"}),o.a.killTweensOf([this.refs.backgroundCircle1,this.refs.backgroundCircle2]),o.a.set([this.refs.backgroundCircle1,this.refs.backgroundCircle2],{scale:0}),o.a.set(this.refs.country,{opacity:1}),o.a.killTweensOf(this.refs.background),o.a.set(this.refs.background,{opacity:1})}}},{key:"onOpen",value:function(){}},{key:"close",value:function(){o.a.to(this.element,{opacity:0,delay:1,duration:.3,ease:"power3.out",onStart:function(){a()(window).trigger(K.EVENT.CLOSE)},onComplete:this.onClose.bind(this)})}},{key:"onClose",value:function(){a()(window).trigger(K.EVENT.ON_CLOSE),this.element.css("display","none"),this.onTransition=!1,window.calling=!1}},{key:"update",value:function(){this.counter++,this.setTime()}},{key:"answer",value:function(){this.state.isCallAnswerd||(o.a.set(this.refs.optionsBackground,{opacity:1}),y.instance.trackPage("Phone","/app/phone/answer"),this.state.isCallAnswerd=!0,this.disableStatus(),this.disableOptions(),this.refs.statusAnswer.css("display","block"),this.refs.optionsOut.css("display","block"),this.refs.optionsCalling.css("display","block"),o.a.fromTo(this.refs.buttonEnd,{opacity:0},{opacity:1,duration:.4,ease:"power3.out"}),o.a.to(this.refs.country,{opacity:0,duration:.4,ease:"power3.out"}),this.counter=0,this.setTime(),this.timer=setInterval(this.update.bind(this),1e3),this.refs.audioRingtone.paused||(this.refs.audioRingtone.pause(),this.refs.audioRingtone.currentTime=0,this.refs.audioIn.currentTime=0,this.refs.audioIn.play()),o.a.fromTo([this.refs.backgroundCircle1,this.refs.backgroundCircle2],{scale:0},{scale:2,duration:3,ease:"power3.out"}),o.a.fromTo(this.refs.background,{opacity:1},{opacity:0,duration:2,delay:1,ease:"power3.out"}))}},{key:"hangup",value:function(){this.onTransition||(this.onTransition=!0,o.a.set(this.refs.optionsBackground,{opacity:0}),this.refs.audioOut.paused||(this.refs.audioOut.pause(),this.refs.audioOut.currentTime=0),this.refs.audioIn.paused||(this.refs.audioIn.pause(),this.refs.audioIn.currentTime=0),this.disableOptions(),this.state.isCallAnswerd||o.a.set(this.refs.optionsOut,{opacity:0}),this.refs.optionsOut.css("display","block"),this.refs.optionsEndCall.css("display","block"),clearInterval(this.timer),this.disableStatus(),this.refs.statusEnd.css("display","block"),0==this.counter?this.refs.time.html(""):this.setTime(),this.state.isCallAnswerd=!1,o.a.fromTo(this.refs.overlay,{opacity:0},{opacity:1,duration:.2,ease:"power3.out"}),o.a.to(this.refs.buttonEnd,{opacity:0,duration:.2,ease:"power3.out"}),this.currentColor=this.parseColor(this.refs.overlayColor.css("background-color")),this.currentColor=parseInt(this.currentColor.hex.replace("#","0x")),this.currentColor>=16e6&&o.a.to(this.element,{color:"#000",duration:.2,ease:"power3.out"}),o.a.to(this.refs.country,{opacity:0,duration:.2,ease:"power3.out"}),o.a.fromTo(this.refs.time,{opacity:0},{opacity:1,duration:.4,yoyo:!0,ease:"none",repeat:4,onComplete:this.on_HANGUP.bind(this)}),a()(window).trigger(K.EVENT.ON_HANGUP),R.instance.startCallText(),y.instance.trackPage("Phone","/app/phone/hangup"))}},{key:"deny",value:function(){this.onTransition||(this.state.isCallAnswerd?this.hangup():(this.refs.audioRingtone.pause(),this.refs.audioRingtone.currentTime=0,this.onTransition=!0,this.state.isCallAnswerd=!1,o.a.fromTo(this.element,{opacity:1},{opacity:0,duration:.6,scale:.6,ease:"power3.inOut",onComplete:this.onClose.bind(this)}),a()(window).trigger(K.EVENT.ON_DENY),R.instance.startCallText(),y.instance.trackPage("Phone","/app/phone/deny")))}},{key:"on_HANGUP",value:function(){o.a.to(this,{duration:1,onComplete:this.close.bind(this)})}},{key:"setTime",value:function(){var e=Math.floor(this.counter/60),t=this.counter%60,n="".concat(k.toNumber(e),":").concat(k.toNumber(t));this.refs.time.html(n)}},{key:"disableStatus",value:function(){this.refs.statusCalling.css("display","none"),this.refs.statusAnswer.css("display","none"),this.refs.statusEnd.css("display","none"),this.refs.statusIncoming.css("display","none")}},{key:"disableOptions",value:function(){this.refs.optionsCalling.css("display","none"),this.refs.optionsEndCall.css("display","none"),this.refs.optionsRecentCall.css("display","none"),this.refs.optionsIn.css("display","none"),this.refs.optionsOut.css("display","none")}},{key:"disableDetails",value:function(){}},{key:"audioOut_UPDATE",value:function(){this.refs.audioOut.currentTime>this.delayToAnswerCallInSeconds&&this.answer()}},{key:"audioRingtone_UPDATE",value:function(){}},{key:"audioIn_ENDED",value:function(){this.deny()}},{key:"endCounter",value:function(){window.calling||window.news||"camera"==window.app||"kids"==window.app?o.a.fromTo(this.animation,{value:0},{value:1,duration:10,onComplete:this.endCounter.bind(this)}):(o.a.killTweensOf(this.animation),window.call())}},{key:"startCounter",value:function(){o.a.fromTo(this.animation,{value:0},{value:0,duration:this.delayToCall,onComplete:this.endCounter.bind(this)})}},{key:"render",value:function(e,t){this.element=a()(e),this.onTransition=!1,this.delayToAnswerCallInSeconds=4,this.delayToCall=300,this.state={callType:"",isCallAnswerd:!1},this.animation={value:0},this.timer=null,this.counter=0,this.refs={audioRingtone:this.element.find('*[data-ref="app-call-inoutgoing-audio-ringtone"]').get(0),audioOut:this.element.find('*[data-ref="app-call-inoutgoing-audio-out"]').get(0),audioIn:this.element.find('*[data-ref="app-call-inoutgoing-audio-in"]').get(0),background:this.element.find('*[data-ref="app-call-inoutgoing-background"]'),backgroundCircle1:this.element.find('*[data-ref="app-call-inoutgoing-background-circle-1"]'),backgroundCircle2:this.element.find('*[data-ref="app-call-inoutgoing-background-circle-2"]'),number:this.element.find('*[data-ref="app-call-inoutgoing-number"]'),country:this.element.find('*[data-ref="app-call-inoutgoing-country"]'),buttonStart:this.element.find('*[data-ref="app-call-button-start"]'),buttonEnd:this.element.find('*[data-ref="app-call-button-end"]'),buttonDeny:this.element.find('*[data-ref="app-call-button-deny"]'),statusCalling:this.element.find('*[data-ref="app-call-inoutgoing-status-calling"]'),statusAnswer:this.element.find('*[data-ref="app-call-inoutgoing-status-answer"]'),statusEnd:this.element.find('*[data-ref="app-call-inoutgoing-status-end"]'),statusIncoming:this.element.find('*[data-ref="app-call-inoutgoing-status-incoming"]'),time:this.element.find('*[data-ref="app-call-inoutgoing-time"]'),recentCallTime:this.element.find('*[data-ref="app-call-inoutgoing-options-recent-call-time"]'),overlay:this.element.find('*[data-ref="app-call-inoutgoing-overlay"]'),overlayColor:this.element.find('*[data-ref="app-call-inoutgoing-overlay-color"]'),optionsBackground:this.element.find('*[data-ref="app-call-inoutgoing-options-background"]'),optionsCalling:this.element.find('*[data-ref="app-call-inoutgoing-options-calling"]'),optionsEndCall:this.element.find('*[data-ref="app-call-inoutgoing-options-end-call"]'),optionsRecentCall:this.element.find('*[data-ref="app-call-inoutgoing-options-recent-call"]'),optionsOut:this.element.find('*[data-ref="app-call-inoutgoing-options-out"]'),optionsIn:this.element.find('*[data-ref="app-call-inoutgoing-options-in"]')},a()(this.refs.buttonEnd).on("click",this.hangup.bind(this)),a()(window).on(I.EVENT.START,this.answer.bind(this)),a()(window).on(I.EVENT.END,this.deny.bind(this)),this.refs.audioOut.addEventListener("timeupdate",this.audioOut_UPDATE.bind(this)),this.refs.audioOut.addEventListener("ended",this.hangup.bind(this)),this.refs.audioRingtone.addEventListener("timeupdate",this.audioRingtone_UPDATE.bind(this)),this.refs.audioRingtone.addEventListener("ended",this.deny.bind(this)),this.refs.audioIn.addEventListener("ended",this.audioIn_ENDED.bind(this)),a()(window).on(K.EVENT.OPEN,this.open.bind(this)),a()(window).on(K.EVENT.CLOSE,this.close.bind(this)),a()(window).on(K.EVENT.START,this.startCounter.bind(this))}}]),e}(),K=function(){function e(t,n){M(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return U(e,null,[{key:"TYPE",get:function(){return{INCOMING:"CAppCallInOutgoing.EVENT.INCOMING",OUTGOING:"CAppCallInOutgoing.EVENT.OUTGOING"}}},{key:"EVENT",get:function(){return{START:"CAppCallInOutgoing.EVENT.START",OPEN:"CAppCallInOutgoing.EVENT.OPEN",ON_OPEN:"CAppCallInOutgoing.EVENT.ON_OPEN",CLOSE:"CAppCallInOutgoing.EVENT.CLOSE",ON_CLOSE:"CAppCallInOutgoing.EVENT.ON_CLOSE",ON_HANGUP:"CAppCallInOutgoing.EVENT.ON_HANGUP",ON_DENY:"CAppCallInOutgoing.EVENT.ON_DENY"}}}]),U(e,[{key:"render",value:function(e,t){new H(e,t)}}]),e}(),q=K;function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Y(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),e}var W=function(){function e(t,n){F(this,e),this.render(t,n)}return Y(e,[{key:"on_OPEN_APP",value:function(e,t){o.a.fromTo(this.element,{scale:1,opacity:1},{scale:.9,opacity:.5,duration:.4,transformOrigin:"50% 100%",delay:t})}},{key:"on_CLOSE_APP",value:function(e,t){o.a.fromTo(this.element,{scale:.9,opacity:.5},{scale:1,opacity:1,duration:.4,transformOrigin:"50% 100%",delay:t})}},{key:"outgoing_ON_DENY",value:function(e){o.a.fromTo(this.element,{scale:.9,opacity:.5},{scale:1,opacity:1,duration:.4,transformOrigin:"50% 100%",delay:.2})}},{key:"startAutoText",value:function(){""==window.app&&R.instance.startAutoText()}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={container:this.element.find('*[data-ref="dashboard-content-container"]')},a()(window).on(G.EVENT.OPEN_APP,this.on_OPEN_APP.bind(this)),a()(window).on(G.EVENT.CLOSE_APP,this.on_CLOSE_APP.bind(this)),a()(window).on(q.EVENT.ON_DENY,this.outgoing_ON_DENY.bind(this)),a()(this.element).on("touchend",this.startAutoText.bind(this))}}]),e}(),G=function(){function e(t,n){F(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Y(e,null,[{key:"EVENT",get:function(){return{OPEN_APP:"CDashboardContent.EVENT.OPEN_APP",CLOSE_APP:"CDashboardContent.EVENT.CLOSE_APP"}}}]),Y(e,[{key:"render",value:function(e,t){new W(e,t)}}]),e}(),X=G;n("Womt");function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Z(e,t,n){return t&&J(e.prototype,t),n&&J(e,n),e}var Q=function(){function e(t,n){z(this,e),this.render(t,n)}return Z(e,[{key:"on_OPEN_APP",value:function(e,t,n){o.a.to(this.element,{color:"#555555",duration:.2,delay:t}),n||o.a.set(this.refs.background,{opacity:.9,duration:.2,delay:t})}},{key:"on_CLOSE_APP",value:function(e,t){o.a.to(this.element,{color:"#ffffff",duration:.2,delay:t}),o.a.set(this.refs.background,{opacity:0,duration:.2,delay:t})}},{key:"outgoing_OPEN",value:function(){o.a.to(this.refs.background,{opacity:0,duration:.2,delay:1})}},{key:"outgoing_ON_HANGUP",value:function(){o.a.set(this.refs.background,{opacity:.9,duration:.2,delay:0})}},{key:"outgoing_ON_DENY",value:function(){o.a.set(this.refs.background,{opacity:.9,duration:.2,delay:.2})}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={background:this.element.find('*[data-ref="dashboard-header-background"]')},a()(window).on($.EVENT.OPEN_APP,this.on_OPEN_APP.bind(this)),a()(window).on($.EVENT.CLOSE_APP,this.on_CLOSE_APP.bind(this)),a()(window).on(q.EVENT.ON_OPEN,this.outgoing_OPEN.bind(this)),a()(window).on(q.EVENT.ON_HANGUP,this.outgoing_ON_HANGUP.bind(this)),a()(window).on(q.EVENT.ON_DENY,this.outgoing_ON_DENY.bind(this))}}]),e}(),$=function(){function e(t,n){z(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Z(e,null,[{key:"EVENT",get:function(){return{OPEN_APP:"CDashboardHeader.EVENT.OPEN_APP",CLOSE_APP:"CDashboardHeader.EVENT.CLOSE_APP"}}}]),Z(e,[{key:"render",value:function(e,t){new Q(e,t)}}]),e}(),ee=$;function te(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ne=function(){var e,t,n;function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.props={}}return e=i,n=[{key:"EVENT",get:function(){return{UPDATE:"CAppData.EVENT.UPDATE"}}},{key:"instance",get:function(){return this._instance||(this._instance=new i("singletonEnforcer")),window.notifications=this,this._instance}}],(t=null)&&te(e.prototype,t),n&&te(e,n),i}();function ie(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"shuffle",value:function(e){var t,n,i;for(i=e.length-1;i>0;i--)t=Math.floor(Math.random()*(i+1)),n=e[i],e[i]=e[t],e[t]=n;return e}},{key:"rotate",value:function(e,t){return t-=(e=this.clone(e)).length*Math.floor(t/e.length),e.push.apply(e,e.splice(0,t)),e}},{key:"clone",value:function(e){return e.slice()}}],(n=null)&&ie(t.prototype,n),i&&ie(t,i),e}();function oe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var se=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"share",value:function(){var e=this,t={title:document.title,text:a()("meta[name=description]").attr("content"),url:location.href.replace("index.html","")};return!!navigator.share&&(navigator.share(t).then((function(){e.close()})).catch((function(e){})),!1)}}],(n=null)&&oe(t.prototype,n),i&&oe(t,i),e}();function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function he(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}var ce=function(){function e(t,n){re(this,e),this.render(t,n)}return he(e,[{key:"init",value:function(){this.isOpen||(a()(window).trigger(be.EVENT.OPEN_GAME_APP),this.isOpen=!0,this.reset(),o.a.set(this.element,{display:"block"}),this.refs.status.maxNumberOfApples.html(this.getMaxNumberOfApples()),o.a.killTweensOf([this.refs.status.play,this.refs.status.gameover,this.refs.status.running]),o.a.set([this.refs.status.play,this.refs.status.gameover,this.refs.status.running],{opacity:0,pointerEvents:"none"}),o.a.set([this.refs.status.play],{opacity:1,pointerEvents:"auto"}),window.games=!0,o.a.killTweensOf(this.refs.bot.rockets),o.a.fromTo(this.refs.bot.rockets,{transformOrigin:"center top",scale:.6,force3D:!0},{transformOrigin:"center top",scale:1.2,force3D:!0,duration:.2,ease:"none",repeat:-1}),this.openCredits(),this.onGameRender(),this.createTrees())}},{key:"dispose",value:function(){this.isOpen&&(a()(window).trigger(be.EVENT.CLOSE_GAME_APP),this.isOpen=!1,this.data.running=!1,o.a.killTweensOf([this.refs.presents,this.refs.screen]),o.a.set([this.refs.presents,this.refs.screen],{opacity:0}),o.a.set(this.refs.presents,{display:"block"}),cancelAnimationFrame(this.data.animationFrame),window.games=!1,this.data.trees.map((function(e){e.tree.remove()})),this.data.trees=[],this.data.treeIndex=0,o.a.killTweensOf(this.refs.bot.rockets),this.data.backgroundPosition.x=0,o.a.set(this.refs.clouds,{backgroundPosition:"".concat(.2*this.data.backgroundPosition.x,"px 0px")}),o.a.set(this.refs.mountains,{backgroundPosition:"".concat(.3*this.data.backgroundPosition.x,"px 0px")}),o.a.set(this.refs.bush,{backgroundPosition:"".concat(1.1*this.data.backgroundPosition.x,"px 0px")}),o.a.set(this.refs.trees,{x:this.data.backgroundPosition.x}),o.a.set(this.refs.ground,{backgroundPosition:"".concat(1.5*this.data.backgroundPosition.x,"px 0px")}),o.a.set(this.element,{display:"none"}))}},{key:"openCredits",value:function(){var e=this;o.a.fromTo(this.refs.presents,{opacity:1},{opacity:0,duration:.2,ease:"power3.out",delay:.2,onComplete:function(){o.a.killTweensOf(e.refs.presents),e.openGame()}})}},{key:"openGame",value:function(){o.a.set(this.refs.presents,{display:"none"}),o.a.fromTo(this.refs.screen,{opacity:0},{opacity:1,duration:.6,ease:"power3.out"}),o.a.fromTo(this.refs.status.play,{opacity:0},{opacity:1,pointerEvents:"auto",duration:.6,ease:"power3.out",onComplete:this.onOpen.bind(this)})}},{key:"onOpen",value:function(){this.data.running=!0}},{key:"setGameOver",value:function(){var e=this;this.data.isTapEnabled=!1,this.data.isGameOver=!0,this.data.inited=!1,this.data.tick=0,this.isGameStarted=!1,o.a.set(this.refs.dashboard,{pointerEvents:"auto"}),o.a.killTweensOf(this.refs.splash),o.a.fromTo(this.refs.splash,{opacity:1},{opacity:0,duration:.3,ease:"power3.out"}),o.a.killTweensOf(this.refs.status.running),o.a.fromTo(this.refs.status.running,{opacity:0},{opacity:0,pointerEvents:"none",duration:.6,ease:"power3.out"}),o.a.killTweensOf(this.refs.status.gameover),o.a.fromTo(this.refs.status.gameover,{opacity:0},{opacity:1,pointerEvents:"auto",duration:.6,ease:"power3.out",onComplete:function(){e.data.isTapEnabled=!0}})}},{key:"getMaxNumberOfApples",value:function(){if(window.isDevMessage)return 1e6;if(localStorage){var e=localStorage.getItem("game-1-score");if(e)return e}return 0}},{key:"setAppleNumber",value:function(){var e=this.data.applesCollected,t=this.getMaxNumberOfApples();localStorage&&e>t&&localStorage.setItem("game-1-score",e),this.refs.status.numberOfApples.html(e),this.refs.status.maxNumberOfApples.html(this.getMaxNumberOfApples())}},{key:"addApple",value:function(){var e=this.refs.apple.template.clone().get(0);o.a.set(e,{position:"absolute",top:0,right:0,opacity:1});var t=window.innerHeight/2-100,n=t-Math.random()*(2*t);this.data.apples.push({x:50,y:n,available:!0,div:e}),this.refs.apple.group.append(e)}},{key:"createTrees",value:function(){if(this.data.trees.length<3){var e=this.refs.templates.trees.clone(),t=this.refs.templates.imageTree.width(),n=100+Math.random()*(100/1.5),i=this.data.trees.length>0?this.data.trees[this.data.trees.length-1].tree.data("position")+t+n:this.data.initialTreePosition;o.a.set(e,{x:i}),e.data("position",i);var a=55+30*Math.random(),s=e.find('*[data-ref="app-game-1-template-image-tree"]');o.a.set(s,{height:"".concat(a,"vh")});var r=e.find('*[data-ref="app-game-1-template-container-tree"]');this.refs.trees.append(e);var l=2+Math.round(2*Math.random());this.isGameDecreaseApples&&(l/=Math.round(1+this.data.progress/500),l=Math.round(Math.max(l,1)));for(var h=ae.shuffle(this.data.applePositions).slice(0,l),c=[],u=0;u<h.length;u++){var d=h[u],f=this.refs.apple.template.clone().get(0),p=60*Math.random()-30+60;o.a.set(f,{position:"absolute",top:d,left:"".concat(p,"%"),x:"-50%",y:"-50%",opacity:1,width:25}),c.push({div:f,available:!0}),r.append(f)}this.data.trees.push({tree:e,apples:c}),this.data.treeIndex+=1,this.createTrees()}}},{key:"disposeTrees",value:function(){var e=this.data.trees.length>0?this.data.trees[0].tree:null;if(e){var t=e.find('*[data-ref="app-game-1-template-image-tree"]').get(0).getBoundingClientRect();t.x+t.width<0&&(e.remove(),this.data.trees.shift(),this.createTrees())}}},{key:"getCurrentApples",value:function(){var e=[];return this.data.trees.map((function(t){e=e.concat(t.apples)})),e}},{key:"setAppleCollectedAnimation",value:function(){var e=this;if(!this.data.dropAnimation){var t=o.a.timeline({paused:!0});[{x:60,y:-60},{x:60,y:-30},{x:60,y:0},{x:60,y:30},{x:60,y:60}].map((function(n,i){t.fromTo(e.refs.drop.droplets.eq(i),{x:0,y:0,opacity:1,scale:1},{x:n.x,y:n.y,opacity:0,duration:.3,scale:0,ease:"sine.inOut"},.005*i)})),this.data.dropAnimation=t}this.data.dropAnimation.pause(),this.data.dropAnimation.seek(0),this.data.dropAnimation.play()}},{key:"onGameRender",value:function(){var e=this;if(this.data.inited&&!this.data.isGameOver&&this.data.running){var t=this.data.botCounter<=1?1.75:this.data.botCounter;this.data.botCounter=Math.pow(t,1.05),this.data.botPosition.y+=this.data.botCounter;var n=this.refs.bot.head.get(0),i=this.refs.bot.container.get(0),a=n.getBoundingClientRect(),s=this.getCurrentApples();s.map((function(e){var t=e.div.getBoundingClientRect();e.available&&t.x<10&&(e.available=!1)}));var r=this.isGameEasy?this.data.jumpForce:this.data.jumpForce-.4;this.data.jumpForce=r;var l=1*Math.max(this.data.jumpForce-55,0)/180*-1*1.5;o.a.set(this.refs.progress,{x:"".concat(100*l,"%")}),o.a.set(i,{y:this.data.botPosition.y}),a.y<0||a.y>window.innerHeight-a.height?this.setGameOver():s.map((function(t){var n=t.div,i=n.getBoundingClientRect();if(t.available&&e.data.jumpForce>20&&i.x>a.x&&i.x<a.x+a.width&&i.y>a.y&&i.y<a.y+a.height){t.available=!1;var s=e.isGameEasy?e.data.jumpForce:e.data.jumpForce+40;e.data.jumpForce=s>180?180:s,o.a.set(n,{opacity:0}),e.data.applesCollected+=1,e.setAppleCollectedAnimation(),e.setAppleNumber()}}));var h=Math.min(3+this.data.progress/200,100);this.data.backgroundPosition.x-=this.isGameSpeedUp?h:3,o.a.set(this.refs.clouds,{backgroundPosition:"".concat(.2*this.data.backgroundPosition.x,"px 0px")}),o.a.set(this.refs.mountains,{backgroundPosition:"".concat(.3*this.data.backgroundPosition.x,"px 0px")}),o.a.set(this.refs.bush,{backgroundPosition:"".concat(1.1*this.data.backgroundPosition.x,"px 0px")}),o.a.set(this.refs.trees,{x:this.data.backgroundPosition.x}),o.a.set(this.refs.ground,{backgroundPosition:"".concat(1.5*this.data.backgroundPosition.x,"px 0px")}),this.disposeTrees(),this.data.tick+=.15,this.data.progress+=1}var c=-1*Math.abs(35*Math.sin(this.data.tick));o.a.set(this.refs.bot.head,{transformOrigin:"left bottom",rotation:c}),this.data.animationFrame=requestAnimationFrame(this.onGameRender.bind(this))}},{key:"reset",value:function(){this.data.botPosition.y=0+window.innerHeight/2.75,this.data.botCounter=1.75,this.data.jumpForce=150,this.data.applesCollected=0,this.data.tick=0,this.setAppleNumber(),o.a.killTweensOf(this.refs.status.play),o.a.set(this.refs.status.play,{opacity:0,pointerEvents:"none"}),o.a.killTweensOf(this.refs.status.gameover),o.a.set(this.refs.status.gameover,{opacity:0,pointerEvents:"none"}),o.a.killTweensOf(this.refs.status.running),o.a.fromTo(this.refs.status.running,{opacity:0},{opacity:1,duration:.6,ease:"power3.out"});var e=this.refs.bot.container.get(0);o.a.set(e,{y:this.data.botPosition.y}),this.data.isGameOver=!1}},{key:"game_TAP",value:function(){if(this.isGameStarted&&this.data.isTapEnabled&&this.data.running){this.data.inited||(this.data.progress=0,this.reset(),this.data.inited=!0);var e=this.refs.bot.container.get(0);o.a.killTweensOf(e),o.a.fromTo(e,{rotation:15,force3D:!0},{force3D:!0,rotation:0,duration:.3,ease:"sine.out"}),this.data.jumpForce>55&&(this.data.botCounter=1.75,o.a.killTweensOf(this.data.botPosition),o.a.to(this.data.botPosition,{duration:this.data.jumpForce/500,y:this.data.botPosition.y-this.data.jumpForce,ease:"power1.out"}))}}},{key:"game_START",value:function(){this.isGameStarted=!0,o.a.killTweensOf(this.refs.bot.rocket),o.a.set(this.refs.bot.rocket,{opacity:1}),o.a.set(this.refs.dashboard,{pointerEvents:"none"}),this.game_TAP()}},{key:"game_SHARE",value:function(){se.share()}},{key:"render",value:function(e){this.element=a()(e),this.isOpen=!1,this.isGameEasy=!1,this.isGameStarted=!1,this.isGameSpeedUp=!1,this.isGameDecreaseApples=!0,this.data={running:!1,animationFrame:0,inited:!1,isGameOver:!1,botCounter:1.75,jumpForce:150,botPosition:{x:0,y:0+window.innerHeight/2.75},isTapEnabled:!0,apples:[],appleX:2,applesCollected:0,backgroundPosition:{x:0},trees:[],treeIndex:0,initialTreePosition:window.innerWidth+5,applesAvailable:[],tick:0,dropAnimation:null,progress:0,applePositions:["0%","25%","50%","75%","100%"]},this.refs={presents:this.element.find('*[data-ref="app-game-1-presents"]'),screen:this.element.find('*[data-ref="app-game-1-screen"]'),background:this.element.find('*[data-ref="app-game-1-background"]'),ground:this.element.find('*[data-ref="app-game-1-ground"]'),mountains:this.element.find('*[data-ref="app-game-1-mountains"]'),bush:this.element.find('*[data-ref="app-game-1-bush"]'),clouds:this.element.find('*[data-ref="app-game-1-clouds"]'),trees:this.element.find('*[data-ref="app-game-1-trees"]'),play:this.element.find('*[data-ref="app-game-play-again"]'),share:this.element.find('*[data-ref="app-game-share"]'),splash:this.element.find('*[data-ref="app-game-1-splash"]'),progress:this.element.find('*[data-ref="app-game-1-progress-bar"]'),drop:{container:this.element.find('*[data-ref="app-game-1-drop-container"]'),droplets:this.element.find('*[data-ref="app-game-1-drop-item"]')},templates:{trees:this.element.find('*[data-ref="app-game-1-template-tree"]'),imageTree:this.element.find('*[data-ref="app-game-1-template-image-tree"]')},status:{play:this.element.find('*[data-ref="app-game-1-bot-status-play"]'),gameover:this.element.find('*[data-ref="app-game-1-bot-status-gameover"]'),running:this.element.find('*[data-ref="app-game-1-bot-status-running"]'),numberOfApples:this.element.find('*[data-ref="app-game-1-bot-status-number-of-apples"]'),maxNumberOfApples:this.element.find('*[data-ref="app-game-1-bot-status-max-number-of-apples"]')},bot:{container:this.element.find('*[data-ref="app-game-1-bot-container"]'),head:this.element.find('*[data-ref="app-game-1-bot-head"]'),rockets:this.element.find('*[data-ref="app-game-1-bot-rocket"]'),rocket:this.element.find('*[data-ref="app-game-1-bot-rockets"]')},apple:{template:this.element.find('*[data-ref="app-game-1-apple-template"]'),group:this.element.find('*[data-ref="app-game-1-apple-group"]')},dashboard:a()('*[data-component="dashboard-footer"]')},this.refs.status.maxNumberOfApples.html(this.getMaxNumberOfApples());var t=this.refs.bot.container.get(0);o.a.set(t,{y:this.data.botPosition.y}),o.a.set([this.refs.status.play,this.refs.status.gameover,this.refs.status.running],{opacity:0,pointerEvents:"none"}),o.a.set(this.refs.splash,{opacity:0}),o.a.set(this.refs.drop.droplets,{opacity:0}),o.a.set(this.refs.screen,{x:0,y:0,force3D:!0}),o.a.set(this.refs.progress,{x:"-100%"}),this.refs.screen.on("touchend",this.game_TAP.bind(this)),this.refs.play.on("touchend",this.game_START.bind(this)),a()(window).on(ue.EVENT.OPEN,this.init.bind(this)),a()(window).on(ue.EVENT.CLOSE,this.dispose.bind(this))}}]),e}(),ue=function(){function e(t,n){re(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return he(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppRobotGame.EVENT.OPEN",CLOSE:"CAppRobotGame.EVENT.CLOSE"}}}]),he(e,[{key:"render",value:function(e,t){new ce(e,t)}}]),e}(),de=ue;function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function me(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}var ye=function(){function e(t,n){fe(this,e),this.render(t,n)}return me(e,[{key:"on_OPEN_APP",value:function(e,t){o.a.set(this.element,{color:"#a8a8a8",backgroundColor:"rgba(255, 255, 255, 0)",duration:.2,delay:t})}},{key:"on_CLOSE_APP",value:function(e,t){window.dashboardSearchOpen?o.a.set(this.element,{color:"#ffffff",backgroundColor:"rgba(255, 255, 255, 0)",duration:.2,delay:t}):o.a.set(this.element,{color:"#555555",backgroundColor:"rgba(255, 255, 255, 0)",duration:.2,delay:t})}},{key:"on_OPEN_NEWS_APP",value:function(e,t){window.news=!0,o.a.set(this.element,{color:"#666666",backgroundColor:"rgba(255, 255, 255, 0)",duration:.2,delay:t})}},{key:"on_CLOSE_NEWS_APP",value:function(e,t){window.news=!1,o.a.set(this.element,{color:"#555555",backgroundColor:"rgba(255, 255, 255, 0)",duration:.2,delay:t})}},{key:"on_OPEN_GAME_APP",value:function(e){o.a.set(this.element,{color:"#ffffff",backgroundColor:"rgba(255, 255, 255, 0)",duration:.2})}},{key:"on_CLOSE_GAME_APP",value:function(e){o.a.set(this.element,{color:"#666666",backgroundColor:"rgba(255, 255, 255, 0)",duration:.2})}},{key:"on_OPEN_DASHBOARD_SEARCH",value:function(e,t){o.a.set(this.element,{color:"#ffffff",backgroundColor:"rgba(255, 255, 255, 0)",duration:.2,delay:t})}},{key:"on_CLOSE_DASHBOARD_SEARCH",value:function(e,t){o.a.set(this.element,{color:"#555555",backgroundColor:"rgba(255, 255, 255, 0)",duration:.2,delay:t})}},{key:"on_CLICK_BUTTON_MENU",value:function(e){a()(window).trigger(ge.EVENT.MENU)}},{key:"on_CLICK_BUTTON_HOME",value:function(e){if(ot.getInApp("video"))return!1;window.games?a()(window).trigger(de.EVENT.CLOSE):this.checkClosePermissions()?(a()(window).trigger(ot.EVENT.CLOSE,[!0]),a()(window).trigger(ge.EVENT.HOME),y.instance.trackPage("Dashboard","/app/dashboard/button-home")):a()(window).trigger(ot.EVENT.PREVENT_CLOSE)}},{key:"on_CLICK_BUTTON_BACK",value:function(e){window.games?a()(window).trigger(de.EVENT.CLOSE):this.checkClosePermissions()?(a()(window).trigger(ot.EVENT.CLOSE),a()(window).trigger(ge.EVENT.BACK),y.instance.trackPage("Dashboard","/app/dashboard/button-back")):a()(window).trigger(ot.EVENT.PREVENT_CLOSE)}},{key:"on_CLOSE_PREVENTED_APP",value:function(){this.checkClosePermissions()?(a()(window).trigger(ot.EVENT.CLOSE,[!0]),a()(window).trigger(ge.EVENT.HOME)):a()(window).trigger(ot.EVENT.PREVENT_CLOSE)}},{key:"on_touchstart_BUTTON",value:function(e){var t=a()(e.currentTarget).find('*[data-ref="dashboard-footer-button-overlay"]');o.a.fromTo(t,{scaleX:.6},{scaleX:1,duration:.4,ease:"power3.out"}),o.a.fromTo(t,{opacity:1},{opacity:0,duration:.4,delay:.2,ease:"power3.inOut"})}},{key:"update_THEME_BLACK",value:function(){o.a.set(this.refs.overlayBackground,{backgroundColor:"#000"})}},{key:"update_THEME_WHITE",value:function(){o.a.set(this.refs.overlayBackground,{backgroundColor:"#FFF"})}},{key:"outgoing_ON_OPEN",value:function(){o.a.set(this.element,{color:"#ffffff",duration:.2,delay:1}),this.element.css("pointer-events","none")}},{key:"outgoing_ON_CLOSE",value:function(){this.element.css("pointer-events","auto")}},{key:"outgoing_ON_DENY_OR_ON_HANGUP",value:function(){window.dashboardSearchOpen?""!=window.app?o.a.set(this.element,{color:"#555555",duration:.2,delay:0}):o.a.set(this.element,{color:"#ffffff",duration:.2,delay:0}):""!=window.app?o.a.set(this.element,{color:"#a8a8a8",duration:.2,delay:0}):o.a.set(this.element,{color:"#555555",duration:.2,delay:0})}},{key:"checkClosePermissions",value:function(){return"kids"!=window.app||!ne.instance.props.kids.preventClose}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={background:this.element.find('*[data-ref="dashboard-footer-background"]'),overlayBackground:this.element.find('*[data-ref="dashboard-footer-button-overlay-background"]'),buttonMenu:this.element.find('*[data-ref="dashboard-footer-button-menu"]'),buttonBack:this.element.find('*[data-ref="dashboard-footer-button-back"]'),buttonHome:this.element.find('*[data-ref="dashboard-footer-button-home"]'),buttonStroke:this.element.find('*[data-ref="dashboard-footer-button-stroke"]')},a()(window).on(ge.EVENT.OPEN_APP,this.on_OPEN_APP.bind(this)),a()(window).on(ge.EVENT.CLOSE_APP,this.on_CLOSE_APP.bind(this)),a()(window).on(ge.EVENT.OPEN_NEWS_APP,this.on_OPEN_NEWS_APP.bind(this)),a()(window).on(ge.EVENT.CLOSE_NEWS_APP,this.on_CLOSE_NEWS_APP.bind(this)),a()(window).on(ge.EVENT.OPEN_GAME_APP,this.on_OPEN_GAME_APP.bind(this)),a()(window).on(ge.EVENT.CLOSE_GAME_APP,this.on_CLOSE_GAME_APP.bind(this)),a()(window).on(ge.EVENT.OPEN_DASHBOARD_SEARCH,this.on_OPEN_DASHBOARD_SEARCH.bind(this)),a()(window).on(ge.EVENT.CLOSE_DASHBOARD_SEARCH,this.on_CLOSE_DASHBOARD_SEARCH.bind(this)),a()(window).on(ge.EVENT.CLOSE_PREVENTED_APP,this.on_CLOSE_PREVENTED_APP.bind(this)),a()(this.refs.buttonMenu).on("click",this.on_CLICK_BUTTON_MENU.bind(this)),a()(this.refs.buttonBack).on("click",this.on_CLICK_BUTTON_BACK.bind(this)),a()(this.refs.buttonHome).on("click",this.on_CLICK_BUTTON_HOME.bind(this)),a()(this.refs.buttonMenu).on("touchstart",this.on_touchstart_BUTTON.bind(this)),a()(this.refs.buttonBack).on("touchstart",this.on_touchstart_BUTTON.bind(this)),a()(this.refs.buttonHome).on("touchstart",this.on_touchstart_BUTTON.bind(this)),a()(window).on(ge.EVENT.UPDATE_THEME_BLACK,this.update_THEME_BLACK.bind(this)),a()(window).on(ge.EVENT.UPDATE_THEME_WHITE,this.update_THEME_WHITE.bind(this)),a()(window).on(q.EVENT.ON_OPEN,this.outgoing_ON_OPEN.bind(this)),a()(window).on(q.EVENT.ON_CLOSE,this.outgoing_ON_CLOSE.bind(this)),a()(window).on(q.EVENT.ON_HANGUP,this.outgoing_ON_DENY_OR_ON_HANGUP.bind(this)),a()(window).on(q.EVENT.ON_DENY,this.outgoing_ON_DENY_OR_ON_HANGUP.bind(this))}}]),e}(),ge=function(){function e(t,n){fe(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return me(e,null,[{key:"EVENT",get:function(){return{HOME:"CDashboardFooter.EVENT.HOME",MENU:"CDashboardFooter.EVENT.MENU",BACK:"CDashboardFooter.EVENT.BACK",UPDATE_THEME_BLACK:"CDashboardFooter.EVENT.UPDATE_THEME_BLACK",UPDATE_THEME_WHITE:"CDashboardFooter.EVENT.UPDATE_THEME_WHITE",OPEN_APP:"CDashboardFooter.EVENT.OPEN_APP",CLOSE_APP:"CDashboardFooter.EVENT.CLOSE_APP",OPEN_NEWS_APP:"CDashboardFooter.EVENT.OPEN_NEWS_APP",CLOSE_NEWS_APP:"CDashboardFooter.EVENT.CLOSE_NEWS_APP",OPEN_GAME_APP:"CDashboardFooter.EVENT.OPEN_GAME_APP",CLOSE_GAME_APP:"CDashboardFooter.EVENT.CLOSE_NEWS_APP",OPEN_DASHBOARD_SEARCH:"CDashboardFooter.EVENT.OPEN_DASHBOARD_SEARCH",CLOSE_DASHBOARD_SEARCH:"CDashboardFooter.EVENT.CLOSE_DASHBOARD_SEARCH",CLOSE_PREVENTED_APP:"CDashboardFooter.EVENT.CLOSE_PREVENTED_APP"}}}]),me(e,[{key:"render",value:function(e,t){new ye(e,t)}}]),e}(),be=ge;function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ee(e,t,n){return t&&ve(e.prototype,t),n&&ve(e,n),e}var Te=function(){function e(t,n){we(this,e),this.render(t,n)}return Ee(e,[{key:"on_OPEN_APP",value:function(e,t){}},{key:"on_CLOSE_APP",value:function(e,t){}},{key:"outgoing_ON_DENY",value:function(e){o.a.fromTo(this.refs.background,{scale:1.3},{scale:1,duration:.4,ease:"power3.out",delay:.2})}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={background:this.element.find('*[data-ref="dashboard-background"]')},a()(window).on(ke.EVENT.OPEN_APP,this.on_OPEN_APP.bind(this)),a()(window).on(ke.EVENT.CLOSE_APP,this.on_CLOSE_APP.bind(this)),a()(window).on(q.EVENT.ON_DENY,this.outgoing_ON_DENY.bind(this))}}]),e}(),ke=function(){function e(t,n){we(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ee(e,null,[{key:"EVENT",get:function(){return{OPEN_APP:"CDashboard.EVENT.OPEN_APP",CLOSE_APP:"CDashboard.EVENT.CLOSE_APP"}}}]),Ee(e,[{key:"render",value:function(e,t){new Te(e,t)}}]),e}(),Ce=ke;function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _e(e,t,n){return t&&Pe(e.prototype,t),n&&Pe(e,n),e}var Ne=function(){function e(t,n){Oe(this,e),this.render(t,n)}return _e(e,[{key:"on_OPEN_APP",value:function(e,t){o.a.to(this.element,{opacity:1,duration:.4,delay:t})}},{key:"on_CLOSE_APP",value:function(e,t){o.a.to(this.element,{opacity:0,duration:.4,delay:t})}},{key:"render",value:function(e,t){this.element=a()(e),a()(window).on(Se.EVENT.OPEN_APP,this.on_OPEN_APP.bind(this)),a()(window).on(Se.EVENT.CLOSE_APP,this.on_CLOSE_APP.bind(this))}}]),e}(),Se=function(){function e(t,n){Oe(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return _e(e,null,[{key:"EVENT",get:function(){return{OPEN_APP:"CDashboardOverlay.EVENT.OPEN_APP",CLOSE_APP:"CDashboardOverlay.EVENT.CLOSE_APP"}}}]),_e(e,[{key:"render",value:function(e,t){new Ne(e,t)}}]),e}(),Ae=Se;function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ve(e,t,n){return t&&xe(e.prototype,t),n&&xe(e,n),e}var Le=function(){function e(t,n){Ie(this,e),this.render(t,n)}return Ve(e,[{key:"on_CLICK",value:function(e){if(window.clickable){a()(e.currentTarget);a()(window).trigger(ot.EVENT.OPEN,[this.data.name,this.refs.icon])}}},{key:"on_APP_INIT",value:function(e,t){t==this.data.name&&this.refs.notification.length&&this.refs.notification.css("display","none")}},{key:"on_APP_DISPOSE",value:function(e,t){t==this.data.name&&this.refs.notification.css("display","block")}},{key:"on_APP_START",value:function(e,t){t==this.data.name&&this.on_CLICK({currentTarget:this.element})}},{key:"render",value:function(e,t){this.element=a()(e),a()(this.element).on("click",this.on_CLICK.bind(this)),this.data={name:this.element.data("app-link-id"),isStatic:this.element.data("app-link-static"),location:this.element.data("app-link-location")},this.refs={notification:this.element.find('*[data-ref="app-link-notification"]'),icon:this.element.find('*[data-ref="app-link-icon"]')},"dashboard"==this.data.location&&(a()(window).on(De.EVENT.START,this.on_APP_START.bind(this)),this.element.data("debug")&&this.on_CLICK({currentTarget:this.element})),a()(window).on(ot.EVENT.INIT,this.on_APP_INIT.bind(this)),a()(window).on(ot.EVENT.DISPOSE,this.on_APP_DISPOSE.bind(this))}}]),e}(),De=function(){function e(t,n){Ie(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ve(e,null,[{key:"EVENT",get:function(){return{START:"CAppLink.EVENT.START"}}}]),Ve(e,[{key:"render",value:function(e,t){new Le(e,t)}}]),e}(),Re=De;function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ue(e,t,n){return t&&Be(e.prototype,t),n&&Be(e,n),e}var He=function(){function e(t,n){Me(this,e),this.render(t,n)}return Ue(e,[{key:"open",value:function(e,t,n,i,a,s){this.onTransition||(this.onTransition=!0,this.refs.title.html(t),this.refs.text.html(n),this.refs.buttonText.html(i),s?this.refs.shareContainer.css("display","block"):this.refs.shareContainer.css("display","none"),a?(o.a.set(this.refs.image,{display:"block"}),this.refs.imageSource.attr("src",a)):o.a.set(this.refs.image,{display:"none"}),o.a.killTweensOf([this.refs.background,this.refs.content]),this.element.css("display","block"),o.a.fromTo(this.refs.background,{opacity:1},{opacity:1,duration:.6,ease:"power3.out"}),o.a.fromTo(this.refs.content,{opacity:0,y:30},{opacity:1,y:0,duration:.6,ease:"power3.out",onComplete:this.on_OPEN.bind(this)}))}},{key:"on_OPEN",value:function(){this.onTransition=!1}},{key:"close",value:function(){this.onTransition||(this.onTransition=!0,o.a.killTweensOf([this.refs.background,this.refs.content]),o.a.to(this.refs.content,{y:30,opacity:0,duration:.4,ease:"power3.inOut"}),o.a.to(this.refs.background,{opacity:0,duration:.3,ease:"power3.out",delay:.3,onComplete:this.on_CLOSE.bind(this)}))}},{key:"on_CLOSE",value:function(){this.element.css("display","none"),this.onTransition=!1}},{key:"button_CLICK",value:function(){this.close()}},{key:"share_CLICK",value:function(){se.share()}},{key:"render",value:function(e,t){this.element=a()(e),this.onTransition=!1,this.refs={background:this.element.find('*[data-ref="app-alert-background"]'),content:this.element.find('*[data-ref="app-alert-content"]'),title:this.element.find('*[data-ref="app-alert-title"]'),text:this.element.find('*[data-ref="app-alert-text"]'),image:this.element.find('*[data-ref="app-alert-image"]'),imageSource:this.element.find('*[data-ref="app-alert-image-source"]'),button:this.element.find('*[data-ref="app-alert-button"]'),shareContainer:this.element.find('*[data-ref="app-alert-share-container"]'),share:this.element.find('*[data-ref="app-alert-share"]'),buttonText:this.element.find('*[data-ref="app-alert-button-text"]')},this.refs.button.on("click",this.button_CLICK.bind(this)),this.refs.share.on("click",this.share_CLICK.bind(this)),a()(window).on(Ke.EVENT.OPEN,this.open.bind(this))}}]),e}(),Ke=function(){function e(t,n){Me(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ue(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppAlert.EVENT.OPEN"}}}]),Ue(e,[{key:"render",value:function(e,t){new He(e,t)}}]),e}(),qe=Ke;function Fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ye(e,t,n){return t&&je(e.prototype,t),n&&je(e,n),e}var We=function(){function e(t,n){Fe(this,e),this.render(t,n)}return Ye(e,[{key:"on_CLICK",value:function(e){var t=a()(e.currentTarget),n=!0,i=[this.data.title,this.data.text,this.data.cta,this.data.image,this.data.share],o=t.find('*[data-ref="camera-settings-button-icon"]');o.length&&1==(o=o.eq(0)).css("opacity")&&(n=!1),n&&(this.data.trackTitle&&this.data.trackPath&&y.instance.trackPage(this.data.trackTitle,"".concat(this.data.trackPath).concat(this.data.trackAction)),a()(window).trigger(qe.EVENT.OPEN,i))}},{key:"render",value:function(e,t){if(this.element=a()(e),this.data={title:this.element.data("app-alert-button-title"),text:this.element.data("app-alert-button-text"),cta:this.element.data("app-alert-button-cta"),image:this.element.data("app-alert-button-image"),share:this.element.data("app-alert-share"),trackTitle:this.element.data("track-title"),trackPath:this.element.data("track-path"),trackAction:""},this.data.trackTitle&&this.data.trackPath){var n=this.element.data("track-action");n&&(this.data.trackAction=k.slugfy(n))}this.element.data("camera-settings-button-id")&&(this.data.trackTitle="Camera",this.data.trackPath="/app/camera/settings/",this.data.trackAction=this.element.data("camera-settings-button-id")),this.element.on("click",this.on_CLICK.bind(this))}}]),e}(),Ge=function(){function e(t,n){Fe(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ye(e,null,[{key:"EVENT",get:function(){return{}}}]),Ye(e,[{key:"render",value:function(e,t){new We(e,t)}}]),e}();function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Je(e,t,n){return t&&ze(e.prototype,t),n&&ze(e,n),e}var Ze=function(){function e(t,n){Xe(this,e),this.render(t,n)}return Je(e,[{key:"form_SUBMIT",value:function(e){e.preventDefault()}},{key:"field_CHANGE",value:function(e){this.filterApps(),13===e.which&&this.refs.field.blur()}},{key:"field_FOCUS",value:function(e){this.isOnSearch=!0,this.filterApps(),this.refs.list.css("display","none"),this.refs.filter.css("display","block"),this.refs.buttonClose.css("display","block"),this.refs.buttonOptions.css("display","none")}},{key:"field_BLUR",value:function(e){this.refs.field.val().toLowerCase()}},{key:"getFilterText",value:function(e){var t=a()(e).find('*[data-component="app-link"]');return 0==t.length&&(t=a()(e).find('*[data-component="app-alert-button"]')),t.text().replace(/([\r\n]+ +)+/gm,"").toLowerCase()}},{key:"filterApps",value:function(){var e=this,t=k.preventInjection(this.refs.field.val().toLowerCase()),n=this.refs.filterItems.toArray();""!=t&&(n=n.filter((function(n){return e.getFilterText(n).substr(0,t.length)==t})));var i=n.sort((function(t,n){return e.getFilterText(t).localeCompare(e.getFilterText(n))}));if(i.length<4)for(var a=4-i.length,o=0;o<a;o++)i.push(this.template.filterItem.clone());i=i.slice(0,4),this.refs.filterContainer.html(i),new Re('*[data-component="app-link"]',this.refs.filterContainer.get(0)),new Ge('*[data-component="app-alert-button"]',this.refs.filterContainer.get(0))}},{key:"dashboard_BACK",value:function(e){this.isOnSearch&&""==window.app?(this.isOnSearch=!1,this.refs.field.val(""),this.refs.filter.css("display","none"),this.refs.list.css("display","block"),this.refs.buttonClose.css("display","none"),this.refs.buttonOptions.css("display","block"),this.refs.field.blur()):this.dashboard_HOME()}},{key:"dashboard_HOME",value:function(e){window.dashboardSearchOpen&&(this.isOnSearch||""!=window.app||a()(window).trigger(Qe.EVENT.CLOSE))}},{key:"buttonClose_CLICK",value:function(){this.dashboard_BACK()}},{key:"on_OPEN_APP",value:function(e,t){o.a.fromTo(this.refs.content,{scale:1,opacity:1},{scale:.95,opacity:.5,duration:.4,transformOrigin:"50% 100%",delay:t})}},{key:"on_CLOSE_APP",value:function(e,t){o.a.fromTo(this.refs.content,{scale:.95,opacity:.5},{scale:1,opacity:1,duration:.4,transformOrigin:"50% 100%",delay:t})}},{key:"render",value:function(e,t){this.element=a()(e),this.isOnSearch=!1,this.template={filterItem:this.element.find('*[data-ref="dashboard-search-filter-item-template"]')},this.refs={content:this.element.find('*[data-ref="dashboard-search-content"]'),form:this.element.find('*[data-ref="dashboard-search-form"]'),field:this.element.find('*[data-ref="dashboard-search-form-field"]'),list:this.element.find('*[data-ref="dashboard-search-list"]'),filter:this.element.find('*[data-ref="dashboard-search-filter"]'),filterContainer:this.element.find('*[data-ref="dashboard-search-filter-container"]'),filterItems:this.element.find('*[data-ref="dashboard-search-filter-item"]'),buttonOptions:this.element.find('*[data-ref="dashboard-search-button-options"]'),buttonClose:this.element.find('*[data-ref="dashboard-search-button-close"]')},this.refs.filterContainer.html(""),a()(this.refs.form).on("submit",this.form_SUBMIT.bind(this)),a()(this.refs.field).on("keypress",this.field_CHANGE.bind(this)),a()(this.refs.field).on("focus",this.field_FOCUS.bind(this)),a()(this.refs.field).on("blur",this.field_BLUR.bind(this)),a()(this.refs.buttonClose).on("touchstart",this.buttonClose_CLICK.bind(this)),a()(window).on(be.EVENT.BACK,this.dashboard_BACK.bind(this)),a()(window).on(be.EVENT.HOME,this.dashboard_HOME.bind(this)),a()(window).on(Qe.EVENT.OPEN_APP,this.on_OPEN_APP.bind(this)),a()(window).on(Qe.EVENT.CLOSE_APP,this.on_CLOSE_APP.bind(this))}}]),e}(),Qe=function(){function e(t,n){Xe(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Je(e,null,[{key:"EVENT",get:function(){return{OPEN:"CDashboardSearch.EVENT.OPEN",CLOSE:"CDashboardSearch.EVENT.CLOSE",OPEN_APP:"CDashboardSearch.EVENT.OPEN_APP",CLOSE_APP:"CDashboardSearch.EVENT.CLOSE_APP"}}}]),Je(e,[{key:"render",value:function(e,t){new Ze(e,t)}}]),e}(),$e=Qe;function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function nt(e,t,n){return t&&tt(e.prototype,t),n&&tt(e,n),e}var it=function(){function e(t,n){et(this,e),this.render(t,n)}return nt(e,[{key:"open",value:function(e){if(!this.state.isOpened){window.app=this.data.name,y.instance.trackPage(this.data.pageTitle,this.data.pagePath),a()(window).trigger(at.EVENT.INIT,[this.data.name]),this.refs.dashboardIcon=e,this.state.isOpened=!0,this.element.css("display","block"),a()(window).trigger(Ce.EVENT.OPEN_APP,[0]),a()(window).trigger(X.EVENT.OPEN_APP,[0]),a()(window).trigger(Ae.EVENT.OPEN_APP,[0]),a()(window).trigger($e.EVENT.OPEN_APP,[0]),a()(window).trigger(ee.EVENT.OPEN_APP,[.25,this.data.isHeaderTransparent]),a()(window).trigger(be.EVENT.OPEN_APP,[.25]),this.refs.dashboardRed=this.refs.dashboardIcon.get(0).getBoundingClientRect();var t=this.refs.dashboardRed,n="0% 100%",i=0;this.data.isStatic?(o.a.fromTo(this.refs.content,{opacity:0},{opacity:1,duration:i+.1+.2,delay:0,ease:"power3.out"}),o.a.fromTo(this.refs.content,{scale:.8,transformOrigin:"center center"},{scale:1,x:0,y:0,duration:i+.1+.4,ease:"power3.out",delay:0})):(o.a.fromTo(this.refs.content,{opacity:0},{opacity:1,duration:i+.1+.2,delay:0,ease:"power3.out"}),o.a.fromTo(this.refs.icon,{opacity:1},{opacity:0,duration:i+.1+.1,delay:0,ease:"power3.out"}),o.a.fromTo(this.refs.icon,{scale:1,transformOrigin:n,x:0,y:0},{scale:6.4,x:0,y:t.y,transformOrigin:n,duration:i+.1+.4,ease:"power3.out",delay:0}),o.a.fromTo(this.refs.container,{x:t.x,y:t.y,transformOrigin:"0% 0%"},{x:0,y:0,duration:i+.1+.4,ease:"power3.out",delay:0}),o.a.fromTo(this.refs.content,{x:5,y:5,scaleX:.17,scaleY:.07,transformOrigin:"0px 0px"},{scaleX:1,scaleY:1,x:0,y:0,duration:i+.1+.4,ease:"power3.out",delay:0})),o.a.to(this,{duration:.6,onComplete:this.view_OPEN.bind(this)})}}},{key:"view_OPEN",value:function(){if(this.refs.video.length){var e=this.refs.video.get(0);e.currentTime=0,e.play()}if(this.data.isInitialAlertAvailable&&!this.state.isMessageDispatched){this.state.isMessageDispatched=!0;var t=[this.data.message.title,this.data.message.text,this.data.message.cta];a()(window).trigger(qe.EVENT.OPEN,t)}}},{key:"close",value:function(e){if(e?this.state.isOpened&&window.app==this.data.name:this.state.isOpened&&window.app==this.data.name&&!at.isInApp()){if(this.state.isOpened=!1,this.refs.video.length)this.refs.video.get(0).pause();var t=this.refs.dashboardRed;this.data.isStatic?(o.a.to(this.refs.content,{scale:.8,transformOrigin:"center center",duration:.4,ease:"power3.out",delay:0}),o.a.to(this.refs.content,{opacity:0,duration:.15,delay:0,ease:"none"})):(o.a.to(this.refs.container,{x:t.x,y:t.y,transformOrigin:"0% 0%",duration:.4,ease:"power3.out",delay:0}),o.a.to(this.refs.content,{scaleX:0,scaleY:0,x:35,y:35,transformOrigin:"0px 0px",duration:.4,ease:"power3.out",delay:0}),o.a.to(this.refs.icon,{opacity:1,duration:.1,delay:.1,ease:"power3.out"}),o.a.to(this.refs.icon,{scale:1,transformOrigin:"0% 100%",x:0,y:0,duration:.4,ease:"power3.out",delay:0}),o.a.to(this.refs.content,{opacity:0,duration:.175,delay:0,ease:"none"})),o.a.to(this,{duration:.45,onComplete:this.view_CLOSE.bind(this)}),a()(window).trigger(Ce.EVENT.CLOSE_APP,[0]),a()(window).trigger(X.EVENT.CLOSE_APP,[0]),a()(window).trigger(Ae.EVENT.CLOSE_APP,[0]),a()(window).trigger(ee.EVENT.CLOSE_APP,[0]),a()(window).trigger(be.EVENT.CLOSE_APP,[0]),a()(window).trigger($e.EVENT.CLOSE_APP,[0])}}},{key:"view_CLOSE",value:function(){this.refs.video.length&&(this.refs.video.get(0).currentTime=0);a()(window).trigger(at.EVENT.DISPOSE,[this.data.name]),this.element.css("display","none"),window.app="",window.is_search?y.instance.trackPage("Dashboard - Search","/app/dashboard/search"):y.instance.trackPage("Dashboard","/app/dashboard")}},{key:"on_OPEN",value:function(e,t,n,i){t==this.data.name?n&&this.open(n,i):this.state.isOpened&&this.close()}},{key:"on_CLOSE",value:function(e,t){this.close(t)}},{key:"render",value:function(e,t){this.element=a()(e),this.state={isOpened:!1,isMessageDispatched:!1},this.data={pageTitle:this.element.data("track-title"),pagePath:this.element.data("track-path"),name:this.element.data("app-view-name"),isStatic:this.element.data("app-view-is-static"),isHeaderTransparent:this.element.data("app-view-is-header-transparent"),isInitialAlertAvailable:this.element.data("app-view-alert-button"),message:{title:this.element.data("app-view-alert-button-title"),text:this.element.data("app-view-alert-button-text"),cta:this.element.data("app-view-alert-button-cta")}},this.refs={appContent:this.element.find('*[data-ref="app-content"]'),container:this.element.find('*[data-ref="app-view-container"]'),content:this.element.find('*[data-ref="app-view-content"]'),icon:this.element.find('*[data-ref="app-view-icon"]'),video:this.element.find('*[data-ref="app-view-video"]'),buttonClose:this.element.find('*[data-ref="app-view-close"]'),dashboardIcon:null,dashboardRed:null},this.refs.appContent.data("app-name",this.data.name),this.data.isStatic&&o.a.set(this.refs.icon,{display:"none"}),a()(window).on(at.EVENT.OPEN,this.on_OPEN.bind(this)),a()(window).on(at.EVENT.CLOSE,this.on_CLOSE.bind(this)),this.element.css("display","none"),window.app="",a()(this.refs.buttonClose).on("click",this.close.bind(this))}}]),e}(),at=function(){function e(t,n){et(this,e),window.in_app={},this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return nt(e,null,[{key:"addInApp",value:function(e){window.in_app[e]=!0}},{key:"removeInApp",value:function(e){var t={};for(var n in window.in_app)n!=e&&(t[n]=!0);window.in_app=t}},{key:"getInApp",value:function(e){return window.in_app[e]}},{key:"isInApp",value:function(){var e=!1;for(var t in window.in_app)e=!0;return e}},{key:"EVENT",get:function(){return{OPEN:"CAppView.EVENT.OPEN",CLOSE:"CAppView.EVENT.CLOSE",INIT:"CAppView.EVENT.INIT",DISPOSE:"CAppView.EVENT.DISPOSE",PREVENT_CLOSE:"CAppView.EVENT.PREVENT_CLOSE"}}}]),nt(e,[{key:"render",value:function(e,t){new it(e,t)}}]),e}(),ot=at;function st(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lt(e,t,n){return t&&rt(e.prototype,t),n&&rt(e,n),e}var ht=function(){function e(t,n){st(this,e),this.render(t,n)}return lt(e,[{key:"init",value:function(){}},{key:"isExtraContentScreen",value:function(){return!(!this.useExtraContent||this.position!=ct.POSITION.DOWN)}},{key:"resetLinks",value:function(){this.refs.links.length&&o.a.set(this.refs.links,{pointerEvents:"auto"})}},{key:"on_TOUCH_END",value:function(e){var t=.5;if(this.direction==ct.DIRECTION.X){if(e)if(this.moveCounter<15)this.currentTouchPosition.x<-1*this.threshold?this.currentPage++:this.currentTouchPosition.x>this.threshold&&this.currentPage--;else{var n=this.refs.list.get(0).getBoundingClientRect();this.currentPage=Math.round(-1*n.x/window.innerWidth)}else t=.6;this.currentPage=this.useExtraContent?this.currentPage<-1?-1:this.currentPage:this.currentPage<0?0:this.currentPage,this.currentPage=this.currentPage>this.refs.listItems.length-1?this.refs.listItems.length-1:this.currentPage;var i=-this.currentPage*window.innerWidth,s=i;if(s=s<0?0:s,o.a.killTweensOf([this.refs.list,this.refs.pagination,this.refs.listItems]),o.a.to(this.refs.list,{x:i,duration:t,ease:"power3.out"}),o.a.to(this.refs.pagination,{x:s,duration:t,ease:"power3.out"}),o.a.to(this.refs.listItems,{scale:1,opacity:1,duration:t,transformOrigin:"50% 50%",ease:"power3.out"}),this.useExtraContent){var r=i/window.innerWidth;r=(r=r>1?1:r)<0?0:r,o.a.killTweensOf([this.refs.extraOverlay,this.refs.extraContent,this.refs.extraFooter]),o.a.to(this.refs.extraOverlay,{opacity:.9*r,duration:t,ease:"power3.out"}),o.a.to(this.refs.extraContent,{x:i-window.innerWidth,duration:t,ease:"power3.out"}),o.a.to(this.refs.extraFooter,{x:s,duration:t,ease:"power3.out",onComplete:this.transition_COMPLETE.bind(this)}),-1==this.currentPage?a()(window).trigger(be.EVENT.OPEN_NEWS_APP):a()(window).trigger(be.EVENT.CLOSE_NEWS_APP),y.instance.trackPage("Dashboard","/app/dashboard/".concat(this.currentPage))}var l=this.currentPage;this.refs.paginationItems.toArray().map((function(e,t){return o.a.to(e,{duration:.3,ease:"power3.inOut",opacity:l==t?1:0})}))}else{if(!this.isExtraContentScreen()){var h=1*this.currentTouchPosition.y/200;this.position==ct.POSITION.UP?h*=-1:h=h,h=(h=h>1?1:h)<0?0:h,window.dashboardSearchOpen?h>.25?(window.dashboardSearchOpen=!1,o.a.to(this.percentY,{value:0,duration:t,ease:"power3.out",onUpdate:this.updateSearchFade.bind(this)})):(window.dashboardSearchOpen=!0,o.a.to(this.percentY,{value:1,duration:t,ease:"power3.out",onUpdate:this.updateSearchFade.bind(this)})):h>.25?(window.dashboardSearchOpen=!0,o.a.to(this.percentY,{value:1,duration:t,ease:"power3.out",onUpdate:this.updateSearchFade.bind(this)})):(window.dashboardSearchOpen=!1,o.a.to(this.percentY,{value:0,duration:t,ease:"power3.out",onUpdate:this.updateSearchFade.bind(this)})),window.dashboardSearchOpen?this.refs.searchContent.css("pointer-events","auto"):this.refs.searchContent.css("pointer-events","none"),window.dashboardSearchOpen?(a()(window).trigger(be.EVENT.OPEN_DASHBOARD_SEARCH),window.is_search=!0,y.instance.trackPage("Dashboard - Search","/app/dashboard/search")):(window.is_search=!1,y.instance.trackPage("Dashboard","/app/dashboard"),a()(window).trigger(be.EVENT.CLOSE_DASHBOARD_SEARCH))}}a()(document).off("touchend"),a()(document).off("touchmove"),a()(document).off("mouseup"),a()(document).off("mousemove"),clearTimeout(this.enableLinksTimer),this.enableLinksTimer=setTimeout(this.resetLinks.bind(this),1e3)}},{key:"on_TOUCH_MOVE",value:function(e){var t;if(this.moveCounter++,t="touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"touchcancel"==e.type?e.touches[0]||e.changedTouches[0]:{pageX:e.clientX,pageY:e.clientY},this.currentTouchPosition={x:t.pageX-this.initialTouchPosition.x,y:t.pageY-this.initialTouchPosition.y},this.moveCounter>2)if(clearTimeout(this.enableLinksTimer),this.refs.links.length&&o.a.set(this.refs.links,{pointerEvents:"none"}),""==this.direction&&(Math.abs(this.currentTouchPosition.y)>Math.abs(this.currentTouchPosition.x)&&-1!=this.currentPage?(this.direction=ct.DIRECTION.Y,this.currentTouchPosition.y>=0?this.position=ct.POSITION.DOWN:this.position=ct.POSITION.UP):this.direction=ct.DIRECTION.X),this.isDefaultSlider||Math.abs(this.currentTouchPosition.y)>Math.abs(this.currentTouchPosition.x)&&(this.direction=ct.DIRECTION.X),this.direction==ct.DIRECTION.X){var n=-this.currentPage*window.innerWidth+this.currentTouchPosition.x,i=n=n>window.innerWidth?window.innerWidth:n;if(i=i<0?0:i,this.useExtraContent){var a=n/window.innerWidth;a=(a=a>1?1:a)<0?0:a,o.a.to(this.refs.extraOverlay,{duration:.1,opacity:a}),o.a.to(this.refs.extraContent,{duration:.1,x:n-window.innerWidth}),o.a.to(this.refs.extraFooter,{duration:.1,x:i})}var s=0;this.currentPage>=this.refs.listItems.length-1?(s=(s=(s=-1*this.currentTouchPosition.x/5e3)>1?1:s)<0?0:s)>0&&(n=-this.currentPage*window.innerWidth):this.currentPage<=0&&!this.useExtraContent&&(s=(s=(s=1*this.currentTouchPosition.x/5e3)>1?1:s)<0?0:s)>0&&(n=-this.currentPage*window.innerWidth),o.a.to(this.refs.listItems,{scale:1-s,opacity:1-5*s,duration:.1,transformOrigin:"50% 50%",ease:"none"}),this.useExtraContent&&o.a.to(this.refs.pagination,{duration:.1,x:i}),o.a.to(this.refs.list,{duration:.1,x:n})}else{if(this.isExtraContentScreen())window.dashboard_notification.start(e);else{var r=1*this.currentTouchPosition.y/200;this.position==ct.POSITION.UP?r*=-1:r=r,r=(r=r>1?1:r)<0?0:r,window.dashboardSearchOpen?this.percentY.value=1-r:this.percentY.value=r,this.updateSearchFade()}}}},{key:"on_TOUCH_START",value:function(e){var t;this.moveCounter=0,this.direction="",this.position="",this.isOpen=window.dashboardSearchOpen,o.a.killTweensOf(this.refs.list),t="touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"touchcancel"==e.type?e.touches[0]||e.changedTouches[0]:{pageX:e.clientX,pageY:e.clientY},this.initialTouchPosition={x:t.pageX,y:t.pageY},this.currentTouchPosition={x:t.pageX-this.initialTouchPosition.x,y:t.pageY-this.initialTouchPosition.y},d.instance.isTouch()?(a()(document).on("touchend",this.on_TOUCH_END.bind(this)),a()(document).on("touchmove",this.on_TOUCH_MOVE.bind(this))):(a()(document).on("mouseup",this.on_TOUCH_END.bind(this)),a()(document).on("mousemove",this.on_TOUCH_MOVE.bind(this)))}},{key:"transition_COMPLETE",value:function(){-1==this.currentPage?a()(window).trigger(be.EVENT.UPDATE_THEME_WHITE):a()(window).trigger(be.EVENT.UPDATE_THEME_BLACK)}},{key:"openSearch",value:function(){var e=1;e=(e=e>1?1:e)<0?0:e,window.dashboardSearchOpen?e>.25?(window.dashboardSearchOpen=!1,o.a.to(this.percentY,{value:0,duration:.6,ease:"power3.out",onUpdate:this.updateSearchFade.bind(this)})):(window.dashboardSearchOpen=!0,o.a.to(this.percentY,{value:1,duration:.6,ease:"power3.out",onUpdate:this.updateSearchFade.bind(this)})):e>.25?(window.dashboardSearchOpen=!0,o.a.to(this.percentY,{value:1,duration:.6,ease:"power3.out",onUpdate:this.updateSearchFade.bind(this)})):(window.dashboardSearchOpen=!1,o.a.to(this.percentY,{value:0,duration:.6,ease:"power3.out",onUpdate:this.updateSearchFade.bind(this)})),window.dashboardSearchOpen?this.refs.searchContent.css("pointer-events","auto"):this.refs.searchContent.css("pointer-events","none"),window.dashboardSearchOpen?(a()(window).trigger(be.EVENT.OPEN_DASHBOARD_SEARCH),window.is_search=!0,y.instance.trackPage("Dashboard - Search","/app/dashboard/search")):(window.is_search=!1,y.instance.trackPage("Dashboard","/app/dashboard"),a()(window).trigger(be.EVENT.CLOSE_DASHBOARD_SEARCH))}},{key:"moveToFirstScreen",value:function(){ot.getInApp("voucher-details")||-1==this.currentPage&&(this.currentPage=0,this.on_TOUCH_END())}},{key:"footer_BACK",value:function(){this.moveToFirstScreen()}},{key:"footer_HOME",value:function(){this.moveToFirstScreen()}},{key:"updateBackgroundBlur",value:function(){this.blur.value}},{key:"updateSearchFade",value:function(){var e=this.percentY.value,t=60*e;t=this.position==ct.POSITION.UP?60-t:-60+t;var n=100*e;n=this.position==ct.POSITION.UP?-n:n,this.isOpen&&(t*=-1,n*=-1);var i=1-.2*e,a=1.5*e-.5;a=a<0?0:a;var s=1-2*e;s=s<0?0:s;var r=20*e;o.a.set(this.refs.searchContainer,{opacity:a,y:t,transformOrigin:"50% 50%"}),o.a.set(this.refs.dashboardContent,{opacity:s,scale:i,y:n}),o.a.set([this.refs.searchHeader,this.refs.searchPagination,this.refs.searchBackgroundBlack],{opacity:e}),o.a.set(this.blur,{value:r,onUpdate:this.updateBackgroundBlur.bind(this)})}},{key:"dashboardSearch_CLOSE",value:function(e){this.useExtraContent&&(this.isOpen=!0,window.dashboardSearchOpen=!1,o.a.to(this.percentY,{value:0,duration:.6,ease:"power3.out",onUpdate:this.updateSearchFade.bind(this)}),this.refs.searchContent.css("pointer-events","none"),a()(window).trigger(be.EVENT.CLOSE_DASHBOARD_SEARCH))}},{key:"reset",value:function(){this.currentPage=0,this.direction=ct.DIRECTION.X,this.on_TOUCH_END()}},{key:"render",value:function(e,t){if(this.element=a()(e),this.useExtraContent=!1,this.direction="",this.position="",window.dashboardSearchOpen=!1,this.isOpen=window.dashboardSearchOpen,this.enableLinksTimer=null,this.initialTouchPosition={x:0,y:0},this.currentTouchPosition={x:0,y:0},this.currentPage=0,this.threshold=10,this.moveCounter=0,this.blur={value:20},this.percentY={value:0},this.refs={list:this.element.find('*[data-ref="slider-list"]'),listItems:this.element.find('*[data-ref="slider-list-item"]'),pagination:this.element.find('*[data-ref="slider-pagination"]'),paginationItems:this.element.find('*[data-ref="slider-pagination-item"]'),extraContent:a()(this.element.data("slider-extra-page")),extraHit:a()(this.element.data("slider-extra-hit")),extraOverlay:a()(this.element.data("slider-extra-overlay")),extraFooter:a()(this.element.data("slider-extra-footer")),searchHeader:a()('*[data-ref="dashboard-search-header"]'),searchContainer:a()('*[data-ref="dashboard-search-container"]'),searchPagination:a()('*[data-ref="dashboard-search-pagination"]'),searchBackgroundBlack:a()('*[data-ref="dashboard-search-background-black"]'),searchBackgroundBlur:a()('*[data-ref="dashboard-search-background-blur"]'),searchContent:a()('*[data-ref="dashboard-search-content"]'),dashboardContent:a()('*[data-ref="dashboard-content-container"]'),links:this.element.find("a")},this.refs.extraContent.length&&(this.useExtraContent=!0),this.isDefaultSlider="default"==this.element.data("slider-type"),!window.dashboardSearchOpen){o.a.set(this.refs.searchContainer,{opacity:0,scale:1,y:0,transformOrigin:"50% 50%"}),o.a.set([this.refs.searchHeader,this.refs.searchPagination,this.refs.searchBackgroundBlack],{opacity:0})}o.a.set(this.refs.list,{width:100*this.refs.listItems.length+"vw"}),o.a.set(this.refs.paginationItems,{opacity:0}),o.a.set(this.refs.paginationItems.eq(0),{opacity:1}),this.init(),this.useExtraContent&&(d.instance.isTouch()?this.refs.extraHit.on("touchstart",this.on_TOUCH_START.bind(this)):this.refs.extraHit.on("mousedown",this.on_TOUCH_START.bind(this)),a()(window).on(ct.EVENT.OPEN_SEARCH,this.openSearch.bind(this))),d.instance.isTouch()?this.element.on("touchstart",this.on_TOUCH_START.bind(this)):this.element.on("mousedown",this.on_TOUCH_START.bind(this)),a()(window).on(be.EVENT.BACK,this.footer_BACK.bind(this)),a()(window).on(be.EVENT.HOME,this.footer_HOME.bind(this)),a()(window).on($e.EVENT.CLOSE,this.dashboardSearch_CLOSE.bind(this)),a()(window).on(ct.EVENT.RESET,this.reset.bind(this))}}]),e}(),ct=function(){function e(t,n){st(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return lt(e,null,[{key:"DIRECTION",get:function(){return{Y:"CSlider.DIRECTION.Y",X:"CSlider.DIRECTION.X"}}},{key:"POSITION",get:function(){return{UP:"CSlider.POSITION.UP",DOWN:"CSlider.POSITION.DOWN"}}},{key:"EVENT",get:function(){return{START:"CSlider.EVENT.START",RESET:"CSlider.EVENT.RESET",OPEN_SEARCH:"CSlider.EVENT.OPEN_SEARCH"}}}]),lt(e,[{key:"render",value:function(e,t){new ht(e,t)}}]),e}(),ut=ct;function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pt(e,t,n){return t&&ft(e.prototype,t),n&&ft(e,n),e}var mt=function(){function e(t,n){dt(this,e),this.render(t,n)}return pt(e,[{key:"on_SCROLL",value:function(){var e=this.element.get(0).getBoundingClientRect(),t=this.refs.headline.get(0).getBoundingClientRect(),n=this.refs.title.get(0).getBoundingClientRect(),i=(t.y-e.y)/(120-e.y);i=(i=i<0?0:i)>1?1:i;var a=(n.y-e.y)/(250-e.y);a=(a=a<0?0:a)>1?1:a,o.a.set(this.refs.headline,{opacity:i}),this.refs.cover.length&&o.a.set(this.refs.cover,{opacity:i}),o.a.set(this.refs.title,{opacity:Math.abs(a-1)})}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={content:this.element.find('*[data-ref="app-content"]'),headline:this.element.find('*[data-ref="app-header-headline"]'),title:this.element.find('*[data-ref="app-header-title"]'),cover:this.element.find('*[data-ref="app-header-cover"]')},a()(this.refs.content).on("scroll",this.on_SCROLL.bind(this))}}]),e}(),yt=function(){function e(t,n){dt(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return pt(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppHeader.EVENT.OPEN",CLOSE:"CAppHeader.EVENT.CLOSE"}}}]),pt(e,[{key:"render",value:function(e,t){new mt(e,t)}}]),e}();function gt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var bt=function(){function e(t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.render(t,n),this}var t,n,i;return t=e,(n=[{key:"reset",value:function(){this.isPinchEnable=!1,this.initialDistance=0,this.initialImageScale=100,this.scrollLeft=.5,this.currentImageScale=this.initialImageScale}},{key:"getTouchDistance",value:function(e){var t=e[0].clientX,n=e[0].clientY,i=t-e[1].clientX,a=n-e[1].clientY;return Math.sqrt(i*i+a*a)}},{key:"setImageScale",value:function(){o.a.set(this.refs.imageContainer,{width:"".concat(this.currentImageScale,"%")});var e=this.scrollLeft*(this.refs.imageContainer.width()-window.innerWidth);this.currentImageScale<=100&&(this.scrollLeft=.5),this.refs.viewportContainer.scrollLeft(e)}},{key:"image_SCROLL",value:function(e){if(this.isPinchEnable)e.preventDefault();else{var t=this.refs.viewportContainer.scrollLeft()/(this.refs.imageContainer.width()-window.innerWidth);this.scrollLeft=t}}},{key:"image_TOUCH_MOVE",value:function(e){if(e.touches.length>=2&&this.isPinchEnable){var t=this.getTouchDistance(e.touches)-this.initialDistance;this.currentImageScale=this.initialImageScale+t,this.currentImageScale=Math.max(this.currentImageScale,100),this.currentImageScale=Math.min(this.currentImageScale,400),this.setImageScale()}}},{key:"image_TOUCH_START",value:function(e){e.touches.length>=2&&(this.initialDistance=this.getTouchDistance(e.touches),this.isPinchEnable=!0)}},{key:"image_TOUCH_END",value:function(e){e.touches.length<2&&(this.initialImageScale=this.currentImageScale,this.isPinchEnable=!1),this.refs.viewportContainer.focus()}},{key:"image_TOUCH_CLICK",value:function(e){o.a.killTweensOf(this),this.currentImageScale<=100?o.a.to(this,{currentImageScale:250,duration:.3,ease:"power3.out",onUpdate:this.setImageScale.bind(this),onComplete:this.imageScale_COMPLETE.bind(this)}):o.a.to(this,{currentImageScale:100,duration:.3,ease:"power3.out",onUpdate:this.setImageScale.bind(this),onComplete:this.imageScale_COMPLETE.bind(this)})}},{key:"imageScale_COMPLETE",value:function(){this.initialImageScale=this.currentImageScale}},{key:"render",value:function(e,t){this.element=e,this.refs={viewportContainer:this.element.find('*[data-ref="gallery-image-viewport"]'),imageContainer:this.element.find('*[data-ref="gallery-image-container"]')},this.reset(),a()(this.refs.imageContainer).on("touchstart",this.image_TOUCH_START.bind(this)),a()(this.refs.imageContainer).on("touchend",this.image_TOUCH_END.bind(this)),a()(this.refs.imageContainer).on("touchmove",this.image_TOUCH_MOVE.bind(this)),a()(this.refs.imageContainer).on("dblclick",this.image_TOUCH_CLICK.bind(this)),a()(this.refs.viewportContainer).on("scroll",this.image_SCROLL.bind(this))}}])&&gt(t.prototype,n),i&&gt(t,i),e}();function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Et(e,t,n){return t&&vt(e.prototype,t),n&&vt(e,n),e}var Tt=function(){function e(t,n){wt(this,e),this.render(t,n)}return Et(e,[{key:"open",value:function(e,t){ot.addInApp("messages-photo"),this.currentIndex=t.index,this.photosRect=t.position,this.imageElements=t.elements,this.reset(),this.setImageScale(),this.currentScrollViewportPosition=-window.innerWidth*this.currentIndex,o.a.set(this.refs.scrollViewport,{x:this.currentScrollViewportPosition}),o.a.set(this.element,{display:"block",pointerEvents:"auto"});var n=this.photosRect[this.currentIndex],i=n.x<window.innerWidth/2?"0% 0%":"100% 0%",a=this.refs.imageBlock.eq(this.currentIndex).find('*[data-ref="gallery-image-container"]'),s=this.refs.imageBlock.eq(this.currentIndex);o.a.set(a,{height:"auto"}),o.a.fromTo(s,{x:n.x,y:n.y,width:n.width,height:n.height,transformOrigin:i},{x:0,y:0,width:"100%",height:"100%",duration:.4,ease:"power3.out",delay:0}),o.a.set(this.refs.background,{opacity:1}),o.a.fromTo([this.refs.topBar,this.refs.bottomBar],{opacity:0},{opacity:1,duration:.3,delay:.3,ease:"power3.out"})}},{key:"onOpen",value:function(){}},{key:"close",value:function(){if(ot.getInApp("messages-photo")){ot.removeInApp("messages-photo");var e=a()('*[data-ref="app-chat-content"]'),t=this.imageElements.eq(this.currentIndex).attr("id");document.getElementById(t).getBoundingClientRect();o.a.set(e,{scrollTo:{y:"#".concat(t),offsetY:60}}),o.a.set(this.refs.background,{opacity:0}),o.a.to([this.refs.topBar,this.refs.bottomBar],{opacity:0,duration:.2,ease:"power1.out"});var n=this.imageElements.eq(this.currentIndex).find('*[data-ref="app-chat-item-image"]').get(0).getBoundingClientRect(),i=n.x<window.innerWidth/2?"0% 0%":"100% 0%",s=this.refs.imageBlock.eq(this.currentIndex).find('*[data-ref="gallery-image-container"]');o.a.set(s,{width:"100%"}),o.a.to(s,{height:n.height,duration:.2,ease:"power1.out",delay:0});var r=this.refs.imageBlock.eq(this.currentIndex);o.a.fromTo(r,{x:0,y:0,width:"100%",height:"100%",transformOrigin:i},{x:n.x,y:n.y,width:n.width,height:n.height,duration:.2,ease:"power1.out",delay:0,onComplete:this.onClose.bind(this)})}}},{key:"onClose",value:function(){o.a.set(this.element,{display:"none",pointerEvents:"none"});var e=this.refs.imageBlock.eq(this.currentIndex).find('*[data-ref="gallery-image-container"]'),t=this.refs.imageBlock.eq(this.currentIndex);o.a.set(e,{height:"auto"}),o.a.set(t,{x:0,y:0,width:"100%",height:"100%",duration:.4,ease:"power3.out",delay:0})}},{key:"setImageScale",value:function(){for(var e=0;e<this.photos.length;e++){this.photos[e].setImageScale()}}},{key:"reset",value:function(){for(var e=0;e<this.photos.length;e++){this.photos[e].reset()}}},{key:"scrollViewport_TOUCH_END",value:function(e){if(this.isMoving){this.isMoving=!1;var t=Math.round(-1*this.moveableScrollViewportPosition/window.innerWidth);t=(t=t<0?0:t)>this.refs.imageBlock.length-1?this.refs.imageBlock.length-1:t,this.currentScrollViewportPosition=-window.innerWidth*t,o.a.killTweensOf(this.refs.scrollViewport),o.a.to(this.refs.scrollViewport,{x:this.currentScrollViewportPosition,duration:.3,ease:"power1.out"}),this.currentIndex=t,o.a.killTweensOf([this.refs.arrowLeft,this.refs.arrowRight]),o.a.to(this.refs.arrowLeft,{x:"-25%",duration:.5,ease:"power1.out"}),o.a.to(this.refs.arrowRight,{x:"25%",duration:.5,ease:"power1.out"})}a()(document).off("touchend"),a()(document).off("touchmove")}},{key:"scrollViewport_TOUCH_MOVE",value:function(e){if(this.photos[this.currentIndex].isPinchEnable)this.currentScrollViewportPosition=-window.innerWidth*this.currentIndex,o.a.set(this.refs.scrollViewport,{x:this.currentScrollViewportPosition}),o.a.to(this.refs.arrowLeft,{x:"-25%",duration:.3,ease:"power1.out"}),o.a.to(this.refs.arrowRight,{x:"25%",duration:.3,ease:"power1.out"}),a()(document).off("touchend"),a()(document).off("touchmove");else{this.isMoving=!0;var t=e.touches[0]||e.changedTouches[0];this.currentTouchPosition={x:t.pageX-this.initialTouchPosition.x,y:t.pageY-this.initialTouchPosition.y};var n=-(this.refs.imageBlock.length*window.innerWidth-window.innerWidth);o.a.killTweensOf([this.refs.arrowLeft,this.refs.arrowRight]);var i=25*(this.currentScrollViewportPosition+this.currentTouchPosition.x)/100;i=i>25?25:i,o.a.set(this.refs.arrowLeft,{x:"".concat(-25+i,"%")});var s=25*(n-(this.currentScrollViewportPosition+this.currentTouchPosition.x))/100;s=s>25?25:s,o.a.to(this.refs.arrowRight,{x:"".concat(25-s,"%"),duration:.1}),this.moveableScrollViewportPosition=this.currentScrollViewportPosition+this.currentTouchPosition.x,this.moveableScrollViewportPosition=this.moveableScrollViewportPosition>0?0:this.moveableScrollViewportPosition,this.moveableScrollViewportPosition=this.moveableScrollViewportPosition<n?n:this.moveableScrollViewportPosition,o.a.to(this.refs.scrollViewport,{x:this.moveableScrollViewportPosition,duration:.1})}}},{key:"scrollViewport_TOUCH_START",value:function(e){var t=this.photos[this.currentIndex].currentImageScale;if(this.isMoving=!1,t<=100){var n=e.touches[0]||e.changedTouches[0];this.initialTouchPosition={x:n.pageX,y:n.pageY},this.currentTouchPosition={x:n.pageX-this.initialTouchPosition.x,y:n.pageY-this.initialTouchPosition.y},a()(document).on("touchend",this.scrollViewport_TOUCH_END.bind(this)),a()(document).on("touchmove",this.scrollViewport_TOUCH_MOVE.bind(this))}}},{key:"render",value:function(e,t){this.element=a()(e),this.photosRect=null,this.imageElements=null,this.currentScrollViewportPosition=0,this.moveableScrollViewportPosition=0,this.currentIndex=0,this.isMoving=!1,this.initialTouchPosition={x:0,y:0},this.currentTouchPosition={x:0,y:0},this.refs={background:this.element.find('*[data-ref="messages-image-background"]'),buttonBack:this.element.find('*[data-ref="messages-image-button-back"]'),topBar:this.element.find('*[data-ref="messages-image-top-bar"]'),bottomBar:this.element.find('*[data-ref="messages-image-bottom-bar"]'),scrollViewport:this.element.find('*[data-ref="messages-image-scroll"]'),imageBlock:this.element.find('*[data-ref="messages-image-block"]'),arrowLeft:this.element.find('*[data-ref="messages-image-arrow-left"]'),arrowRight:this.element.find('*[data-ref="messages-image-arrow-right"]')},this.photos=[];for(var n=0;n<this.refs.imageBlock.length;n++)this.photos.push(new bt(this.refs.imageBlock.eq(n),n));this.reset(),o.a.set(this.refs.arrowLeft,{x:"-25%"}),o.a.set(this.refs.arrowRight,{x:"25%"}),a()(this.refs.buttonBack).on("click",this.close.bind(this)),a()(window).on(kt.EVENT.OPEN,this.open.bind(this)),a()(window).on(kt.EVENT.CLOSE,this.close.bind(this)),a()(this.refs.scrollViewport).on("touchstart",this.scrollViewport_TOUCH_START.bind(this)),this.setImageScale(),o.a.set(this.element,{display:"none",pointerEvents:"none"}),a()(window).on(be.EVENT.BACK,this.close.bind(this))}}]),e}(),kt=function(){function e(t,n){wt(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Et(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppMessagesPhoto.EVENT.OPEN",CLOSE:"CAppMessagesPhoto.EVENT.CLOSE"}}}]),Et(e,[{key:"render",value:function(e,t){new Tt(e,t)}}]),e}(),Ct=kt;function Ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _t(e,t,n){return t&&Pt(e.prototype,t),n&&Pt(e,n),e}var Nt=function(){function e(t,n){Ot(this,e),this.render(t,n)}return _t(e,[{key:"open",value:function(){R.instance.maskChatAsReaded(this.index),this.refs.fieldName.html(this.data.name),this.refs.fieldPhone.html(this.data.phone),this.refs.fieldText.val(""),y.instance.trackPage("Messages","/app/messages/chat/".concat(k.slugfy(this.data.name))),this.element.css("display","block"),this.update(),this.isOpen=!0}},{key:"update",value:function(){var e=[],t=this.template.date.clone(),n=new Date;t.find('*[data-ref="app-chat-item-time"]').html(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][n.getDay()]+", "+k.toNumber(n.getDate())+" "+n.getFullYear()),e.push(t);for(var i=0;i<this.data.chat.length;i++){var o=this.data.chat[i],s=void 0;switch(o.type){case"text":s=o.link?"from"==o.direction?this.template.textFromWithLink.clone():this.template.textTo.clone():"from"==o.direction?this.template.textFrom.clone():this.template.textTo.clone();break;case"image":s="from"==o.direction?this.template.imageFrom.clone():null}e.push(s),"from"==o.direction&&(s.find('*[data-ref="app-chat-item-container-letter"]').css("background-color",this.data.color),s.find('*[data-ref="app-chat-item-letter"]').html(this.data.name.substr(0,1)));var r=s.find('*[data-ref="app-chat-item-image"]');r.length>0&&r.css("background-image","url(".concat(o.texture.src,")")),o.link&&(s.find('*[data-ref="app-chat-item-href"]').attr("href",o.link),s.find('*[data-ref="app-chat-item-title"]').html(o.title),s.find('*[data-ref="app-chat-item-product"]').attr("src","".concat(host,"/assets/img/messages/").concat(o.image)),s.find('*[data-ref="app-chat-item-url"]').html(o.link.replace("http://","").replace("https://","").replace("www.",""))),s.find('*[data-ref="app-chat-item-text"]').html(o.message);var l=new Date(new Date-6e4*o.minutesPast),h=k.toNumber(l.getHours())+":"+k.toNumber(l.getMinutes());s.find('*[data-ref="app-chat-message-image-from-item"]').attr("id","app-chat-image-index-".concat(i)),s.find('*[data-ref="app-chat-item-time"]').html(h)}this.refs.list.html(e);for(var c=this.refs.list.find('*[data-ref="app-chat-item-image"]').toArray().filter((function(e){return-1==e.style.backgroundImage.indexOf(".gif")})),u=0;u<c.length;u++){var d=c[u],f=d.style.backgroundImage.replace('url("',"").replace('")',"");d.dataset.image=f,d.dataset.index=u}a()(c).on("click",this.openPhoto.bind(this)),this.refs.content.scrollTop(9999)}},{key:"close",value:function(){this.isOpen=!1,this.element.css("display","none")}},{key:"chat_OPEN",value:function(e,t){this.index=t,this.data=R.instance.data[t],this.open()}},{key:"chat_CLOSE",value:function(e,t){}},{key:"openPhoto",value:function(e){for(var t=a()(e.currentTarget),n=t.data("image"),i=t.data("index"),o=[],s=this.refs.list.find('*[data-ref="app-chat-message-image-from-item"]'),r=0;r<s.length;r++){var l=s.eq(r);o.push(l.find('*[data-ref="app-chat-item-image"]').get(0).getBoundingClientRect())}a()(window).trigger(Ct.EVENT.OPEN,[{photo:n,elements:s,index:i,position:o}])}},{key:"buttonClose_CLICK",value:function(){this.close()}},{key:"chat_UPDATE",value:function(){this.isOpen&&this.update()}},{key:"form_SUBMIT",value:function(e){var t=this;e&&e.preventDefault();var n=k.preventInjection(this.refs.fieldText.val());if(""!=n){var i={message:n,direction:"to",type:"text",minutesPast:0,readed:!0};if(this.index=R.instance.getIndexFromCurrentChat(this.data.name),R.instance.pushUserMessage(this.index,i),this.data.reply){if(this.data.reply.counter||(this.data.reply.counter=0),this.data.reply.messages[this.data.reply.counter]){var a={message:this.data.reply.messages[this.data.reply.counter%this.data.reply.messages.length],direction:"from",type:"text",minutesPast:0,readed:!0};setTimeout((function(){R.instance.pushBotMessage(t.data.name,a)}),3500)}this.data.reply.counter++,this.data.reply.counter>2*this.data.reply.messages.length&&(this.data.reply.counter=0)}this.refs.fieldText.val("")}}},{key:"field_FOCUS",value:function(e){o.a.set(this.refs.footer,{display:"none"})}},{key:"field_BLUR",value:function(e){""!=k.preventInjection(this.refs.fieldText.val())&&this.form_SUBMIT(),o.a.set(this.refs.footer,{display:"block"})}},{key:"app_INIT",value:function(e,t){"messages"==t&&this.isOpen&&R.instance.maskChatAsReaded(this.index)}},{key:"render",value:function(e,t){this.element=a()(e),this.isOpen=!1,this.template={date:this.element.find('*[data-ref="app-chat-message-date"]'),textTo:this.element.find('*[data-ref="app-chat-message-text-to"]'),textFrom:this.element.find('*[data-ref="app-chat-message-text-from"]'),textFromWithLink:this.element.find('*[data-ref="app-chat-message-text-from-with-link"]'),imageFrom:this.element.find('*[data-ref="app-chat-message-image-from"]')},this.refs={footer:a()('*[data-component="dashboard-footer"]'),content:this.element.find('*[data-ref="app-chat-content"]'),list:this.element.find('*[data-ref="app-chat-list"]'),buttonClose:this.element.find('*[data-ref="app-chat-button-close"]'),fieldName:this.element.find('*[data-ref="app-chat-field-name"]'),fieldPhone:this.element.find('*[data-ref="app-chat-field-phone"]'),fieldText:this.element.find('*[data-ref="app-chat-field-text"]'),form:this.element.find('*[data-ref="app-chat-form"]'),submitButton:this.element.find('*[data-ref="app-chat-button-submit"]')},a()(this.refs.buttonClose).on("click",this.buttonClose_CLICK.bind(this)),a()(this.refs.form).on("submit",this.form_SUBMIT.bind(this)),this.refs.fieldText.on("focus",this.field_FOCUS.bind(this)),this.refs.fieldText.on("blur",this.field_BLUR.bind(this)),a()(window).on(St.EVENT.OPEN,this.chat_OPEN.bind(this)),a()(window).on(R.EVENT.UPDATE,this.chat_UPDATE.bind(this)),a()(window).on(ot.EVENT.INIT,this.app_INIT.bind(this))}}]),e}(),St=function(){function e(t,n){Ot(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return _t(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppChat.EVENT.OPEN",CLOSE:"CAppChat.EVENT.CLOSE"}}}]),_t(e,[{key:"render",value:function(e,t){new Nt(e,t)}}]),e}(),At=St;function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vt(e,t,n){return t&&xt(e.prototype,t),n&&xt(e,n),e}var Lt=function(){function e(t,n){It(this,e),this.render(t,n)}return Vt(e,[{key:"message_CLICK",value:function(e){var t=a()(e.currentTarget).data("index");a()(window).trigger(At.EVENT.OPEN,[t])}},{key:"contact_CLICK",value:function(){var e=a()(event.currentTarget).data("name"),t=-1;R.instance.data.map((function(n,i){n.name==e&&(t=i)}));-1!=t&&a()(window).trigger(At.EVENT.OPEN,[t])}},{key:"updateConversations",value:function(){for(var e=R.instance.data,t=[],n=0,i=0;i<e.length;i++){var o=e[i];if(o.chat.length){var s=this.template.messagesTemplate.clone();s.attr("data-index",i),s.find('*[data-ref="app-messages-list-item-title"]').html(o.name.substr(0,1)),s.find('*[data-ref="app-messages-list-item-container-title"]').css("background-color",o.color),s.find('*[data-ref="app-messages-list-item-name"]').html(o.name);var r=o.chat.slice().reverse()[0],l=r.message;l.length>75&&(l=l.substr(0,72)+"..."),s.find('*[data-ref="app-messages-list-item-text"]').html(l);var h=new Date(new Date-6e4*r.minutesPast),c=k.toNumber(h.getHours())+":"+k.toNumber(h.getMinutes());s.find('*[data-ref="app-messages-list-item-timestamp"]').html(c);var u=o.chat.slice().filter((function(e){return 0==e.readed})).length;n+=u,u>0?(s.find('*[data-ref="app-messages-list-item-label-number"]').html(u),s.find('*[data-ref="app-messages-list-item-label"]').css("display","block")):s.find('*[data-ref="app-messages-list-item-label"]').css("display","none"),o.isDraft?s.find('*[data-ref="app-messages-list-item-draft"]').css("display","block"):s.find('*[data-ref="app-messages-list-item-draft"]').css("display","none"),i>=e.length-1&&s.find('*[data-ref="app-messages-list-item-linebreak"]').css("opacity","0"),a()(s).on("click",this.message_CLICK.bind(this)),t.push(s)}}var d="no unread message";n?(d="".concat(n," unread message").concat(n>1?"s":""),this.refs.title.attr("style",""),this.refs.buttonConversations.find('*[data-ref="notification"]').css("display","block"),this.refs.buttonConversations.find('*[data-ref="app-messages-list-item-label-number"]').html(n)):(this.refs.title.css("background-color","transparent"),this.refs.buttonConversations.find('*[data-ref="notification"]').css("display","none")),this.refs.title.html(d),this.refs.messagesList.html(t)}},{key:"updateContacts",value:function(){for(var e=R.instance.data.sort((function(e,t){return t.time-e.time})),t=[],n={},i=0;i<e.length;i++){var o=e[i],s=o.name.substr(0,1);n[s]||(n[s]=[]),n[s].push(o)}for(var r in n){var l=r,h=n[r],c=this.template.contactsTemplate.clone();c.find('*[data-ref="app-messages-contact-item-letter"]').html(l);for(var u=0;u<h.length;u++){var d=h[u],f=this.template.contactsDetailsTemplate.clone();f.find('*[data-ref="app-messages-contact-item-details-container-title"]').css("background-color",d.color),f.find('*[data-ref="app-messages-contact-item-details-title"]').html(d.name.substr(0,1)),f.find('*[data-ref="app-messages-contact-item-details-name"]').html(d.name),u>=h.length-1&&f.find('*[data-ref="app-messages-contact-item-details-linebreak"]').css("opacity","0"),f.attr("data-name",d.name),a()(f).on("click",this.contact_CLICK.bind(this)),c.find('*[data-ref="app-messages-contact-item-list"]').append(f)}t.push(c)}this.refs.contactTitle.html("".concat(e.length," contact").concat(e.length>1?"s":"")),this.refs.contactList.html(t)}},{key:"update",value:function(){this.updateContacts(),this.updateConversations()}},{key:"buttonConversations_CLICK",value:function(){switch(this.refs.contactContainer.css("display","none"),this.refs.buttonConversations.find('*[data-ref="button-dash-enabled"]').css("display","block"),this.refs.buttonConversations.find('*[data-ref="button-dash-disabled"]').css("display","none"),this.refs.buttonContacts.find('*[data-ref="button-dash-enabled"]').css("display","none"),this.refs.buttonContacts.find('*[data-ref="button-dash-disabled"]').css("display","block"),this.refs.filterConainter.css("display","block"),this.refs.titleMessagesContainer.css("display","block"),this.refs.titleContactsContainer.css("display","none"),this.state.messagesType){case"all":this.refs.chatContainer.css("display","block");break;case"category":this.refs.categoryContainer.css("display","block")}this.refs.content.scrollTop(0)}},{key:"buttonContacts_CLICK",value:function(){this.refs.chatContainer.css("display","none"),this.refs.contactContainer.css("display","block"),this.refs.buttonConversations.find('*[data-ref="button-dash-enabled"]').css("display","none"),this.refs.buttonConversations.find('*[data-ref="button-dash-disabled"]').css("display","block"),this.refs.buttonContacts.find('*[data-ref="button-dash-enabled"]').css("display","block"),this.refs.buttonContacts.find('*[data-ref="button-dash-disabled"]').css("display","none"),this.refs.filterConainter.css("display","none"),this.refs.titleMessagesContainer.css("display","none"),this.refs.titleContactsContainer.css("display","block"),this.refs.categoryContainer.css("display","none"),this.refs.content.scrollTop(0),this.buttonContactsCounter++,this.buttonContactsCounter>=10&&R.instance.startDeveloperText(),clearTimeout(this.resetContactsCounter),this.resetContactsCounter=setTimeout(this.resetHiddenMessage.bind(this),1e3)}},{key:"resetHiddenMessage",value:function(){this.buttonContactsCounter=0}},{key:"buttonAll_CLICK",value:function(){this.refs.buttonAll.find('*[data-ref="button-rounded-enabled"]').css("display","block"),this.refs.buttonAll.find('*[data-ref="button-rounded-disabled"]').css("display","none"),this.refs.buttonCategory.find('*[data-ref="button-rounded-enabled"]').css("display","none"),this.refs.buttonCategory.find('*[data-ref="button-rounded-disabled"]').css("display","block"),this.refs.filterConainter.css("display","block"),this.refs.chatContainer.css("display","block"),this.refs.contactContainer.css("display","none"),this.refs.categoryContainer.css("display","none"),this.state.messagesType="all"}},{key:"buttonCategory_CLICK",value:function(){this.refs.buttonCategory.find('*[data-ref="button-rounded-enabled"]').css("display","block"),this.refs.buttonCategory.find('*[data-ref="button-rounded-disabled"]').css("display","none"),this.refs.buttonAll.find('*[data-ref="button-rounded-enabled"]').css("display","none"),this.refs.buttonAll.find('*[data-ref="button-rounded-disabled"]').css("display","block"),this.refs.filterConainter.css("display","block"),this.refs.chatContainer.css("display","none"),this.refs.contactContainer.css("display","none"),this.refs.categoryContainer.css("display","block"),this.state.messagesType="category"}},{key:"dispose",value:function(e,t){"messages"==t&&ot.getInApp("messages-photo")&&a()(window).trigger(Ct.EVENT.CLOSE)}},{key:"render",value:function(e,t){this.element=a()(e),this.state={messagesType:"all"},this.buttonContactsCounter=0,this.resetContactsCounter=null,this.template={messagesTemplate:this.element.find('*[data-ref="app-messages-list-item-template"]'),contactsTemplate:this.element.find('*[data-ref="app-messages-contact-item-template"]'),contactsDetailsTemplate:this.element.find('*[data-ref="app-messages-contact-item-details-template"]')},this.refs={content:this.element.find('*[data-ref="app-content"]'),titleMessagesContainer:this.element.find('*[data-ref="app-message-title-messages-container"]'),titleContactsContainer:this.element.find('*[data-ref="app-message-title-contact-container"]'),title:this.element.find('*[data-ref="app-messages-title"]'),contactTitle:this.element.find('*[data-ref="app-messages-contact-title"]'),messagesList:this.element.find('*[data-ref="app-messages-list"]'),contactList:this.element.find('*[data-ref="app-messages-contacts"]'),chatContainer:this.element.find('*[data-ref="app-messages-chat-container"]'),contactContainer:this.element.find('*[data-ref="app-messages-contact-container"]'),categoryContainer:this.element.find('*[data-ref="app-messages-category-container"]'),filterConainter:this.element.find('*[data-ref="app-messages-filter-container"]'),buttonSearch:this.element.find('*[data-ref="app-messages-button-search"]'),buttonConversations:this.element.find('*[data-ref="app-message-button-conversations"]'),buttonContacts:this.element.find('*[data-ref="app-message-button-contacts"]'),buttonAll:this.element.find('*[data-ref="app-message-button-all"]'),buttonCategory:this.element.find('*[data-ref="app-message-button-category"]')},a()(this.refs.buttonConversations).on("click",this.buttonConversations_CLICK.bind(this)),a()(this.refs.buttonContacts).on("click",this.buttonContacts_CLICK.bind(this)),a()(this.refs.buttonAll).on("click",this.buttonAll_CLICK.bind(this)),a()(this.refs.buttonCategory).on("click",this.buttonCategory_CLICK.bind(this)),this.update(),a()(window).on(R.EVENT.UPDATE,this.update.bind(this)),a()(window).on(ot.EVENT.DISPOSE,this.dispose.bind(this))}}]),e}(),Dt=function(){function e(t,n){It(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Vt(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppMessages.EVENT.OPEN",CLOSE:"CAppMessages.EVENT.CLOSE"}}}]),Vt(e,[{key:"render",value:function(e,t){new Lt(e,t)}}]),e}();function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bt(e,t,n){return t&&Mt(e.prototype,t),n&&Mt(e,n),e}var Ut=function(){function e(t,n){Rt(this,e),this.render(t,n)}return Bt(e,[{key:"update",value:function(){for(var e=R.instance.data,t=0,n=0;n<e.length;n++){t+=e[n].chat.slice().filter((function(e){return 0==e.readed})).length}this.refs.label.html(t),t?this.element.css("display","block"):this.element.css("display","none")}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={label:this.element.find('*[data-ref="app-messages-list-item-label-number"]')},this.update(),a()(window).on(R.EVENT.UPDATE,this.update.bind(this))}}]),e}(),Ht=function(){function e(t,n){Rt(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Bt(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppMessagesNotificationLabel.EVENT.OPEN",CLOSE:"CAppMessagesNotificationLabel.EVENT.CLOSE"}}}]),Bt(e,[{key:"render",value:function(e,t){new Ut(e,t)}}]),e}();function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ft(e,t,n){return t&&qt(e.prototype,t),n&&qt(e,n),e}var jt=function(){function e(t,n){Kt(this,e),this.render(t,n)}return Ft(e,[{key:"lock",value:function(){this.element.css("display","block")}},{key:"unlock",value:function(){this.element.css("display","none")}},{key:"navigateToApp",value:function(e,t,n){this.data.switchAppName=t,this.lock(),"news"==n?(a()(window).trigger(be.EVENT.BACK),o.a.delayedCall(.8,this.onApp_CLOSE.bind(this))):(a()(window).trigger(be.EVENT.CLOSE_PREVENTED_APP),o.a.delayedCall(.8,this.onApp_CLOSE.bind(this)))}},{key:"onApp_CLOSE",value:function(){a()(window).trigger(Re.EVENT.START,[this.data.switchAppName]),o.a.delayedCall(.6,this.onApp_OPEN.bind(this))}},{key:"onApp_OPEN",value:function(){this.unlock()}},{key:"render",value:function(e,t){this.element=a()(e),this.data={switchAppName:""},a()(window).on(Yt.EVENT.LOCK,this.lock.bind(this)),a()(window).on(Yt.EVENT.UNLOCK,this.unlock.bind(this)),a()(window).on(Yt.EVENT.NAVIGATE_TO_APP,this.navigateToApp.bind(this))}}]),e}(),Yt=function(){function e(t,n){Kt(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ft(e,null,[{key:"EVENT",get:function(){return{LOCK:"CAppLocker.EVENT.LOCK",UNLOCK:"CAppLocker.EVENT.UNLOCK",NAVIGATE_TO_APP:"CAppLocker.EVENT.NAVIGATE_TO_APP"}}}]),Ft(e,[{key:"render",value:function(e,t){new jt(e,t)}}]),e}(),Wt=Yt;function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zt(e,t,n){return t&&Xt(e.prototype,t),n&&Xt(e,n),e}var Jt=function(){function e(t,n){Gt(this,e),this.render(t,n)}return zt(e,[{key:"show",value:function(e){if(!this.onTransition){this.conversation=e,this.onTransition=!0,this.isAvailable=!0,this.refs.audio.currentTime=0,this.refs.audio.play();var t=e.chat.slice().reverse().filter((function(e){return"from"==e.direction}))[0].message;this.element.css("display","block");var n=e.name,i=t;this.refs.name.html(n),this.refs.message.html("".concat(i.substr(0,20),"...")),o.a.set(this.refs.container,{width:"auto",scale:1});var a=this.refs.container.get(0).getBoundingClientRect();o.a.fromTo(this.refs.container,{opacity:0,scale:.9},{opacity:1,scale:1,duration:.3,ease:"linear"}),o.a.fromTo(this.refs.container,{y:-80},{y:0,duration:.6,ease:"back.out"}),o.a.fromTo(this.refs.container,{width:37},{width:a.width+5,ease:"power3.inOut",delay:.55}),o.a.fromTo(this.refs.icon,{scale:1},{scale:.8,delay:.55,ease:"power3.inOut"}),o.a.fromTo([this.refs.name,this.refs.message],{opacity:0,x:0,y:0,z:0},{opacity:1,duration:.6,ease:"power2.out",delay:.7,onComplete:this.on_SHOW.bind(this)})}}},{key:"on_SHOW",value:function(){o.a.to(this,{duration:3,delay:0,onComplete:this.hide.bind(this)})}},{key:"hide",value:function(){this.isAvailable=!1,o.a.to([this.refs.name,this.refs.message],{opacity:0,duration:.6,ease:"power2.out",delay:0}),o.a.to(this.refs.container,{width:37,duration:.6,ease:"power3.inOut",delay:0}),o.a.to(this.refs.icon,{scale:1,duration:.6,ease:"power3.inOut",delay:0}),o.a.to(this.refs.container,{y:-80,duration:.6,ease:"back.in",delay:.5}),o.a.to(this.refs.container,{opacity:0,scale:.9,duration:.3,delay:.75,ease:"linear",onComplete:this.on_HIDE.bind(this)})}},{key:"on_HIDE",value:function(){o.a.set(this.refs.container,{width:"auto"}),this.element.css("display","none"),this.onTransition=!1}},{key:"update",value:function(e,t){this.show(t)}},{key:"on_CLICK",value:function(e){if(this.isAvailable){o.a.killTweensOf(this),this.hide();for(var t=-1,n=0;n<R.instance.data.length;n++){R.instance.data[n].name==this.conversation.name&&(t=n)}if(-1!=t)if(y.instance.trackPage("Messages","/app/messages/notification/".concat(k.slugfy(this.conversation.name))),""!=window.app&&"messages"!=window.app||window.news)""!=window.app&&(a()(window).trigger(At.EVENT.OPEN,[t]),a()(window).trigger(Wt.EVENT.NAVIGATE_TO_APP,["messages"]));else{var i=a()('*[data-app-link-id="messages"]');a()(window).trigger(At.EVENT.OPEN,[t]),a()(window).trigger(ot.EVENT.OPEN,["messages",i,!0])}}}},{key:"render",value:function(e,t){this.element=a()(e),this.onTransition=!1,this.isAvailable=!1,this.conversation=null,this.refs={container:this.element.find('*[data-ref="app-messages-notification-container"]'),audio:this.element.find('*[data-ref="app-messages-notification-audio"]').get(0),icon:this.element.find('*[data-ref="app-messages-notification-icon"]'),name:this.element.find('*[data-ref="app-messages-notification-contact-name"]'),message:this.element.find('*[data-ref="app-messages-notification-contact-message"]')},this.element.on("click",this.on_CLICK.bind(this)),a()(window).on(R.EVENT.NEW_MESSAGE,this.update.bind(this))}}]),e}(),Zt=function(){function e(t,n){Gt(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return zt(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppMessagesNotification.EVENT.OPEN",CLOSE:"CAppMessagesNotification.EVENT.CLOSE"}}}]),zt(e,[{key:"render",value:function(e,t){new Jt(e,t)}}]),e}();function Qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function en(e,t,n){return t&&$t(e.prototype,t),n&&$t(e,n),e}var tn=function(){function e(t,n){Qt(this,e),this.render(t,n)}return en(e,[{key:"on_CLICK",value:function(e){o.a.fromTo(this.refs.overlay,{scale:.8},{scale:1,duration:.6,ease:"power3.out"}),o.a.fromTo(this.refs.overlay,{opacity:1},{opacity:0,duration:.6,delay:.3,ease:"power3.inOut"})}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={overlay:this.element.find('*[data-ref="button-background-overlay"]')},o.a.set(this.refs.overlay,{opacity:0}),a()(this.element).on("click",this.on_CLICK.bind(this))}}]),e}(),nn=function(){function e(t,n){Qt(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return en(e,null,[{key:"EVENT",get:function(){return{OPEN:"CButtonBackground.EVENT.OPEN",CLOSE:"CButtonBackground.EVENT.CLOSE"}}}]),en(e,[{key:"render",value:function(e,t){new tn(e,t)}}]),e}();function an(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function on(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sn(e,t,n){return t&&on(e.prototype,t),n&&on(e,n),e}var rn=function(){function e(t,n){an(this,e),this.render(t,n)}return sn(e,[{key:"on_CLICK",value:function(){"active"==this.state.status?this.state.status="deactive":this.state.status="active",y.instance.trackPage("Dashboard - Notifications","/app/dashboard/notifications/".concat(this.data.tracker,"/").concat(this.state.status)),o.a.to(this.refs.enabledIcon,{duration:.1,opacity:"active"==this.state.status?1:0})}},{key:"render",value:function(e,t){this.element=a()(e),this.state={status:this.element.data("status")},this.data={tracker:this.element.data("tracker")},this.refs={enabledIcon:this.element.find('*[data-ref="dashboard-notification-button-enabled"]')},o.a.set(this.refs.enabledIcon,{opacity:"active"==this.state.status?1:0}),a()(this.element).on("touchstart",this.on_CLICK.bind(this))}}]),e}(),ln=function(){function e(t,n){an(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return sn(e,null,[{key:"EVENT",get:function(){return{}}}]),sn(e,[{key:"render",value:function(e,t){new rn(e,t)}}]),e}();function hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function un(e,t,n){return t&&cn(e.prototype,t),n&&cn(e,n),e}var dn=function(){function e(t,n){hn(this,e),this.render(t,n)}return un(e,[{key:"updateBackgroundBlur",value:function(){var e=20*this.blur.value;e=Math.floor(e)}},{key:"on_TOUCH_END",value:function(e){switch(this.direction){case 1:this.onTransition=!0,o.a.killTweensOf([this.refs.bar,this.refs.text,this.refs.background,this.blur]),o.a.to(this.refs.bar,{duration:.3,y:"0%",ease:"power2.out"}),o.a.to(this.refs.text,{duration:.3,opacity:1,ease:"power2.out"}),o.a.to(this.refs.background,{duration:.3,opacity:1,ease:"power2.out",onComplete:this.onTransition_COMPLETE.bind(this)}),o.a.to(this.blur,{duration:.3,value:1,ease:"power2.out",onUpdate:this.updateBackgroundBlur.bind(this)}),this.refs.overlay.css("display","block"),this.state.isOpened=!0,window.dashboardNotificationOpen=!0,y.instance.trackPage("Dashboard - Notifications","/app/dashboard/notifications");break;case-1:this.onTransition=!0,o.a.killTweensOf([this.refs.bar,this.refs.text,this.refs.background,this.blur]),o.a.to(this.refs.bar,{duration:.3,y:"-100%",ease:"power2.out"}),o.a.to(this.refs.text,{duration:.3,opacity:0,ease:"power2.out"}),o.a.to(this.refs.background,{duration:.3,opacity:0,ease:"power2.out",onComplete:this.onTransition_COMPLETE.bind(this)}),o.a.to(this.blur,{duration:.3,value:0,ease:"power2.out",onUpdate:this.updateBackgroundBlur.bind(this)}),this.refs.overlay.css("display","none"),this.state.isOpened=!1,window.dashboardNotificationOpen=!1,y.instance.trackPage("Dashboard","/app/dashboard")}a()(document).off("touchend"),a()(document).off("touchmove")}},{key:"on_TOUCH_MOVE",value:function(e){this.moveCounter++;var t=e.touches[0]||e.changedTouches[0];this.currentTouchPosition={x:t.pageX-this.initialTouchPosition.x,y:t.pageY-this.initialTouchPosition.y};var n=100*this.currentTouchPosition.y/this.barHeight,i=this.currentTouchPosition.y/this.barHeight;if((this.currentTouchPosition.y>this.threshold||this.currentTouchPosition.y<this.threshold)&&this.moveCounter++,this.moveCounter){n=(n=this.state.isOpened?n:-100+n)>0?0:n,o.a.to(this.refs.bar,{duration:.1,y:"".concat(n,"%")}),this.state.isOpened&&(i+=1);var a=i;o.a.to(this.refs.background,{duration:.1,opacity:i}),o.a.to(this.refs.text,{duration:.1,opacity:a}),o.a.to(this.blur,{value:i,onUpdate:this.updateBackgroundBlur.bind(this)});var s=n+100;s>=this.oldPercent?this.direction=1:this.direction=-1,this.oldPercent=s}}},{key:"on_TOUCH_START",value:function(e){if(!this.onTransition){this.direction=0,this.oldPercent=0,this.moveCounter=0,this.barHeight=this.refs.bar.height();var t=e.touches[0]||e.changedTouches[0];this.initialTouchPosition={x:t.pageX,y:t.pageY},this.currentTouchPosition={x:t.pageX-this.initialTouchPosition.x,y:t.pageY-this.initialTouchPosition.y},a()(document).on("touchend",this.on_TOUCH_END.bind(this)),a()(document).on("touchmove",this.on_TOUCH_MOVE.bind(this))}}},{key:"onTransition_COMPLETE",value:function(){this.onTransition=!1,this.onStart=!1}},{key:"app_INIT",value:function(){this.refs.hit.css("height","40px")}},{key:"app_DISPOSE",value:function(){window.dashboardSearchOpen||this.refs.hit.css("height","120px")}},{key:"start",value:function(e){if(!this.onTransition&&!this.onStart){this.onStart=!0,this.direction=0,this.oldPercent=0,this.moveCounter=0,this.barHeight=this.refs.bar.height();var t=e.touches[0]||e.changedTouches[0];this.initialTouchPosition={x:t.pageX,y:t.pageY},this.currentTouchPosition={x:t.pageX-this.initialTouchPosition.x,y:t.pageY-this.initialTouchPosition.y},a()(document).on("touchend",this.on_TOUCH_END.bind(this)),a()(document).on("touchmove",this.on_TOUCH_MOVE.bind(this))}}},{key:"render",value:function(e,t){this.element=a()(e),this.direction=0,this.oldPercent=0,this.onTransition=!1,this.onStart=!1,window.dashboardNotificationOpen=!1,this.state={isOpened:!1},this.initialTouchPosition={x:0,y:0},this.currentTouchPosition={x:0,y:0},this.currentPage=0,this.threshold=10,this.moveCounter=0,this.barHeight=0,this.blur={value:0},this.refs={background:this.element.find('*[data-ref="dashboard-notifications-background"]'),text:this.element.find('*[data-ref="dashboard-notifications-text"]'),bar:this.element.find('*[data-ref="dashboard-notifications-bar"]'),hit:this.element.find('*[data-ref="dashboard-notifications-hit"]'),overlay:this.element.find('*[data-ref="dashboard-notifications-overlay"]')},o.a.set(this.refs.background,{opacity:0}),o.a.set(this.refs.bar,{y:"-100%"}),this.element.on("touchstart",this.on_TOUCH_START.bind(this)),a()(window).on(ot.EVENT.INIT,this.app_INIT.bind(this)),a()(window).on(ot.EVENT.DISPOSE,this.app_DISPOSE.bind(this)),a()(window).on(be.EVENT.OPEN_DASHBOARD_SEARCH,this.app_INIT.bind(this)),a()(window).on(be.EVENT.CLOSE_DASHBOARD_SEARCH,this.app_DISPOSE.bind(this)),window.dashboard_notification=this}}]),e}(),fn=function(){function e(t,n){hn(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return un(e,null,[{key:"EVENT",get:function(){return{}}}]),un(e,[{key:"render",value:function(e,t){new dn(e,t)}}]),e}();function pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yn(e,t,n){return t&&mn(e.prototype,t),n&&mn(e,n),e}var gn=function(){function e(t,n){pn(this,e),this.render(t,n)}return yn(e,[{key:"render",value:function(e,t){this.element=a()(e),o.a.set(this.element,{x:"-100%"})}}]),e}(),bn=function(){function e(t,n){pn(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return yn(e,null,[{key:"EVENT",get:function(){return{}}}]),yn(e,[{key:"render",value:function(e,t){new gn(e,t)}}]),e}();function wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function En(e,t,n){return t&&vn(e.prototype,t),n&&vn(e,n),e}var Tn=function(){function e(t,n){wn(this,e),this.render(t,n)}return En(e,[{key:"button_CLICK",value:function(e){var t=a()(e.currentTarget),n=t.data("id");this.refs.containers.css("display","none"),this.element.find('*[data-filter="'.concat(n,'"]')).css("display","block"),this.refs.buttons.find('*[data-ref="news-button-enabled"]').css("display","none"),t.find('*[data-ref="news-button-enabled"]').css("display","block")}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={buttons:this.element.find('*[data-component="news-button"]'),containers:this.element.find('*[data-ref="news-container"]')},this.refs.containers.css("display","none"),this.refs.containers.eq(0).css("display","block"),this.refs.buttons.eq(0).find('*[data-ref="news-button-enabled"]').css("display","block"),a()(this.refs.buttons).on("click",this.button_CLICK.bind(this))}}]),e}(),kn=function(){function e(t,n){wn(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return En(e,null,[{key:"EVENT",get:function(){return{}}}]),En(e,[{key:"render",value:function(e,t){new Tn(e,t)}}]),e}(),Cn=n("vDqi"),On=n.n(Cn);function Pn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _n(e,t,n){return t&&Pn(e.prototype,t),n&&Pn(e,n),e}var Nn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.useStaticWeather=!0,this.isLoaded=this.useStaticWeather,this.data={location:"Current location",country:"",temp:"18",description:"Light Rain",date:new Date},this.useStaticWeather||navigator.geolocation&&navigator.geolocation.getCurrentPosition(this.on_POSITION.bind(this))}return _n(e,null,[{key:"EVENT",get:function(){return{UPDATE:"CAppWeatherData.EVENT.UPDATE"}}},{key:"instance",get:function(){return this._instance||(this._instance=new e("singletonEnforcer")),this._instance}}]),_n(e,[{key:"on_POSITION",value:function(e){this.load(e.coords.latitude,e.coords.longitude)}},{key:"load",value:function(t,n){var i={method:"GET",url:"https://web.archive.org/web/20220119053530/https://community-open-weather-map.p.rapidapi.com/forecast",params:{units:"metric",lat:t,lon:n,cnt:"1"},headers:{"x-rapidapi-key":"d2c0ac94demsh20b7a8c0e879311p169566jsn0076ad73eb3e","x-rapidapi-host":"community-open-weather-map.p.rapidapi.com"}};On.a.request(i).then(function(t){this.data.country=t.data.city.country,this.data.location=t.data.city.name,this.data.temp=t.data.list[0].main.temp,this.data.description=t.data.list[0].weather[0].description,this.isLoaded=!0,a()(window).trigger(e.EVENT.UPDATE)}.bind(this)).catch((function(e){console.error(e)}))}}]),e}();function Sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function An(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function In(e,t,n){return t&&An(e.prototype,t),n&&An(e,n),e}var xn=function(){function e(t,n){Sn(this,e),this.render(t,n)}return In(e,[{key:"update",value:function(){o.a.to(this.element,{opacity:1,duration:.3,ease:"power3.out"});var e=Nn.instance.data,t=e.date.getHours()>11?"pm":"am";this.refs.celsius.html(Math.round(e.temp)),this.refs.date.html("".concat(e.date.getDate(),"/").concat(e.date.getMonth()+1)),this.refs.time.html("".concat(e.date.getHours()%12,":").concat(k.toNumber(e.date.getMinutes())," ").concat(t)),this.refs.location.html("".concat(e.location));var n=e.description;n=n.substr(0,1).toUpperCase()+n.substr(1,n.length),this.refs.description.html("".concat(n)),o.a.fromTo(this.refs.icon,{rotation:-90,opacity:0},{rotation:-360,opacity:1,duration:.6,ease:"power3.out"})}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={celsius:this.element.find('*[data-ref="weather-celsius"]'),date:this.element.find('*[data-ref="weather-date"]'),time:this.element.find('*[data-ref="weather-time"]'),location:this.element.find('*[data-ref="weather-location"]'),country:this.element.find('*[data-ref="weather-country"]'),description:this.element.find('*[data-ref="weather-description"]'),icon:this.element.find('*[data-ref="weather-icon"]')},o.a.set(this.element,{opacity:0}),this.element.on("click",this.update.bind(this)),a()(window).on(Nn.EVENT.UPDATE,this.update.bind(this)),Nn.instance.isLoaded&&this.update()}}]),e}(),Vn=function(){function e(t,n){Sn(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return In(e,null,[{key:"EVENT",get:function(){return{OPEN_APP:"CWeather.EVENT.OPEN_APP",CLOSE_APP:"CWeather.EVENT.CLOSE_APP"}}}]),In(e,[{key:"render",value:function(e,t){new xn(e,t)}}]),e}();function Ln(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rn(e,t,n){return t&&Dn(e.prototype,t),n&&Dn(e,n),e}var Mn=function(){function e(t,n){Ln(this,e),this.render(t,n)}return Rn(e,[{key:"update",value:function(){var e=new Date,t=k.toNumber(e.getHours()),n=k.toNumber(e.getMinutes()),i="".concat(t,":").concat(n);i!=this.time&&(this.time=i,this.element.html(this.time))}},{key:"render",value:function(e,t){this.element=a()(e),this.time="",this.interval=setInterval(this.update.bind(this),100)}}]),e}(),Bn=function(){function e(t,n){Ln(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Rn(e,null,[{key:"EVENT",get:function(){return{}}}]),Rn(e,[{key:"render",value:function(e,t){new Mn(e,t)}}]),e}();function Un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kn(e,t,n){return t&&Hn(e.prototype,t),n&&Hn(e,n),e}var qn=function(){function e(t,n){Un(this,e),this.render(t,n)}return Kn(e,[{key:"animate",value:function(){o.a.set(this.element,{opacity:this.visible?0:1}),this.visible=!this.visible,this.interval=setTimeout(this.animate.bind(this),500)}},{key:"render",value:function(e,t){this.element=a()(e),this.interval=null,this.visible=!0,this.animate()}}]),e}(),Fn=function(){function e(t,n){Un(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Kn(e,null,[{key:"EVENT",get:function(){return{}}}]),Kn(e,[{key:"render",value:function(e,t){new qn(e,t)}}]),e}();function jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wn(e,t,n){return t&&Yn(e.prototype,t),n&&Yn(e,n),e}var Gn=function(){function e(t,n){jn(this,e),this.render(t,n)}return Wn(e,[{key:"setNumber",value:function(){var e=this.currentValue;switch(e){case"clear":this.currentText="";break;case"video":case"call":break;case"back":this.currentText=this.currentText.substr(0,this.currentText.length-1);break;default:this.currentText=this.currentText+String(e)}this.currentText=this.currentText.substr(0,10),this.currentText.length?this.state.isExtraVisible||(o.a.to(this.refs.buttonExtra,{opacity:1,duration:.3,ease:"power3.out"}),this.state.isExtraVisible=!0):this.state.isExtraVisible&&(o.a.to(this.refs.buttonExtra,{opacity:0,duration:.3,ease:"power3.out"}),this.state.isExtraVisible=!1),this.refs.number.html(this.currentText)}},{key:"button_TOUCH_END",value:function(){clearInterval(this.interval)}},{key:"button_TOUCH_START",value:function(e){var t=a()(e.currentTarget),n=t.data("value"),i=t.find('*[data-ref="app-call-button-background"]');i.length&&(o.a.killTweensOf(i),o.a.fromTo(i,{scale:.5},{scale:1.1,duration:.4,delay:0,ease:"power3.out"}),o.a.fromTo(i,{opacity:1},{opacity:0,duration:.2,delay:.2,ease:"power3.out"}));var s=t.find('*[data-ref="app-call-button-number"]'),r=t.find('*[data-ref="app-call-button-letter"]');s.length&&(o.a.killTweensOf([s,r]),o.a.fromTo([s,r],{scale:.6},{scale:1,duration:.4,ease:"power3.out"})),this.currentValue=n,this.setNumber(),clearInterval(this.interval),this.interval=setInterval(this.setNumber.bind(this),200)}},{key:"buttonStart_CLICK",value:function(){if(this.currentText.length>3&&-1==this.currentText.indexOf("#")&&-1==this.currentText.indexOf("*")){var e={name:"",phone:this.currentText,country:""};a()(window).trigger(q.EVENT.OPEN,[q.TYPE.OUTGOING,e])}}},{key:"outgoing_OPEN",value:function(e){this.currentValue="clear",this.setNumber()}},{key:"render",value:function(e,t){this.element=a()(e),this.currentText="",this.currentValue="",this.interval=null,this.state={isExtraVisible:!1},this.refs={number:this.element.find('*[data-ref="app-call-number"]'),button:this.element.find('*[data-ref="app-call-button"]'),buttonExtra:this.element.find('*[data-ref="app-call-button-extra"]'),background:this.element.find('*[data-ref="app-call-button-background"]'),buttonStart:this.element.find('*[data-ref="app-call-button-start-current-call"]')},o.a.set(this.refs.background,{opacity:0}),o.a.set(this.refs.buttonExtra,{opacity:0}),a()(this.refs.buttonStart).on("click",this.buttonStart_CLICK.bind(this)),a()(this.refs.button).on("touchstart",this.button_TOUCH_START.bind(this)),a()(this.element).on("touchend",this.button_TOUCH_END.bind(this)),a()(window).on(q.EVENT.ON_OPEN,this.outgoing_OPEN.bind(this))}}]),e}(),Xn=function(){function e(t,n){jn(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Wn(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppCall.EVENT.OPEN",CLOSE:"CAppCall.EVENT.CLOSE"}}}]),Wn(e,[{key:"render",value:function(e,t){new Gn(e,t)}}]),e}();function zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zn(e,t,n){return t&&Jn(e.prototype,t),n&&Jn(e,n),e}var Qn=function(){function e(t,n){zn(this,e),this.render(t,n)}return Zn(e,[{key:"on_CLICK",value:function(e){if(window.clickable){a()(e.currentTarget);switch(this.data.name){case"messages":break;case"call":window.call()}}}},{key:"render",value:function(e,t){this.element=a()(e),a()(this.element).on("click",this.on_CLICK.bind(this)),this.data={name:this.element.data("app-trigger-id")},this.refs={notification:this.element.find('*[data-ref="app-trigger-notification"]')}}}]),e}(),$n=function(){function e(t,n){zn(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Zn(e,null,[{key:"EVENT",get:function(){return{START:"CAppTrigger.EVENT.START"}}}]),Zn(e,[{key:"render",value:function(e,t){new Qn(e,t)}}]),e}();function ei(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ti(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ni(e,t,n){return t&&ti(e.prototype,t),n&&ti(e,n),e}var ii=function(){function e(t,n){ei(this,e),this.render(t,n)}return ni(e,[{key:"preload",value:function(){var e=this.element.get(0);e.src=e.dataset.src}},{key:"render",value:function(e,t){this.element=a()(e);this.element.get(0);a()(window).on(ai.EVENT.START,this.preload.bind(this))}}]),e}(),ai=function(){function e(t,n){ei(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return ni(e,null,[{key:"EVENT",get:function(){return{START:"CAudio.EVENT.START"}}}]),ni(e,[{key:"render",value:function(e,t){new ii(e,t)}}]),e}(),oi=ai;function si(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ri(e,t,n){return t&&si(e.prototype,t),n&&si(e,n),e}var li=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=[{type:"image",url:"".concat(host,"/assets/img/camera/").concat(localization.name,"/photo-thumb.jpg")}],this.cuepoints=localization.data.camera.cuepoints}return ri(e,null,[{key:"EVENT",get:function(){return{UPDATE:"CAppCameraData.EVENT.UPDATE"}}},{key:"instance",get:function(){return this._instance||(this._instance=new e("singletonEnforcer")),this._instance}}]),ri(e,[{key:"addPhoto",value:function(t){this.data.push({type:"image",url:t}),a()(window).trigger(e.EVENT.UPDATE)}},{key:"getLastMedia",value:function(){return this.data[this.data.length-1]}}]),e}();n("wOnQ");function hi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ci(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ui(e,t,n){return t&&ci(e.prototype,t),n&&ci(e,n),e}var di=function(){function e(t,n){hi(this,e),this.render(t,n)}return ui(e,[{key:"setButtonPosition",value:function(e){for(var t=0,n=0,i=0,s=0;s<=e;s++){var r=this.refs.button.eq(s).get(0);t+=r.getBoundingClientRect().width,i=r.getBoundingClientRect().width}for(var l=0;l<e;l++){n+=this.refs.button.eq(l).get(0).getBoundingClientRect().width}switch(t-=this.refs.button.eq(e).get(0).getBoundingClientRect().width/2,o.a.killTweensOf(this.refs.buttonVideo),1==e?o.a.fromTo(this.refs.buttonVideo,{opacity:1,scale:0},{opacity:1,scale:1,duration:.3,ease:"power3.out"}):o.a.to(this.refs.buttonVideo,{opacity:0,duration:.3,ease:"power3.out"}),this.videoShouldPlay||(t=this.firstButtonOffset,i=this.firstButtonWidth),o.a.to(this.element,{x:-t,duration:.5,ease:"power3.out"}),o.a.to(this.refs.overlay,{x:n,width:i,duration:.5,ease:"power3.out"}),e){case 0:this.videoShouldPlay&&a()(window).trigger(Vi.EVENT.PLAY_BOTTOM_VIDEO),ot.removeInApp("camera-mode");break;case 1:this.videoShouldPlay&&a()(window).trigger(Vi.EVENT.PLAY_VIDEO_MODE),ot.removeInApp("camera-mode");break;case 2:this.videoShouldPlay&&a()(window).trigger(Vi.EVENT.PLAY_MORE_MODE),ot.addInApp("camera-mode")}a()(window).trigger(fi.EVENT.UPDATE,[e]),this.videoShouldPlay=!0}},{key:"button_ON_CLICK",value:function(e){var t=a()(e.currentTarget).data("camera-mode-index");this.setButtonPosition(t)}},{key:"reset",value:function(e,t){t?(this.videoShouldPlay=!1,this.setButtonPosition(0)):ot.getInApp("camera-mode")&&"camera"==window.app&&this.setButtonPosition(0)}},{key:"render",value:function(e,t){this.element=a()(e),this.videoShouldPlay=!0,this.firstButtonWidth=80,this.firstButtonOffset=40,this.refs={content:this.element.find('*[data-ref="camera-mode-content"]'),container:this.element.find('*[data-ref="camera-mode-container"]'),button:this.element.find('*[data-ref="camera-mode-button"]'),overlay:this.element.find('*[data-ref="camera-mode-overlay"]'),buttonVideo:a()('*[data-ref="camera-button-video"]')},o.a.set(this.refs.buttonVideo,{scale:0}),a()(this.refs.button).on("click",this.button_ON_CLICK.bind(this)),a()(window).on(be.EVENT.BACK,this.reset.bind(this)),a()(window).on(fi.EVENT.RESET,this.reset.bind(this))}}]),e}(),fi=function(){function e(t,n){hi(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return ui(e,null,[{key:"EVENT",get:function(){return{UPDATE:"CAppCameraModes.EVENT.UPDATE",RESET:"CAppCameraModes.EVENT.RESET"}}}]),ui(e,[{key:"render",value:function(e,t){new di(e,t)}}]),e}(),pi=fi;function mi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gi(e,t,n){return t&&yi(e.prototype,t),n&&yi(e,n),e}var bi=function(){function e(t,n){mi(this,e),this.render(t,n)}return gi(e,[{key:"toogle",value:function(){o.a.killTweensOf([this.refs.background]);var e=this.data.text;this.state.isActive?(this.state.isActive=!1,o.a.to(this.refs.background,{scale:0},{scale:1,duration:.3,ease:"power3.out"}),e+=": Off"):(this.state.isActive=!0,o.a.fromTo(this.refs.background,{opacity:0},{opacity:1,duration:.3,ease:"power3.out"}),o.a.fromTo(this.refs.background,{scale:0},{scale:1,duration:.3,ease:"back.out"}),o.a.fromTo(this.refs.icon,{rotation:0},{rotation:360,duration:.6,ease:"power3.inOut"}),e+=": On"),this.showStatusMessage(e)}},{key:"showStatusMessage",value:function(e){e&&(this.refs.statusText.html(e),o.a.killTweensOf(this.refs.status),o.a.fromTo(this.refs.status,{opacity:1},{opacity:0,duration:.2,ease:"power3.out",delay:1}))}},{key:"auto_ON",value:function(){this.state.isActive?(this.toogle(),this.toogle(),o.a.fromTo(this.animation,{value:0},{value:1,duration:3,onComplete:this.auto_STEP1.bind(this)})):(this.toogle(),o.a.fromTo(this.animation,{value:0},{value:1,duration:3,onComplete:this.auto_STEP1.bind(this)}))}},{key:"auto_STEP1",value:function(){o.a.set(this.refs.icon,{opacity:0}),o.a.set(this.refs.iconPerson,{opacity:0}),o.a.fromTo(this.refs.iconScenery,{opacity:0},{opacity:1,duration:.6,ease:"power3.out"}),o.a.fromTo(this.animation,{value:0},{value:1,duration:2,onComplete:this.auto_STEP2.bind(this)})}},{key:"auto_STEP2",value:function(){o.a.set(this.refs.icon,{opacity:0}),o.a.set(this.refs.iconScenery,{opacity:0}),o.a.fromTo(this.refs.iconPerson,{opacity:0},{opacity:1,duration:.6,ease:"power3.out"}),o.a.fromTo(this.animation,{value:0},{value:1,duration:2,onComplete:this.auto_STEP3.bind(this)})}},{key:"auto_STEP3",value:function(){o.a.set(this.refs.iconScenery,{opacity:0}),o.a.set(this.refs.iconPerson,{opacity:0}),o.a.fromTo(this.refs.icon,{rotation:0,opacity:1},{rotation:360,opacity:1,duration:.6,ease:"power3.inOut"})}},{key:"render",value:function(e,t){this.element=a()(e),this.animation={value:0},this.state={isActive:!1},this.data={text:this.element.data("camera-scene-text")},this.refs={background:this.element.find('*[data-ref="camera-scene-background"]'),icon:this.element.find('*[data-ref="camera-scene-icon"]'),iconScenery:this.element.find('*[data-ref="camera-scene-icon-scenery"]'),iconPerson:this.element.find('*[data-ref="camera-scene-icon-person"]'),status:a()('*[data-ref="camera-scene-status"]'),statusText:a()('*[data-ref="camera-scene-status-text"]')},a()(this.element).on("click",this.toogle.bind(this)),a()(window).on(wi.EVENT.AUTO_ON,this.auto_ON.bind(this))}}]),e}(),wi=function(){function e(t,n){mi(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return gi(e,null,[{key:"EVENT",get:function(){return{AUTO_ON:"CAppCameraScene.EVENT.AUTO_ON"}}}]),gi(e,[{key:"render",value:function(e,t){new bi(e,t)}}]),e}(),vi=wi;function Ei(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ti(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ki(e,t,n){return t&&Ti(e.prototype,t),n&&Ti(e,n),e}var Ci=function(){function e(t,n){Ei(this,e),this.render(t,n)}return ki(e,[{key:"setStatusLevel",value:function(){var e=Number(this.state.statusLevel).toFixed(1);this.refs.status.html(e+"x"),o.a.set(this.refs.status,{opacity:1})}},{key:"setZoomLevel",value:function(e,t){ot.addInApp("camera-zoom"),o.a.killTweensOf(this.refs.sceneStatus),o.a.set(this.refs.sceneStatus,{opacity:0});var n,i,a=this.refs.zoomButton.find('*[data-ref="camera-settings-button-background-active"]'),s=this.refs.zoomButton.find('*[data-ref="camera-zoom-button-icon-active"]');o.a.set([a,s],{opacity:0});var r=2;switch(e){case.5:r=0;break;case 1:case 2:r=1}n=this.refs.zoomButton.eq(r).find('*[data-ref="camera-settings-button-background-active"]'),i=this.refs.zoomButton.eq(r).find('*[data-ref="camera-zoom-button-icon-active"]'),o.a.fromTo(n,{opacity:1,scale:0},{opacity:1,scale:1,duration:.3,ease:"back.out"}),o.a.fromTo(i,{opacity:0},{opacity:1,duration:.3,ease:"power3.out"}),o.a.to(this.refs.photoButton,{scale:.9,duration:.3,ease:"power3.out"});for(var l=0;l<this.refs.zoomLevelButton.length;l++){var h=this.refs.zoomLevelButton.eq(l),c=parseFloat(h.data("camera-zoom-level"));o.a.to(h,{borderColor:c==e?"#fff":"#636363",duration:.3,ease:"power3.out"})}t?(o.a.killTweensOf(this.state),o.a.to(this.state,{statusLevel:e,duration:1,ease:"power3.out",onUpdate:this.setStatusLevel.bind(this)})):(this.state.statusLevel=e,this.setStatusLevel()),clearTimeout(this.interval),this.interval=setTimeout(this.reset.bind(this),3e3)}},{key:"reset",value:function(){ot.getInApp("camera-zoom")&&(ot.removeInApp("camera-zoom"),clearTimeout(this.interval),o.a.set(this.refs.status,{opacity:0}),this.refs.overlay.css("pointer-events","auto"),o.a.set(this.refs.overlay,{opacity:1}),this.refs.extra.css("pointer-events","auto"),o.a.set(this.refs.extra,{opacity:1}),this.refs.container.css("pointer-events","none"),o.a.set(this.refs.container,{opacity:0}),o.a.fromTo(this.refs.overlay,{y:10},{y:0,duration:.3,ease:"power3.out"}),o.a.to(this.refs.photoButton,{scale:1,duration:.3,ease:"power3.out"}))}},{key:"zoomButton_ON_CLICK",value:function(e){var t=a()(e.currentTarget),n=parseFloat(t.data("camera-zoom-level")),i=t.data("camera-zoom-animation");this.refs.overlay.css("pointer-events","none"),o.a.set(this.refs.overlay,{opacity:0}),this.refs.extra.css("pointer-events","none"),o.a.set(this.refs.extra,{opacity:0}),this.refs.container.css("pointer-events","auto"),o.a.set(this.refs.container,{opacity:1}),y.instance.trackPage("Camera","/app/camera/zoom/level-".concat(n)),this.setZoomLevel(n,i)}},{key:"auto_ON",value:function(){ot.getInApp("camera-filters")||(a()(window).trigger(Wt.EVENT.LOCK),this.auto_step1())}},{key:"auto_step1",value:function(){this.element.css("pointer-events","none"),this.refs.zoomButton.eq(0).click(),o.a.to(this,{duration:1,onComplete:this.auto_step2.bind(this)})}},{key:"auto_step2",value:function(){o.a.to(this,{duration:1,onComplete:this.auto_step3.bind(this)})}},{key:"auto_step3",value:function(){this.refs.zoomLevelButton.eq(3).click(),o.a.to(this,{duration:2,onComplete:this.auto_step4.bind(this)})}},{key:"auto_step4",value:function(){a()(window).trigger(Wt.EVENT.UNLOCK),this.reset(),this.element.css("pointer-events","auto")}},{key:"render",value:function(e,t){this.element=a()(e),this.interval=null,this.state={statusLevel:1},this.refs={status:this.element.find('*[data-ref="camera-zoom-status"]'),options:this.element.find('*[data-ref="camera-zoom-overlay"]'),overlay:this.element.find('*[data-ref="camera-zoom-overlay"]'),extra:this.element.find('*[data-ref="camera-zoom-extra"]'),container:this.element.find('*[data-ref="camera-zoom-container"]'),zoomButton:this.element.find('*[data-ref="camera-zoom-button"]'),zoomLevelButton:this.element.find('*[data-ref="camera-zoom-level"]'),photoButton:this.element.find('*[data-ref="camera-button-photo"]'),sceneStatus:this.element.find('*[data-ref="camera-scene-status"]')},o.a.set(this.refs.status,{opacity:0}),a()(this.refs.zoomButton).on("click",this.zoomButton_ON_CLICK.bind(this)),a()(this.refs.zoomLevelButton).on("click",this.zoomButton_ON_CLICK.bind(this)),a()(window).on(be.EVENT.BACK,this.reset.bind(this)),a()(window).on(Oi.EVENT.AUTO_ON,this.auto_ON.bind(this))}}]),e}(),Oi=function(){function e(t,n){Ei(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return ki(e,null,[{key:"EVENT",get:function(){return{AUTO_ON:"CAppCameraZoom.EVENT.AUTO_ON"}}}]),ki(e,[{key:"render",value:function(e,t){new Ci(e,t)}}]),e}(),Pi=Oi;function _i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ni(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Si(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ai(e,t,n){return t&&Si(e.prototype,t),n&&Si(e,n),e}var Ii=function(){function e(t,n){Ni(this,e),this.render(t,n)}return Ai(e,[{key:"shot",value:function(){if(y.instance.trackPage("Camera","/app/camera/take-photo"),document.getElementById("video-user")){o.a.killTweensOf(this.refs.foreground),o.a.fromTo(this.refs.foreground,{opacity:1},{opacity:0,duration:.3,delay:.2,ease:"power3.out"});var e,t,n,i=document.getElementById("video-user"),a=this.refs.canvas.get(0),s=a.getContext("2d");if(n=i.videoWidth/i.videoHeight,e=i.videoWidth-100,t=parseInt(e/n,10),a.width=e,a.height=t,s.fillRect(0,0,e,t),window.localStream){s.drawImage(i,0,0,e,t);var r=a.toDataURL("image/jpg");li.instance.addPhoto(r)}else li.instance.addPhoto("".concat(host,"/assets/img/camera/").concat(localization.name,"/photo-thumb.jpg"))}}},{key:"buttonLastImage_ON_CLICK",value:function(e){y.instance.trackPage("Camera","/app/camera/lastest-images")}},{key:"buttonRotate_ON_CLICK",value:function(e){o.a.killTweensOf(this.refs.rotationStatus),o.a.fromTo(this.refs.rotationStatus,{opacity:1},{opacity:0,duration:.2,ease:"power3.out",delay:1}),y.instance.trackPage("Camera","/app/camera/change-camera")}},{key:"buttonShot_ON_CLICK",value:function(e){this.shot()}},{key:"updateLastImage",value:function(){var e=li.instance.getLastMedia();this.refs.lastImage.css("background-image","url(".concat(e.url,")"))}},{key:"playVideo",value:function(e){var t;switch(this.player_ENABLE_STANDBY(),""!=this.state.video&&this.pauseVideos(),this.cuepoints=li.instance.cuepoints[e],this.counter=0,e){case"intro":t=this.refs.playerIntro,o.a.set(this.refs.backgroundBottom,{y:0,opacity:0}),o.a.set(this.refs.backgroundTop,{opacity:1}),y.instance.trackPage("Camera","/app/camera/intro-1");break;case"bottom":t=this.refs.playerBottom,o.a.set(this.refs.backgroundBottom,{y:0,opacity:0}),o.a.set(this.refs.backgroundTop,{opacity:1}),y.instance.trackPage("Camera","/app/camera/photo");break;case"video-mode":t=this.refs.playerVideoMode,o.a.set(this.refs.backgroundBottom,{y:0,opacity:0}),o.a.set(this.refs.backgroundTop,{opacity:1}),y.instance.trackPage("Camera","/app/camera/video");break;case"more-mode":t=this.refs.playerMoreMode,y.instance.trackPage("Camera","/app/camera/more")}t&&(this.currentPlayer=this.refs.player,this.currentPlayer.src="",this.currentPlayer.load(),this.currentPlayer.src=t.data("src"),this.currentPlayer.load(),this.hideVideos(),o.a.killTweensOf(this.currentPlayer),o.a.set(this.currentPlayer,{opacity:1,ease:"power3.out"}),this.currentPlayer.currentTime=0,this.currentPlayer.play(),this.state.video=e)}},{key:"hideVideos",value:function(){for(var e=0;e<this.videos.length;e++)this.videos[e]}},{key:"pauseVideos",value:function(){for(var e=0;e<this.videos.length;e++){var t=this.videos[e];t.paused||t.pause()}}},{key:"init",value:function(e,t){if("camera"==t)if(this.useCameraAsBackground)if(this.isCameraPermissionsAsked)this.playVideo("intro"),this.showFallbackMessage(),this.cameraAvailable&&o.a.delayedCall(2,this.delayUserCamera.bind(this));else{this.playVideo("intro"),this.isCameraPermissionsAsked=!0,this.refs.player.pause();navigator.mediaDevices.getUserMedia({video:{width:1280,height:720,facingMode:"environment"}}).then(function(e){this.cameraAvailable=!0;var t=document.getElementById("video-user");window.localStream=e,t.srcObject=window.localStream,t.muted=!0,t.onloadedmetadata=function(e){t.play(),this.refs.player.play(),this.showFallbackMessage()}.bind(this)}.bind(this)).catch(function(e){this.refs.player.play(),this.showFallbackMessage()}.bind(this))}else this.playVideo("intro"),this.showFallbackMessage()}},{key:"showFallbackMessage",value:function(){}},{key:"delayUserCamera",value:function(){if(!window.localStream){navigator.mediaDevices.getUserMedia({video:{width:1280,height:720,facingMode:"environment"}}).then(function(e){var t=document.getElementById("video-user");window.localStream=e,t.srcObject=window.localStream,t.muted=!0,t.onloadedmetadata=function(e){t.play()}.bind(this)}.bind(this)).catch(function(e){}.bind(this))}}},{key:"onInit_COMPLETE",value:function(){}},{key:"dispose",value:function(e,t){"camera"==t&&(o.a.killTweensOf(this.animation),this.pauseVideos(),this.hideVideos(),o.a.set(this.refs.backgroundBottom,{y:0,opacity:0}),o.a.set(this.refs.backgroundTop,{opacity:1}),this.player_WAITING(),this.player_ENABLE_STANDBY(),this.state.video="",window.localStream&&(window.localStream.getVideoTracks().forEach((function(e){return e.stop()})),window.localStream=null),a()(window).trigger(pi.EVENT.RESET,!0))}},{key:"on_PLAY_TOP_VIDEO",value:function(e){}},{key:"on_PLAY_BOTTOM_VIDEO",value:function(e){this.player_WAITING(),this.playVideo("bottom")}},{key:"on_PLAY_VIDEO_MODE",value:function(e){this.player_WAITING(),this.playVideo("video-mode")}},{key:"on_PLAY_MORE_MODE",value:function(e){this.player_WAITING(),this.playVideo("more-mode")}},{key:"mode_UPDATE",value:function(e,t){2==t?(this.refs.cameraMore.css("display","block"),this.refs.cameraSettings.css("visibility","hidden"),this.refs.cameraZoom.css("visibility","hidden"),this.refs.cameraShooter.css("visibility","hidden"),o.a.set(this.refs.backgroundTop,{opacity:1}),o.a.set(this.refs.backgroundBottom,{y:70,opacity:1})):(this.refs.cameraMore.css("display","none"),this.refs.cameraSettings.css("visibility","visible"),this.refs.cameraZoom.css("visibility","visible"),this.refs.cameraShooter.css("visibility","visible"),this.on_UPDATE_RATIO(null,this.currentMode))}},{key:"on_OPEN_FILTER",value:function(){ot.getInApp("camera-filters")||ot.getInApp("camera-zoom")||(this.refs.cameraFilters.css("display","block"),this.refs.cameraModes.css("visibility","hidden"),this.refs.cameraSettings.css("visibility","hidden"),this.refs.cameraZoom.css("visibility","hidden"),this.refs.buttonLastImage.css("visibility","hidden"),this.refs.buttonRotate.css("visibility","hidden"),this.refs.cameraTitle.css("display","block"),o.a.killTweensOf(this.refs.buttonShot),o.a.to(this.refs.buttonShot,{scale:.9,duration:.3,ease:"power3.out"}),o.a.set(this.refs.backgroundBottom,{y:0}),ot.addInApp("camera-filters"),this.on_UPDATE_FILTER())}},{key:"on_UPDATE_FILTER",value:function(){ot.getInApp("camera-filters")&&(clearInterval(this.filtersInterval),this.filtersInterval=setTimeout(this.reset.bind(this),8e3))}},{key:"on_UPDATE_RATIO",value:function(e,t){switch(3==t?o.a.set(this.refs.backgroundTop,{opacity:0}):o.a.set(this.refs.backgroundTop,{opacity:1}),t){case 0:o.a.set(this.refs.backgroundBottom,{y:70});break;case 1:case 3:o.a.set(this.refs.backgroundBottom,{y:70,opacity:.2});break;case 2:o.a.set(this.refs.backgroundBottom,{y:0,opacity:1})}this.currentMode=t}},{key:"playerIntro_ENDED",value:function(){"intro"==this.state.video?this.playVideo("bottom"):this.player_ENABLE_STANDBY()}},{key:"video_TIME_UPDATE",value:function(){if(this.currentPlayer){var e=this.currentPlayer.currentTime,t=this.cuepoints[this.counter];t&&e>=t.time&&(this.counter++,this.video_DISPATCH_CUE_POINT(t.label))}}},{key:"video_DISPATCH_CUE_POINT",value:function(e){switch(e){case"scene-optimizer":a()(window).trigger(vi.EVENT.AUTO_ON);break;case"zoom":a()(window).trigger(Pi.EVENT.AUTO_ON);break;case"ratio":a()(window).trigger(Yi.EVENT.RATIO_AUTO_ON);break;case"filters":a()(window).trigger(Yi.EVENT.FILTERS_AUTO_ON);break;case"shot":a()(window).trigger(xi.EVENT.SHOT_AUTO_ON);break;case"pulse-settings":this.pulseIcon("settings");break;case"pulse-flash":this.pulseIcon("flash");break;case"pulse-timer":this.pulseIcon("timer");break;case"pulse-mode":this.pulseIcon("mode");break;case"pulse-filters":this.pulseIcon("filters");break;case"single-take":this.pulseButton("button-text-single-take");break;case"more-menu":this.pulseButton("button-text-more-menu")}}},{key:"pulseButton",value:function(e){var t,n=this.element.find('*[data-ref="'.concat(e,'"]'));o.a.set(n,{color:"#ffeb00"}),o.a.to(n,(_i(t={color:1},"color","#ffffff"),_i(t,"duration",.6),_i(t,"delay",.5),_i(t,"ease","power3.out"),t))}},{key:"pulseIcon",value:function(e){var t=this.element.find('*[data-camera-settings-button-id="'.concat(e,'"]'));o.a.set(t,{opacity:0,scale:1.2}),o.a.to(t,{opacity:1,scale:1,duration:.6,delay:.2,ease:"power3.out"})}},{key:"on_SHOT_AUTO_ON",value:function(){o.a.set(this.refs.autoShotBorder,{opacity:1}),o.a.to(this.refs.autoShotBorder,{opacity:0,duration:.6,delay:1,ease:"power3.out",onComplete:this.on_SHOT_AUTO_ON_step1.bind(this)})}},{key:"on_SHOT_AUTO_ON_step1",value:function(){o.a.set(this.refs.autoShotContainer,{scale:1,opacity:1}),o.a.set([this.refs.autoShotIcon1,this.refs.autoShotIcon2,this.refs.autoShotIcon3,this.refs.autoShotIcon4],{opacity:.2}),this.on_SHOT_AUTO_ON_step2()}},{key:"on_SHOT_AUTO_ON_step2",value:function(){o.a.to([this.refs.autoShotIcon1,this.refs.autoShotIcon2,this.refs.autoShotIcon3,this.refs.autoShotIcon4],{opacity:1,duration:.3,delay:0,ease:"power3.out",stagger:.3,onComplete:this.on_SHOT_AUTO_ON_step3.bind(this)})}},{key:"on_SHOT_AUTO_ON_step3",value:function(){o.a.to(this.refs.autoShotContainer,{scale:.3,duration:.6,opacity:0,ease:"power3.out"}),this.shot(),li.instance.addPhoto("".concat(host,"/assets/img/camera/").concat(localization.name,"/photo-thumb.jpg"))}},{key:"player_WAITING",value:function(e){this.isBuffering||(this.isBuffering=!0,o.a.killTweensOf(this.refs.preloader),o.a.to(this.refs.preloader,{opacity:1,duration:.3,ease:"power3.out"}))}},{key:"player_CAN_PLAY",value:function(e){this.isBuffering&&(this.isBuffering=!1,o.a.killTweensOf(this.refs.preloader),o.a.to(this.refs.preloader,{opacity:0,duration:.3,ease:"power3.out"}),this.player_DISABLE_STANDBY())}},{key:"player_ENABLE_STANDBY",value:function(){this.isStandby||(this.isStandby=!0,o.a.killTweensOf(this.refs.playerSelf),o.a.to(this.refs.playerSelf,{opacity:1,duration:.3,ease:"power3.out"}))}},{key:"player_DISABLE_STANDBY",value:function(){this.isStandby&&(this.isStandby=!1,o.a.killTweensOf(this.refs.playerSelf),o.a.to(this.refs.playerSelf,{opacity:0,duration:.3,ease:"power3.out"}))}},{key:"controls_CLICK",value:function(){this.isStandby||this.isBuffering||(this.refs.player.paused?(o.a.set(this.refs.controlsButtonPause,{display:"none",opacity:0}),o.a.fromTo(this.refs.controlsButtonPlay,{display:"block",opacity:1,scale:1.2},{scale:1,duration:1,opacity:0,ease:"power3.inOut"}),this.refs.player.play()):(o.a.set(this.refs.controlsButtonPlay,{display:"none",opacity:0}),o.a.fromTo(this.refs.controlsButtonPause,{display:"block",opacity:1,scale:1.2},{scale:1,duration:1,opacity:0,ease:"power3.inOut"}),this.refs.player.pause()))}},{key:"reset",value:function(){ot.getInApp("camera-filters")&&(this.on_UPDATE_RATIO(null,this.currentMode),clearInterval(this.filtersInterval),ot.removeInApp("camera-filters"),this.refs.cameraFilters.css("display","none"),this.refs.cameraModes.css("visibility","visible"),this.refs.cameraSettings.css("visibility","visible"),this.refs.cameraZoom.css("visibility","visible"),this.refs.buttonLastImage.css("visibility","visible"),this.refs.buttonRotate.css("visibility","visible"),this.refs.cameraTitle.css("display","none"),o.a.killTweensOf(this.refs.buttonShot),o.a.to(this.refs.buttonShot,{scale:1,duration:.3,ease:"power3.out"}))}},{key:"render",value:function(e,t){if(this.element=a()(e),this.filtersInterval,this.counter=0,this.cuepoints,this.isBuffering=!1,this.isStandby=!1,this.state={video:""},this.animation={value:0},this.currentMode=0,this.isCameraPermissionsAsked=!1,this.useCameraAsBackground=!0,this.cameraAvailable=!1,this.fallbackMessageCounter=0,this.refs={canvas:this.element.find('*[data-ref="app-camera-canvas"]'),video:this.element.find('*[data-component="app-camera-video"]'),foreground:this.element.find('*[data-ref="app-camera-foreground"]'),lastImage:this.element.find('*[data-ref="app-camera-last-image"]'),buttonLastImage:this.element.find('*[data-ref="app-camera-last-image"]'),buttonShot:this.element.find('*[data-ref="camera-button-photo"]'),buttonRotate:this.element.find('*[data-ref="camera-button-rotate"]'),player:this.element.find('*[data-ref="app-camera-general-player"]').get(0),playerIntro:this.element.find('*[data-ref="app-camera-player-intro"]'),playerTop:this.element.find('*[data-ref="app-camera-player-top"]'),playerBottom:this.element.find('*[data-ref="app-camera-player-bottom"]'),playerVideoMode:this.element.find('*[data-ref="app-camera-player-video-mode"]'),playerMoreMode:this.element.find('*[data-ref="app-camera-player-more-mode"]'),playerUser:this.element.find('*[data-ref="app-camera-player-user"]'),playerSelf:this.element.find('*[data-ref="app-camera-self"]'),cameraMore:this.element.find('*[data-ref="camera-more"]'),cameraFilters:this.element.find('*[data-ref="camera-filters"]'),cameraModes:this.element.find('*[data-ref="camera-zoom-overlay"]'),cameraTitle:this.element.find('*[data-ref="camera-title"]'),backgroundBottom:this.element.find('*[data-ref="camera-background-bottom"]'),backgroundTop:this.element.find('*[data-ref="camera-background-top"]'),cameraSettings:this.element.find('*[data-ref="camera-settings"]'),cameraZoom:this.element.find('*[data-ref="camera-zoom"]'),cameraShooter:this.element.find('*[data-ref="camera-shooter"]'),preloader:this.element.find('*[data-ref="app-camera-preloader"]'),controls:this.element.find('*[data-ref="app-camera-controls"]'),controlsButtonPlay:this.element.find('*[data-ref="app-camera-controls-button-play"]'),controlsButtonPause:this.element.find('*[data-ref="app-camera-controls-button-pause"]'),shotAudio:this.element.find('*[data-ref="app-camera-shot"]').get(0),autoShotContainer:this.element.find('*[data-ref="app-camara-auto-shot-icon-container"]'),autoShotIcon1:this.element.find('*[data-ref="app-camara-auto-shot-icon-1"]'),autoShotIcon2:this.element.find('*[data-ref="app-camara-auto-shot-icon-2"]'),autoShotIcon3:this.element.find('*[data-ref="app-camara-auto-shot-icon-3"]'),autoShotIcon4:this.element.find('*[data-ref="app-camara-auto-shot-icon-4"]'),autoShotBorder:this.element.find('*[data-ref="app-camara-auto-shot-icon-border"]'),rotationStatus:this.element.find('*[data-ref="camera-rotation-status"]')},this.videos=[this.refs.player],this.muteAll=!1,this.muteAll)for(var n=0;n<this.videos.length;n++){this.videos[n].muted=!0}this.refs.cameraMore.css("display","none"),o.a.set(this.refs.backgroundBottom,{y:70}),this.updateLastImage(),a()(window).on(li.EVENT.UPDATE,this.updateLastImage.bind(this)),a()(this.refs.buttonShot).on("click",this.buttonShot_ON_CLICK.bind(this)),a()(this.refs.buttonLastImage).on("click",this.buttonLastImage_ON_CLICK.bind(this)),a()(this.refs.buttonRotate).on("click",this.buttonRotate_ON_CLICK.bind(this)),a()(window).on(ot.EVENT.INIT,this.init.bind(this)),a()(window).on(ot.EVENT.DISPOSE,this.dispose.bind(this)),a()(window).on(xi.EVENT.PLAY_TOP_VIDEO,this.on_PLAY_TOP_VIDEO.bind(this)),a()(window).on(xi.EVENT.PLAY_BOTTOM_VIDEO,this.on_PLAY_BOTTOM_VIDEO.bind(this)),a()(window).on(xi.EVENT.PLAY_VIDEO_MODE,this.on_PLAY_VIDEO_MODE.bind(this)),a()(window).on(xi.EVENT.PLAY_MORE_MODE,this.on_PLAY_MORE_MODE.bind(this)),a()(window).on(xi.EVENT.OPEN_FILTER,this.on_OPEN_FILTER.bind(this)),a()(window).on(xi.EVENT.UPDATE_FILTER,this.on_UPDATE_FILTER.bind(this)),a()(window).on(xi.EVENT.UPDATE_RATIO,this.on_UPDATE_RATIO.bind(this)),a()(window).on(xi.EVENT.SHOT_AUTO_ON,this.on_SHOT_AUTO_ON.bind(this)),a()(window).on(pi.EVENT.UPDATE,this.mode_UPDATE.bind(this)),a()(window).on(be.EVENT.BACK,this.reset.bind(this)),this.refs.controls.on("click",this.controls_CLICK.bind(this)),this.player_WAITING(),this.player_ENABLE_STANDBY(),o.a.set(this.refs.backgroundBottom,{y:0,opacity:0}),o.a.set(this.refs.backgroundTop,{opacity:1});var i=this.refs.player;i.addEventListener("ended",this.playerIntro_ENDED.bind(this)),i.addEventListener("timeupdate",this.video_TIME_UPDATE.bind(this)),i.addEventListener("waiting",this.player_WAITING.bind(this)),i.addEventListener("seeking",this.player_WAITING.bind(this)),i.addEventListener("canplaythrough",this.player_CAN_PLAY.bind(this)),i.addEventListener("playing",this.player_CAN_PLAY.bind(this))}}]),e}(),xi=function(){function e(t,n){Ni(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ai(e,null,[{key:"EVENT",get:function(){return{PLAY_TOP_VIDEO:"CAppCamera.EVENT.PLAY_TOP_VIDEO",PLAY_BOTTOM_VIDEO:"CAppCamera.EVENT.PLAY_BOTTOM_VIDEO",PLAY_VIDEO_MODE:"CAppCamera.EVENT.PLAY_VIDEO_MODE",PLAY_MORE_MODE:"CAppCamera.EVENT.PLAY_MORE_MODE",OPEN_FILTER:"CAppCamera.EVENT.OPEN_FILTER",UPDATE_FILTER:"CAppCamera.EVENT.UPDATE_FILTER",RESET_FILTER:"CAppCamera.EVENT.RESET_FILTER",UPDATE_RATIO:"CAppCamera.EVENT.UPDATE_RATIO",SHOT_AUTO_ON:"CAppCamera.EVENT.SHOT_AUTO_ON"}}}]),Ai(e,[{key:"render",value:function(e,t){new Ii(e,t)}}]),e}(),Vi=xi;function Li(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Di(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ri(e,t,n){return t&&Di(e.prototype,t),n&&Di(e,n),e}var Mi=function(){function e(t,n){Li(this,e),this.render(t,n)}return Ri(e,[{key:"removeFilters",value:function(){for(var e=0;e<this.filters.length;e++){var t=this.filters[e];this.refs.video.removeClass(t)}}},{key:"setButtonIndex",value:function(e,t){var n=-this.refs.buttonContainer.eq(0).get(0).getBoundingClientRect().width*e;o.a.killTweensOf(this.refs.container),o.a.to(this.refs.container,{x:n,duration:t,ease:"power2.out"});var i=this.refs.buttonContainer.eq(e).data("camera-filter-name");this.removeFilters(),i&&this.refs.video.addClass(i),y.instance.trackPage("Camera","/app/camera/filter/item-".concat(e+1)),a()(window).trigger(Vi.EVENT.UPDATE_FILTER),this.positionX=n}},{key:"on_TOUCH_END",value:function(e){var t=this.positionX+this.currentTouchPosition.x,n=this.refs.buttonContainer.eq(0).get(0).getBoundingClientRect(),i=Math.round(Math.abs(t)/n.width);i=(i=i<0?0:i)>this.refs.buttonContainer.length-1?this.refs.buttonContainer.length-1:i,this.setButtonIndex(i,.2),a()(document).off("touchend"),a()(document).off("touchmove"),a()(window).trigger(Vi.EVENT.UPDATE_FILTER)}},{key:"on_TOUCH_MOVE",value:function(e){var t=e.touches[0]||e.changedTouches[0];this.currentTouchPosition={x:t.pageX-this.initialTouchPosition.x,y:t.pageY-this.initialTouchPosition.y},Math.abs(this.currentTouchPosition.x)>20&&(this.isMoving=!0);var n=-this.refs.buttonContainer.eq(0).get(0).getBoundingClientRect().width*(this.refs.buttonContainer.length-1),i=this.positionX+this.currentTouchPosition.x;i=(i=i>0?0:i)<n?n:i,o.a.to(this.refs.container,{x:i,duration:.2}),a()(window).trigger(Vi.EVENT.UPDATE_FILTER)}},{key:"on_TOUCH_START",value:function(e){this.isMoving=!1;var t=e.touches[0]||e.changedTouches[0];this.initialTouchPosition={x:t.pageX,y:t.pageY},this.currentTouchPosition={x:t.pageX-this.initialTouchPosition.x,y:t.pageY-this.initialTouchPosition.y},a()(document).on("touchend",this.on_TOUCH_END.bind(this)),a()(document).on("touchmove",this.on_TOUCH_MOVE.bind(this)),a()(window).trigger(Vi.EVENT.UPDATE_FILTER)}},{key:"buttonFilter_CLICK",value:function(e){if(!this.isMoving){var t=a()(e.currentTarget).data("camera-filter-button-index");this.setButtonIndex(t,.6)}}},{key:"reset",value:function(){this.setButtonIndex(0,0)}},{key:"auto",value:function(e,t){var n=1;0==t&&(n=0),this.setButtonIndex(t,n)}},{key:"render",value:function(e,t){this.element=a()(e),this.positionX=0,this.isMoving=!1,this.refs={hit:this.element.find('*[data-ref="camera-filters-hit"]'),container:this.element.find('*[data-ref="camera-filters-container"]'),buttonContainer:this.element.find('*[data-ref="camera-filter-button-container"]'),buttonFilter:this.element.find('*[data-ref="camera-filter-button"]'),video:a()('*[data-component="app-camera-video"]')},this.filters=[];for(var n=0;n<this.refs.buttonContainer.length;n++){var i=this.refs.buttonContainer.eq(n).data("camera-filter-name");i&&this.filters.push(i)}this.refs.buttonFilter.on("click",this.buttonFilter_CLICK.bind(this)),this.refs.hit.on("touchstart",this.on_TOUCH_START.bind(this)),a()(window).on(Vi.EVENT.RESET_FILTER,this.reset.bind(this)),a()(window).on(Bi.EVENT.AUTO_FILTER,this.auto.bind(this))}}]),e}(),Bi=function(){function e(t,n){Li(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ri(e,null,[{key:"EVENT",get:function(){return{UPDATE:"CAppCameraFilters.EVENT.UPDATE",AUTO_FILTER:"CAppCameraFilters.EVENT.AUTO_FILTER"}}}]),Ri(e,[{key:"render",value:function(e,t){new Mi(e,t)}}]),e}(),Ui=Bi;function Hi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ki(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qi(e,t,n){return t&&Ki(e.prototype,t),n&&Ki(e,n),e}var Fi=function(){function e(t,n){Hi(this,e),this.render(t,n)}return qi(e,[{key:"openModal",value:function(e){var t=this.element.find('*[data-camera-settings-id="'.concat(e,'"]'));if(y.instance.trackPage("Camera","/app/camera/settings/".concat(e)),a()(window).trigger(Vi.EVENT.PLAY_TOP_VIDEO),t.length){ot.addInApp("camera-settings"),this.state.currentModal=e,o.a.set(this.refs.container,{opacity:0}),this.refs.container.css("pointer-events","none"),t.css("display","block"),o.a.fromTo(t,{opacity:0},{opacity:1,duration:.3,ease:"power3.out"});for(var n=t.find('*[data-ref="camera-modal-button"]'),i=0,s=0;s<n.length;s++){n.eq(s).data("index",s);var r=n.eq(s).get(0),l=r.getBoundingClientRect(),h=l.x+l.width/2,c=window.innerWidth/2-h;o.a.fromTo(r,{x:c,opacity:1},{x:0,opacity:1,duration:.3,ease:"power2.out"}),1==n.eq(s).find('*[data-ref="camera-modal-button-active"]').css("opacity")&&(i=s)}var u=n.eq(i).data("text");this.showStatusMessage(u),clearInterval(this.interval),this.interval=setTimeout(this.reset.bind(this),5e3)}}},{key:"closeModal",value:function(e){var t=this.state.currentModal;if(""!=t){var n=this.element.find('*[data-camera-settings-id="'.concat(t,'"]'));if(n.length){ot.removeInApp("camera-settings"),clearInterval(this.interval);var i=e.data("index"),s=n.find('*[data-ref="camera-modal-button"]'),r=n.find('*[data-ref="camera-modal-button-normal"]'),l=n.find('*[data-ref="camera-modal-button-active"]');o.a.set(r,{opacity:1}),o.a.set(l,{opacity:0}),o.a.set(s.eq(i).find('*[data-ref="camera-modal-button-active"]'),{opacity:1}),o.a.set(s.eq(i).find('*[data-ref="camera-modal-button-normal"]'),{opacity:0});var h=this.element.find('*[data-camera-settings-button-id="'.concat(this.state.currentModal,'"]')).find('*[data-ref="camera-settings-button-icon"]');switch(o.a.set(h,{opacity:0}),o.a.set(h.eq(i),{opacity:1}),this.state.currentModal="",n.css("display","none"),t){case"mode":a()(window).trigger(Vi.EVENT.UPDATE_RATIO,[i])}o.a.set(this.refs.container,{opacity:1}),this.refs.container.css("pointer-events","auto")}}}},{key:"activeButton",value:function(e,t){var n=0;t.data("active-index")||(n=1);var i=t.find('*[data-ref="camera-settings-button-icon"]');o.a.set(i,{opacity:0}),o.a.set(i.eq(n),{opacity:1});var s=i.eq(n).data("text");switch(e){case"filters":1==n?a()(window).trigger(Vi.EVENT.OPEN_FILTER):a()(window).trigger(Vi.EVENT.RESET_FILTER)}this.showStatusMessage(s),t.data("active-index",n)}},{key:"button_ON_CLICK",value:function(e){var t=a()(e.currentTarget),n=t.data("camera-settings-button-type"),i=t.data("camera-settings-button-id"),s=t.find('*[data-ref="camera-settings-button-background"]');switch(s.length&&(o.a.killTweensOf(s),o.a.fromTo(s,{opacity:1},{opacity:0,duration:.6,delay:.1,ease:"power3.out"})),n){case"modal":this.openModal(i);case"normal":this.activeButton(i,t)}}},{key:"modalButton_ON_CLICK",value:function(e){var t=a()(e.currentTarget),n=t.data("text");this.showStatusMessage(n),this.closeModal(t)}},{key:"showStatusMessage",value:function(e){e&&(this.refs.statusText.html(e),o.a.killTweensOf(this.refs.status),o.a.fromTo(this.refs.status,{opacity:1},{opacity:0,duration:.2,ease:"power3.out",delay:1}))}},{key:"reset",value:function(){if(ot.getInApp("camera-settings")){var e=this.state.currentModal;if(""!=e){var t=this.element.find('*[data-camera-settings-id="'.concat(e,'"]'));if(t.length){ot.removeInApp("camera-settings"),clearInterval(this.interval);for(var n=null,i=t.find('*[data-ref="camera-modal-button"]'),a=0;a<i.length;a++)1==i.eq(a).find('*[data-ref="camera-modal-button-active"]').css("opacity")&&(n=i.eq(a));this.closeModal(n)}}}}},{key:"ratio_AUTO_ON",value:function(){ot.getInApp("camera-settings")||ot.getInApp("camera-filters")||ot.getInApp("camera-zoom")||(a()(window).trigger(Wt.EVENT.LOCK),this.ratio_auto_step1())}},{key:"ratio_auto_step1",value:function(){this.element.css("pointer-events","none"),this.refs.buttons.eq(3).click();this.element.find('*[data-camera-settings-id="mode"]').find('*[data-ref="camera-modal-button"]');o.a.to(this,{duration:2,onComplete:this.ratio_auto_step2.bind(this)})}},{key:"ratio_auto_step2",value:function(){this.element.find('*[data-camera-settings-id="mode"]').find('*[data-ref="camera-modal-button"]').eq(3).click(),this.reset(),this.element.css("pointer-events","auto"),a()(window).trigger(Wt.EVENT.UNLOCK)}},{key:"filters_AUTO_ON",value:function(){ot.getInApp("camera-settings")||ot.getInApp("camera-filters")||ot.getInApp("camera-zoom")||(1==this.refs.buttons.eq(5).find('*[data-ref="camera-settings-button-icon"]').eq(1).css("opacity")&&this.refs.buttons.eq(5).click(),this.refs.buttons.eq(5).click())}},{key:"filters_auto_step1",value:function(){a()(window).trigger(Ui.EVENT.AUTO_FILTER,[3])}},{key:"on_UPDATE_RATIO",value:function(e,t){this.element.find('*[data-camera-settings-id="mode"]').find('*[data-ref="camera-modal-button"]').eq(t).click()}},{key:"render",value:function(e,t){this.element=a()(e),this.interval=null,this.state={currentModal:""},this.refs={container:this.element.find('*[data-ref="camera-settings-container"]'),buttons:this.element.find('*[data-ref="camera-settings-button"]'),modals:this.element.find('*[data-ref="camera-settings-modal"]'),status:this.element.find('*[data-ref="camera-settings-status"]'),statusText:this.element.find('*[data-ref="camera-settings-status-text"]'),modalButtons:this.element.find('*[data-ref="camera-modal-button"]'),modalButtonActive:this.element.find('*[data-ref="camera-modal-button-active"]')},this.refs.modals.css("display","none"),this.refs.modalButtonActive.css("opacity","0"),this.refs.status.css("opacity","0");for(var n=0;n<this.refs.modals.length;n++){var i=this.refs.modals.eq(n).find('*[data-ref="camera-modal-button"]'),s=i.find('*[data-ref="camera-modal-button-normal"]').eq(0),r=i.find('*[data-ref="camera-modal-button-active"]').eq(0);o.a.set(r,{opacity:1}),o.a.set(s,{opacity:0})}a()(this.refs.buttons).on("click",this.button_ON_CLICK.bind(this)),a()(this.refs.modalButtons).on("click",this.modalButton_ON_CLICK.bind(this)),a()(window).on(be.EVENT.BACK,this.reset.bind(this)),a()(window).on(ji.EVENT.RATIO_AUTO_ON,this.ratio_AUTO_ON.bind(this)),a()(window).on(ji.EVENT.FILTERS_AUTO_ON,this.filters_AUTO_ON.bind(this)),a()(window).on(ji.EVENT.UPDATE_RATIO,this.on_UPDATE_RATIO.bind(this))}}]),e}(),ji=function(){function e(t,n){Hi(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return qi(e,null,[{key:"EVENT",get:function(){return{RATIO_AUTO_ON:"CAppCameraSettings.EVENT.RATIO_AUTO_ON",FILTERS_AUTO_ON:"CAppCameraSettings.EVENT.FILTERS_AUTO_ON",UPDATE_RATIO:"CAppCameraSettings.EVENT.UPDATE_RATIO"}}}]),qi(e,[{key:"render",value:function(e,t){new Fi(e,t)}}]),e}(),Yi=ji;function Wi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xi(e,t,n){return t&&Gi(e.prototype,t),n&&Gi(e,n),e}var zi=function(){function e(t,n){Wi(this,e),this.render(t,n)}return Xi(e,[{key:"loaded",value:function(e){if(200==e.status){var t=e.data.data,n=(t=t[Math.floor(Math.random()*t.length)]).images.downsized_large.url;this.element.css("background-image","url(".concat(n,")"))}else this.error()}},{key:"error",value:function(){}},{key:"render",value:function(e,t){this.element=a()(e);var n="https://web.archive.org/web/20220119053530/https://api.giphy.com/v1/gifs/trending?api_key=".concat("PtreBGCGl8nQYbjcyl5sGph5ywyAoDeB","&limit=").concat(5,"&rating=g");On.a.get(n).then(this.loaded.bind(this)).catch(this.error.bind(this))}}]),e}(),Ji=function(){function e(t,n){Wi(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Xi(e,null,[{key:"EVENT",get:function(){return{}}}]),Xi(e,[{key:"render",value:function(e,t){new zi(e,t)}}]),e}();function Zi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $i(e,t,n){return t&&Qi(e.prototype,t),n&&Qi(e,n),e}var ea=function(){function e(t,n){Zi(this,e),this.render(t,n)}return $i(e,[{key:"loaded",value:function(){this.element.is("img")?this.element.attr("src",this.data.src):this.element.css("background-image",'url("'.concat(this.data.src,'")'))}},{key:"preload",value:function(){this.img||(this.img=new Image,this.img.src=this.data.src,this.img.onerror=function(){},this.img.onload=this.loaded.bind(this))}},{key:"render",value:function(e,t){this.element=a()(e),this.img=null,this.data={src:this.element.data("src")},a()(window).on(ta.EVENT.START,this.preload.bind(this))}}]),e}(),ta=function(){function e(t,n){Zi(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return $i(e,null,[{key:"EVENT",get:function(){return{START:"CImageLoader.EVENT.START"}}}]),$i(e,[{key:"render",value:function(e,t){new ea(e,t)}}]),e}(),na=ta;function ia(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function oa(e,t,n){return t&&aa(e.prototype,t),n&&aa(e,n),e}var sa=function(){function e(t,n){ia(this,e),this.render(t,n)}return oa(e,[{key:"close",value:function(){this.refs.buttonStart.off("click");var e=this.refs.texts.eq(this.counter-1);o.a.to(e,{opacity:0,duration:.6,ease:"power3.out"}),window.interactive=!0,a()(window).trigger(oi.EVENT.START),a()(window).trigger(q.EVENT.START),y.instance.trackPage("App","/app"),y.instance.trackPage("Dashboard","/app/dashboard"),o.a.to(this.element,{opacity:0,duration:1,delay:1,scale:1.6,ease:"power3.inOut"}),o.a.fromTo(this.refs.welcomeIcons,{opacity:0,scale:.5},{duration:.6,opacity:1,scale:1,ease:"power2.inOut",delay:1.2,stagger:.05,onComplete:this.onClose.bind(this)})}},{key:"onClose",value:function(){o.a.set(this.element,{display:"none"}),window.endOfTutorial=!0}},{key:"showText",value:function(){this.counter>0&&a()(window).trigger(na.EVENT.START),o.a.set(this.refs.texts,{display:"none"});var e=this.refs.texts.eq(this.counter);o.a.fromTo(e,{opacity:0,y:50,display:"block"},{opacity:1,y:0,duration:.6,ease:"power3.out"}),this.counter++}},{key:"render",value:function(e){this.element=a()(e),this.counter=0,this.useCamera=!1,this.refs={buttonStart:this.element.find('*[data-ref="app-tutorial-button-start"]'),buttonNext:this.element.find('*[data-ref="app-tutorial-button-next"]'),texts:this.element.find('*[data-ref="app-tutorial-text"]'),welcomeIcons:a()('*[data-ref="app-dashboard-welcome-animation"]')},o.a.set(this.refs.welcomeIcons,{opacity:0,scale:.5}),this.refs.buttonStart.on("click",this.close.bind(this)),this.refs.buttonNext.on("click",this.showText.bind(this)),this.showText()}}]),e}(),ra=function(){function e(t,n){ia(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return oa(e,null,[{key:"EVENT",get:function(){return{}}}]),oa(e,[{key:"render",value:function(e){new sa(e)}}]),e}();function la(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ha(e,t,n){return t&&la(e.prototype,t),n&&la(e,n),e}var ca=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.counter=0,this.data=[{title:"Settings",text:"There should be no big surprises in here, settings is where you can find and adjust all your, um, settings.",cta:"OK"},{title:"Settings",text:"We’ve simplified the settings menu experience, just so our developer could have a lunch break.",cta:"OK"},{title:"Settings",text:"OK, you really want to click on one of these, well you can access the themes from the settings menu, give it a try.",cta:"OK"}]}return ha(e,null,[{key:"EVENT",get:function(){return{}}},{key:"instance",get:function(){return this._instance||(this._instance=new e("singletonEnforcer")),this._instance}}]),ha(e,[{key:"getAlertMessage",value:function(){var e=this.data[this.counter%this.data.length];return this.counter++,e}}]),e}();function ua(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function da(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fa(e,t,n){return t&&da(e.prototype,t),n&&da(e,n),e}var pa=function(){function e(t,n){ua(this,e),this.render(t,n)}return fa(e,[{key:"open",value:function(e,t){ot.addInApp("settings-details");var n=t.index;this.state.currentItem=this.refs.items.eq(n),o.a.killTweensOf([this.refs.wrapper,this.state.currentItem,this.element]),o.a.fromTo(this.refs.wrapper,{y:0},{y:-50,duration:.4,ease:"power3.out"}),o.a.fromTo(this.state.currentItem,{display:"flex",y:100},{y:0,duration:.4,ease:"power3.out"}),o.a.fromTo(this.element,{display:"block",pointerEvents:"auto",opacity:0},{opacity:1,duration:.4,ease:"power3.out",onComplete:this.onOpen.bind(this)})}},{key:"onOpen",value:function(){}},{key:"close",value:function(){ot.getInApp("settings-details")&&(ot.removeInApp("settings-details"),o.a.killTweensOf([this.refs.wrapper,this.state.currentItem,this.element]),o.a.to(this.refs.wrapper,{y:0,duration:.4,ease:"power3.inOut"}),o.a.to(this.state.currentItem,{y:100,duration:.4,ease:"power3.inOut"}),o.a.to(this.element,{opacity:0,duration:.4,ease:"power3.inOut",onComplete:this.onClose.bind(this)}))}},{key:"onClose",value:function(){o.a.set(this.refs.items,{display:"none"}),o.a.set(this.element,{display:"none",pointerEvents:"none"})}},{key:"reset",value:function(){}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={wrapper:a()('*[data-ref="app-settings-wrapper"]'),items:this.element.find('*[data-ref="app-settings-details-item"]')},this.state={currentItem:null},this.reset(),a()(window).on(ma.EVENT.OPEN,this.open.bind(this)),a()(window).on(ma.EVENT.CLOSE,this.close.bind(this)),o.a.set(this.element,{display:"none",pointerEvents:"none"}),o.a.set(this.refs.items,{display:"none"}),a()(window).on(be.EVENT.BACK,this.close.bind(this))}}]),e}(),ma=function(){function e(t,n){ua(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return fa(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppSettingsDetails.EVENT.OPEN",CLOSE:"CAppSettingsDetails.EVENT.CLOSE",RESET:"CAppSettingsDetails.EVENT.RESET"}}}]),fa(e,[{key:"render",value:function(e,t){new pa(e,t)}}]),e}(),ya=ma;function ga(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ba(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wa(e,t,n){return t&&ba(e.prototype,t),n&&ba(e,n),e}var va=function(){function e(t,n){ga(this,e),this.render(t,n)}return wa(e,[{key:"item_CLICK",value:function(e){var t=ca.instance.getAlertMessage();a()(window).trigger(qe.EVENT.OPEN,[t.title,t.text,t.cta])}},{key:"button_CLICK",value:function(e){a()(e.currentTarget);a()(window).trigger(ya.EVENT.OPEN,[{index:0}])}},{key:"reset",value:function(){this.props.shouldRestartState&&(ot.getInApp("settings-details")||this.refs.content.scrollTop(0))}},{key:"app_INIT",value:function(e,t){}},{key:"app_DISPOSE",value:function(e,t){"settings"==t&&this.reset()}},{key:"render",value:function(e,t){this.element=a()(e),this.props={shouldRestartState:!1},this.refs={items:this.element.find('*[data-ref="app-settings-item"]'),buttons:this.element.find('*[data-ref="app-settings-button"]')},this.refs.items.on("click",this.item_CLICK.bind(this)),this.refs.buttons.on("click",this.button_CLICK.bind(this)),a()(window).on(ot.EVENT.INIT,this.app_INIT.bind(this)),a()(window).on(ot.EVENT.DISPOSE,this.app_DISPOSE.bind(this))}}]),e}(),Ea=function(){function e(t,n){ga(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return wa(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppSettings.EVENT.OPEN",CLOSE:"CAppSettings.EVENT.CLOSE"}}}]),wa(e,[{key:"render",value:function(e,t){new va(e,t)}}]),e}();function Ta(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ka(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ca(e,t,n){return t&&ka(e.prototype,t),n&&ka(e,n),e}var Oa=function(){function e(t,n){Ta(this,e),this.render(t,n)}return Ca(e,[{key:"open",value:function(e,t){ot.addInApp("kids-details");var n=t.index;this.state.currentItem=this.refs.items.eq(n),y.instance.trackPage("Kids","/app/kids/item-".concat(n+1)),o.a.killTweensOf([this.refs.wrapper,this.state.currentItem,this.element]),o.a.fromTo(this.refs.wrapper,{y:0},{y:-50,duration:.4,ease:"power3.out"}),o.a.fromTo(this.state.currentItem,{display:"flex",y:100},{y:0,duration:.4,ease:"power3.out"}),o.a.fromTo(this.element,{display:"block",pointerEvents:"auto",opacity:0},{opacity:1,duration:.4,ease:"power3.out",onComplete:this.onOpen.bind(this)}),this.show(this.state.currentItem,n)}},{key:"onOpen",value:function(){}},{key:"close",value:function(){ot.getInApp("kids-details")&&(ot.removeInApp("kids-details"),o.a.killTweensOf([this.refs.wrapper,this.state.currentItem,this.element]),o.a.to(this.refs.wrapper,{y:0,duration:.4,ease:"power3.inOut"}),o.a.to(this.state.currentItem,{y:100,duration:.4,ease:"power3.inOut"}),o.a.to(this.element,{opacity:0,duration:.4,ease:"power3.inOut",onComplete:this.onClose.bind(this)}))}},{key:"onClose",value:function(){o.a.set(this.refs.items,{display:"none"}),o.a.set(this.element,{display:"none",pointerEvents:"none"})}},{key:"show",value:function(e,t){switch(t){case 0:var n=e.find('*[data-ref="app-kids-details-item-text-1"]'),i=e.find('*[data-ref="app-kids-details-item-text-2"]'),a=e.find('*[data-ref="app-kids-details-item-footer"]');o.a.killTweensOf([n,i,a]),o.a.fromTo(n,{scale:0,rotation:-45,transformOrigin:"right bottom"},{scale:1,rotation:0,duration:2,ease:"elastic.out",delay:.6}),o.a.fromTo(i,{scale:0,rotation:-45,transformOrigin:"right bottom"},{scale:1,rotation:0,duration:2,ease:"elastic.out",delay:.8}),o.a.fromTo(a,{scale:0},{scale:1,rotation:0,duration:2,ease:"bounce.out",delay:.9})}}},{key:"reset",value:function(){}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={wrapper:a()('*[data-ref="app-kids-wrapper"]'),items:this.element.find('*[data-ref="app-kids-details-item"]')},this.state={currentItem:null},this.reset(),a()(window).on(Pa.EVENT.OPEN,this.open.bind(this)),a()(window).on(Pa.EVENT.CLOSE,this.close.bind(this)),o.a.set(this.element,{display:"none",pointerEvents:"none"}),o.a.set(this.refs.items,{display:"none"}),a()(window).on(be.EVENT.BACK,this.close.bind(this))}}]),e}(),Pa=function(){function e(t,n){Ta(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ca(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppKidsDetails.EVENT.OPEN",CLOSE:"CAppKidsDetails.EVENT.CLOSE",RESET:"CAppKidsDetails.EVENT.RESET"}}}]),Ca(e,[{key:"render",value:function(e,t){new Oa(e,t)}}]),e}(),_a=Pa;function Na(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Aa(e,t,n){return t&&Sa(e.prototype,t),n&&Sa(e,n),e}var Ia=function(){function e(t,n){Na(this,e),this.render(t,n)}return Aa(e,[{key:"button_CLICK",value:function(e){var t=a()(e.currentTarget).data("app-kids-button-index");a()(window).trigger(_a.EVENT.OPEN,[{index:t}])}},{key:"animationHeadline1",value:function(){o.a.fromTo(this.refs.crocos,{x:"-100%"},{x:"0%",duration:1,ease:"power3.out",delay:1}),o.a.fromTo(this.refs.crocosHand,{rotation:0,transformOrigin:"0% 100%"},{rotation:15,duration:.3,ease:"power1.inOut",delay:1.3,repeat:7,yoyo:!0}),o.a.to(this.refs.headline1,{opacity:1,duration:.6,ease:"power3.out",delay:.6}),o.a.to(this.refs.headline1,{opacity:0,duration:.6,ease:"power3.out",delay:5,onComplete:this.animationHeadline2.bind(this)})}},{key:"animationHeadline2",value:function(){o.a.fromTo(this.refs.headline2,{opacity:0},{opacity:1,duration:.6,ease:"power3.out",delay:0}),o.a.to(this.refs.headline2,{opacity:0,duration:.6,ease:"power3.out",delay:4})}},{key:"buttonCancel_CLICK",value:function(e){o.a.set(this.refs.pinPanelContainer,{pointerEvents:"none"}),o.a.to(this.refs.pinPanelBackground,{opacity:0,duration:.4,ease:"power3.inOut"}),o.a.to(this.refs.pinPanelContainer,{y:150,opacity:0,duration:.4,ease:"power3.inOut",onComplete:this.buttonCancel_COMPLETE.bind(this)}),this.isPinPanelAvailable=!1}},{key:"buttonCancel_COMPLETE",value:function(){o.a.killTweensOf([this.refs.pinPanel,this.refs.pinPanelContainer,this.refs.pinPanelBackground,this.refs.pinPanelContainer,this.refs.pinPanelStatus,this.pinCounter,this.pinCounter.animation]),o.a.set(this.refs.pinPanel,{display:"none"})}},{key:"buttonConfirm_CLICK",value:function(e){o.a.killTweensOf([this.refs.pinPanel,this.refs.pinPanelContainer,this.refs.pinPanelBackground,this.refs.pinPanelContainer,this.refs.pinPanelStatus,this.pinCounter,this.pinCounter.animation]),o.a.set(this.refs.pinPanelContainer,{pointerEvents:"none"}),this.enableClose()}},{key:"enableClose",value:function(){ne.instance.props.kids.preventClose=!1,a()(window).trigger(be.EVENT.CLOSE_PREVENTED_APP)}},{key:"pinCounter_UPDATE",value:function(){var e="",t=Math.round(this.pinCounter.value);if(0==t)e="&nbsp;";else for(var n=0;n<t;n++)e+=this.passChar;this.refs.pinPanelField.html(e)}},{key:"on_APP_INIT",value:function(e,t){"kids"==t&&(this.isPinPanelAvailable=!1,o.a.set(this.refs.pinPanel,{display:"none"}),ne.instance.props.kids.preventClose=!0,this.animationHeadline1())}},{key:"on_APP_DISPOSE",value:function(e,t){"kids"==t&&(o.a.killTweensOf([this.refs.headline1,this.refs.headline2,this.refs.crocos,this.refs.crocosHand]),o.a.set(this.refs.crocos,{x:"-100%"}),o.a.set([this.refs.headline1,this.refs.headline2],{opacity:0}))}},{key:"on_APP_PREVENT_CLOSE",value:function(){ne.instance.props.kids.preventClose&&(ot.getInApp("kids-details")?a()(window).trigger(_a.EVENT.CLOSE):this.isPinPanelAvailable||(this.pinCounter.value=0,this.pinCounter_UPDATE(),o.a.killTweensOf([this.refs.pinPanel,this.refs.pinPanelContainer,this.refs.pinPanelBackground,this.refs.pinPanelContainer,this.refs.pinPanelStatus,this.pinCounter,this.pinCounter.animation]),o.a.set(this.refs.pinPanel,{display:"block"}),o.a.set(this.refs.pinPanelContainer,{pointerEvents:"auto"}),o.a.fromTo(this.refs.pinPanelBackground,{opacity:0},{opacity:1,duration:.4,ease:"power2.out"}),o.a.fromTo(this.refs.pinPanelContainer,{y:150,opacity:1},{y:0,duration:.4,ease:"power2.out"}),o.a.fromTo(this.pinCounter,{value:0},{value:this.pinCounter.max,duration:1,ease:"steps (".concat(this.pinCounter.max,")"),delay:.6,onUpdate:this.pinCounter_UPDATE.bind(this)}),o.a.fromTo(this.refs.pinPanelStatus,{opacity:0},{opacity:1,duration:.4,ease:"power2.out",delay:1}),this.props.pinPanelAutoCloseApp&&o.a.fromTo(this.pinCounter.animation,{value:0},{value:1,duration:8,onComplete:this.buttonConfirm_CLICK.bind(this)}),this.isPinPanelAvailable=!0))}},{key:"render",value:function(e,t){this.element=a()(e),this.props={pinPanelAutoCloseApp:!0},this.interval=null,this.isPinPanelAvailable=!1,this.pinCounter={animation:{value:0},value:0,max:10},this.refs={headline1:this.element.find('*[data-ref="app-kids-headline-1"'),headline2:this.element.find('*[data-ref="app-kids-headline-2"'),crocos:this.element.find('*[data-ref="app-kids-crocos"]'),crocosHand:this.element.find('*[data-ref="app-kids-crocos-hand"]'),buttons:this.element.find('*[data-ref="app-kids-button"]'),pinPanel:this.element.find('*[data-ref="app-kids-pin-panel"]'),pinPanelContainer:this.element.find('*[data-ref="app-kids-pin-panel-container"]'),pinPanelBackground:this.element.find('*[data-ref="app-kids-pin-panel-background"]'),pinPanelButtonCancel:this.element.find('*[data-ref="app-kids-pin-panel-button-cancel"]'),pinPanelButtonConfirm:this.element.find('*[data-ref="app-kids-pin-panel-button-confirm"]'),pinPanelStatus:this.element.find('*[data-ref="app-kids-pin-panel-status"]'),pinPanelField:this.element.find('*[data-ref="app-kids-pin-panel-field"]')},this.passChar=this.refs.pinPanelField.data("app-kids-pin-panel-field-text"),o.a.set(this.refs.pinPanel,{display:"none"}),o.a.set(this.refs.crocos,{x:"-100%"}),o.a.set([this.refs.headline1,this.refs.headline2],{opacity:0}),ne.instance.props.kids={preventClose:!1},this.refs.buttons.on("click",this.button_CLICK.bind(this)),this.refs.pinPanelButtonCancel.on("click",this.buttonCancel_CLICK.bind(this)),this.refs.pinPanelButtonConfirm.on("click",this.buttonConfirm_CLICK.bind(this)),a()(window).on(ot.EVENT.INIT,this.on_APP_INIT.bind(this)),a()(window).on(ot.EVENT.DISPOSE,this.on_APP_DISPOSE.bind(this)),a()(window).on(ot.EVENT.PREVENT_CLOSE,this.on_APP_PREVENT_CLOSE.bind(this))}}]),e}(),xa=function(){function e(t,n){Na(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Aa(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppKids.EVENT.OPEN",CLOSE:"CAppKids.EVENT.CLOSE"}}}]),Aa(e,[{key:"render",value:function(e,t){new Ia(e,t)}}]),e}(),Va=n("+QRC"),La=n.n(Va);function Da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ra(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ma(e,t,n){return t&&Ra(e.prototype,t),n&&Ra(e,n),e}var Ba=function(){function e(t,n){Da(this,e),this.render(t,n)}return Ma(e,[{key:"on_CLICK",value:function(){La()(window.location.href),o.a.killTweensOf([this,this.refs.status]),o.a.fromTo(this.refs.status,{opacity:0},{opacity:1,duration:.3,ease:"power3.out"}),o.a.fromTo(this,{},{duration:2,onComplete:this.close.bind(this)})}},{key:"close",value:function(){o.a.killTweensOf([this,this.refs.status]),o.a.to(this.refs.status,{opacity:0,duration:.3,ease:"power3.out"})}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={status:this.element.find('*[data-ref="clipboard-status"]')},this.element.on("click",this.on_CLICK.bind(this))}}]),e}(),Ua=function(){function e(t,n){Da(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ma(e,null,[{key:"EVENT",get:function(){return{}}}]),Ma(e,[{key:"render",value:function(e,t){new Ba(e,t)}}]),e}();function Ha(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ka(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qa(e,t,n){return t&&Ka(e.prototype,t),n&&Ka(e,n),e}var Fa=function(){function e(t,n){Ha(this,e),this.render(t,n)}return qa(e,[{key:"on_SCROLL",value:function(){this.element.get(0).getBoundingClientRect();var e=-1*this.refs.headline.get(0).getBoundingClientRect().y/120;e=(e=e<0?0:e)>1?1:e,o.a.set(this.refs.cover,{opacity:1-e}),o.a.set(this.refs.title,{opacity:e,y:10*(1-e)})}},{key:"animate",value:function(e){o.a.to(this,{duration:this.delayToNextSlide+e,onComplete:this.goToNextSlide.bind(this)})}},{key:"goToNextSlide",value:function(){var e=this.refs.coverItem.eq(this.counter%this.refs.coverItem.length);this.counter++;var t=this.refs.coverItem.eq(this.counter%this.refs.coverItem.length);o.a.to(e,{x:"-100%",duration:.6,ease:"power1.out"}),o.a.fromTo(t,{x:"100%"},{x:"0%",duration:.6,ease:"power1.out"}),this.setPage(),this.animate(0)}},{key:"setPage",value:function(){if(this.refs.pagination.length){var e=this.paginationTemplate,t=this.refs.coverItem.length,n=this.counter%this.refs.coverItem.length+1;e=e.replace("{page}",n).replace("{pages}",t),this.refs.pagination.html(e)}}},{key:"on_APP_INIT",value:function(e,t){t==this.refs.content.data("app-name")&&this.refs.coverItem.length>1&&this.animate(5)}},{key:"on_APP_DISPOSE",value:function(){o.a.killTweensOf(this)}},{key:"render",value:function(e,t){this.element=a()(e),this.counter=0,this.paginationTemplate="",this.delayToNextSlide=5,this.refs={content:this.element.find('*[data-ref="app-content"]'),headline:this.element.find('*[data-ref="app-header-slider-headline"]'),title:this.element.find('*[data-ref="app-header-slider-title"]'),cover:this.element.find('*[data-ref="app-header-slider-cover"]'),coverItem:this.element.find('*[data-ref="app-header-slider-cover-item"]'),pagination:this.element.find('*[data-ref="app-header-slider-pagination"]')},this.refs.pagination.length&&(this.paginationTemplate=this.refs.pagination.html(),this.setPage());for(var n=0;n<this.refs.coverItem.length;n++){var i=this.refs.coverItem.eq(n);o.a.set(i,{x:0==n?"0%":"100%"})}a()(this.refs.content).on("scroll",this.on_SCROLL.bind(this)),a()(window).on(ot.EVENT.INIT,this.on_APP_INIT.bind(this)),a()(window).on(ot.EVENT.DISPOSE,this.on_APP_DISPOSE.bind(this))}}]),e}(),ja=function(){function e(t,n){Ha(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return qa(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppHeaderSlider.EVENT.OPEN",CLOSE:"CAppHeaderSlider.EVENT.CLOSE"}}}]),qa(e,[{key:"render",value:function(e,t){new Fa(e,t)}}]),e}();function Ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ga(e,t,n){return t&&Wa(e.prototype,t),n&&Wa(e,n),e}var Xa=function(){function e(t,n){Ya(this,e),this.render(t,n)}return Ga(e,[{key:"open",value:function(e,t){this.themeIndex=t,this.data=$a.instance.getDataByThemeName(t),this.refs.title.html(this.data.name),y.instance.trackPage("Galaxy Themes","/app/galaxy-themes/".concat(k.slugfy(this.data.name),"/apply")),o.a.set(this.refs.progress,{width:"0%"}),this.setPercent(0);var n=this.refs.image.css("background-image");-1!=n.indexOf($a.instance.currentTheme)&&(n=n.replace($a.instance.currentTheme,$a.instance.data[t]),this.refs.image.css("background-image",n)),this.element.css("display","block"),a()(window).trigger(ut.EVENT.RESET),o.a.delayedCall(1,this.onOpen.bind(this))}},{key:"onOpen",value:function(){$a.instance.update(this.themeIndex)}},{key:"close",value:function(){o.a.delayedCall(1,this.onClose.bind(this))}},{key:"onClose",value:function(){this.element.css("display","none")}},{key:"setPercent",value:function(e){this.refs.percent.html("".concat(e,"%")),o.a.to(this.refs.progress,{duration:.3,width:"".concat(e,"%")})}},{key:"progress",value:function(e,t){this.setPercent(Math.floor(100*t)),t>=1&&this.close()}},{key:"render",value:function(e,t){this.element=a()(e),this.data=null,this.themeIndex=0,this.refs={title:this.element.find('*[data-ref="app-theme-title"]'),image:this.element.find('*[data-ref="app-theme-image"]'),progress:this.element.find('*[data-ref="app-theme-progress"]'),percent:this.element.find('*[data-ref="app-theme-percent"]')},a()(window).on(za.EVENT.OPEN,this.open.bind(this)),a()(window).on($a.EVENT.PROGRESS,this.progress.bind(this))}}]),e}(),za=function(){function e(t,n){Ya(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ga(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppThemeLoader.EVENT.OPEN"}}}]),Ga(e,[{key:"render",value:function(e,t){new Xa(e,t)}}]),e}(),Ja=za;function Za(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qa(e,t,n){return t&&Za(e.prototype,t),n&&Za(e,n),e}var $a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=["default","black-onix","black-minimalist","white-minimalist","white-onix","cute","retro"],this.themesData={default:{name:"Default",description:"Samsung users are all unique and they like their phones to be unique too. Check out a few of the other themes. The ones here are just to give you a taste, but once you have a real Samsung you’ll have access to a world of amazing options.",previewImages:3},"black-onix":{name:"Black Onyx",description:"There are 1000s of digital artists on the internet and with Galaxy Themes you can put them to work designing your phone how you like it.",previewImages:3},"black-minimalist":{name:"Darth",description:"Whatever your interest there is a theme to match it. Love dressing head to toe in black and marching around to intimidating music? This is the theme for you.",previewImages:3},"white-minimalist":{name:"Simple white",description:"With Simple White now your phone can match your kicks. In fact, some of your favourite brands will have themes so you can match your phone to a lot more than your kicks.",previewImages:3},"white-onix":{name:"Robot",description:"We couldn’t resist making an iTest theme. You’ll understand once your own Samsung. Customisation is addictive.",previewImages:3},cute:{name:"Cute",description:"When you change your themes you’ll notice that it also changes the look and feel of the Samsung apps too and each of the icons gets a cool little treatment.",previewImages:3},retro:{name:"Retro",description:"The 80s used to mean shoulder pads and questionable hairstyles, but now it means epic phone themes and nostalgic electropop.",previewImages:3}},this.currentTheme=this.data[0],window.theme=this.currentTheme,this.loader=0,this.loaderCounter=0,this.isPreviewLoaded=!1,this.preloadPreviewImages()}return Qa(e,null,[{key:"EVENT",get:function(){return{UPDATE:"CAppThemesData.EVENT.UPDATE",PROGRESS:"CAppThemesData.EVENT.PROGRESS"}}},{key:"instance",get:function(){return this._instance||(this._instance=new e("singletonEnforcer")),this._instance}}]),Qa(e,[{key:"preloadPreviewImages",value:function(){if(!this.isPreviewLoaded){this.isPreviewLoaded=!0;for(var e=0;e<this.data.length;e++)for(var t=this.data[e],n=0;n<3;n++){var i=n+1;(new Image).src="".concat(host,"/assets/img/themes/").concat(t,"/preview/icon-theme-").concat(i,".jpg")}}}},{key:"update",value:function(t){var n=this.data[t],i=this.currentTheme;this.currentTheme=n,window.theme=this.currentTheme,this.loader=0,this.loaderCounter=0,a()(window).trigger(e.EVENT.UPDATE,[i,n])}},{key:"addImageToLoader",value:function(e){e=e.replace('url("',"").replace('")',""),this.loader++;var t=new Image;t.src=e,t.onload=this.image_LOADED.bind(this)}},{key:"image_LOADED",value:function(){this.loaderCounter++;var t=this.loaderCounter/this.loader;a()(window).trigger(e.EVENT.PROGRESS,[t])}},{key:"getDataByThemeName",value:function(e){return this.themesData[this.data[e]]}}]),e}();function eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function to(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function no(e,t,n){return t&&to(e.prototype,t),n&&to(e,n),e}var io=function(){function e(t,n){eo(this,e),this.render(t,n)}return no(e,[{key:"open",value:function(){this.element.css("display","block"),this.refs.buttonClose.css("pointer-events","auto"),this.update(),o.a.fromTo(this.refs.wrapper,{y:0},{y:-50,duration:.4,ease:"power3.out"}),o.a.fromTo(this.element,{y:100,opacity:0},{y:0,opacity:1,duration:.4,ease:"power3.out",onComplete:this.onOpen.bind(this)})}},{key:"onOpen",value:function(){this.isOpen=!0}},{key:"update",value:function(){this.refs.textTitle.html(this.data.name),this.refs.textDescription.html(this.data.description);var e=$a.instance.data[this.themeIndex];(new Image).src="".concat(host,"/assets/img/themes/").concat(e,"/dashboard/background.jpg");for(var t=this.refs.imageTemplate.clone(),n="",i=0;i<this.data.previewImages;i++)n+=t.html().replace("default",e).replace("icon-theme-1","icon-theme-".concat(i+1));this.refs.imageList.html(n),this.refs.imageList.scrollLeft(0)}},{key:"close",value:function(){this.refs.buttonClose.css("pointer-events","none"),o.a.to(this.refs.wrapper,{y:0,duration:.2,ease:"power3.in"}),o.a.to(this.element,{y:100,opacity:0,duration:.2,ease:"power3.in",onComplete:this.onClose.bind(this)})}},{key:"onClose",value:function(){this.element.css("display","none"),this.isOpen=!1}},{key:"theme_OPEN",value:function(e,t,n){this.viewport.id==t&&(this.themeIndex=n,this.data=$a.instance.getDataByThemeName(n),this.open())}},{key:"chat_CLOSE",value:function(e,t){}},{key:"buttonClose_CLICK",value:function(){this.close()}},{key:"chat_UPDATE",value:function(){this.isOpen&&this.update()}},{key:"app_INIT",value:function(e,t){}},{key:"buttonApply_CLICK",value:function(){a()(window).trigger(Ja.EVENT.OPEN,this.themeIndex),this.close(),a()(window).trigger(ot.EVENT.CLOSE,[!0])}},{key:"render",value:function(e,t){this.element=a()(e),this.data=null,this.themeIndex=0,this.viewport={id:this.element.data("app-theme-id")},this.refs={buttonClose:this.element.find('*[data-ref="app-theme-button-close"]'),buttonApply:this.element.find('*[data-ref="app-theme-button-apply"]'),textTitle:this.element.find('*[data-ref="app-themes-text-title"]'),textDescription:this.element.find('*[data-ref="app-themes-text-description"]'),imageTemplate:this.element.find('*[data-ref="app-themes-image-template"]'),imageList:this.element.find('*[data-ref="app-themes-image-list"]'),wrapper:a()('*[data-ref="app-theme-wrapper"]')},a()(this.refs.buttonClose).on("click",this.buttonClose_CLICK.bind(this)),a()(this.refs.buttonApply).on("click",this.buttonApply_CLICK.bind(this)),a()(window).on(ao.EVENT.OPEN,this.theme_OPEN.bind(this)),a()(window).on(ot.EVENT.INIT,this.app_INIT.bind(this))}}]),e}(),ao=function(){function e(t,n){eo(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return no(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppTheme.EVENT.OPEN",CLOSE:"CAppTheme.EVENT.CLOSE"}}}]),no(e,[{key:"render",value:function(e,t){new io(e,t)}}]),e}(),oo=ao;function so(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ro(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lo(e,t,n){return t&&ro(e.prototype,t),n&&ro(e,n),e}var ho=function(){function e(t,n){so(this,e),this.render(t,n)}return lo(e,[{key:"buttonFeatured_CLICK",value:function(){this.refs.buttonFeatured.find('*[data-ref="button-rounded-enabled"]').css("display","block"),this.refs.buttonFeatured.find('*[data-ref="button-rounded-disabled"]').css("display","none"),this.refs.buttonTop.find('*[data-ref="button-rounded-enabled"]').css("display","none"),this.refs.buttonTop.find('*[data-ref="button-rounded-disabled"]').css("display","block"),this.refs.featuredContainer.css("display","block"),this.refs.topContainer.css("display","none"),this.refs.content.scrollTop(this.topPositionWhenSwitchCategory),o.a.fromTo(this.refs.featuredContainer,{x:-window.innerWidth},{x:0,duration:.2,ease:"power2.out"})}},{key:"buttonTop_CLICK",value:function(){this.refs.buttonTop.find('*[data-ref="button-rounded-enabled"]').css("display","block"),this.refs.buttonTop.find('*[data-ref="button-rounded-disabled"]').css("display","none"),this.refs.buttonFeatured.find('*[data-ref="button-rounded-enabled"]').css("display","none"),this.refs.buttonFeatured.find('*[data-ref="button-rounded-disabled"]').css("display","block"),this.refs.topContainer.css("display","block"),this.refs.featuredContainer.css("display","none"),this.refs.content.scrollTop(this.topPositionWhenSwitchCategory),o.a.fromTo(this.refs.topContainer,{x:window.innerWidth},{x:0,duration:.2,ease:"power2.out"})}},{key:"buttonTheme_CLICK",value:function(e){var t=a()(e.currentTarget).data("theme-button-index");a()(window).trigger(oo.EVENT.OPEN,["store",t])}},{key:"reset",value:function(){this.props.shouldRestartState&&(o.a.killTweensOf([this.refs.foreground]),o.a.set(this.refs.foreground,{display:"block"}))}},{key:"app_INIT",value:function(e,t){if("galaxy-store"==t){var n=!0;if(this.props.shouldRestartState||(this.props.restartCounter>0&&(n=!1),this.props.restartCounter++),n){o.a.killTweensOf([this.refs.foreground,this.refs.foregroundIcon]),o.a.fromTo(this.refs.foreground,{display:"block",opacity:1},{opacity:0,duration:.6,delay:this.props.delayToStart+1.2,ease:"power3.inOut",onComplete:this.onAppInit.bind(this)});var i=o.a.timeline({paused:!0,delay:.4});i.fromTo(this.refs.foregroundIcon,{rotation:0,transformOrigin:"center top"},{rotation:-15,transformOrigin:"center top",duration:.3,ease:"power1.inOut"}),i.to(this.refs.foregroundIcon,{rotation:15,transformOrigin:"center top",duration:.2,ease:"power1.inOut"}),i.to(this.refs.foregroundIcon,{rotation:-15,transformOrigin:"center top",duration:.2,ease:"power1.inOut"}),i.to(this.refs.foregroundIcon,{rotation:7,transformOrigin:"center top",duration:.1,ease:"power1.inOut"}),i.to(this.refs.foregroundIcon,{rotation:-7,transformOrigin:"center top",duration:.1,ease:"power1.inOut"}),i.to(this.refs.foregroundIcon,{rotation:0,transformOrigin:"center top",duration:.1,ease:"power1.inOut"}),i.play()}else this.onAppInit()}}},{key:"onAppInit",value:function(){o.a.set(this.refs.foreground,{display:"none"})}},{key:"app_DISPOSE",value:function(e,t){"galaxy-store"==t&&this.reset()}},{key:"render",value:function(e,t){this.element=a()(e),this.topPositionWhenSwitchCategory=170,this.props={shouldRestartState:!0,restartCounter:0,delayToStart:1},this.refs={foreground:this.element.find('*[data-ref="app-galaxy-store-foreground"]'),foregroundIcon:this.element.find('*[data-ref="app-galaxy-store-foreground-icon"]'),content:this.element.find('*[data-ref="app-content"]'),featuredContainer:this.element.find('*[data-ref="app-galaxy-store-container-featured"]'),topContainer:this.element.find('*[data-ref="app-galaxy-store-container-top"]'),buttonFeatured:this.element.find('*[data-ref="app-galaxy-store-button-featured"]'),buttonTop:this.element.find('*[data-ref="app-galaxy-store-button-top"]'),themeButton:this.element.find('*[data-ref="theme-button"]')},a()(this.refs.themeButton).on("click",this.buttonTheme_CLICK.bind(this)),a()(this.refs.buttonFeatured).on("click",this.buttonFeatured_CLICK.bind(this)),a()(this.refs.buttonTop).on("click",this.buttonTop_CLICK.bind(this)),a()(window).on(ot.EVENT.INIT,this.app_INIT.bind(this)),a()(window).on(ot.EVENT.DISPOSE,this.app_DISPOSE.bind(this))}}]),e}(),co=function(){function e(t,n){so(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return lo(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppGalaxyStore.EVENT.OPEN",CLOSE:"CAppGalaxyStore.EVENT.CLOSE"}}}]),lo(e,[{key:"render",value:function(e,t){new ho(e,t)}}]),e}();function uo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function po(e,t,n){return t&&fo(e.prototype,t),n&&fo(e,n),e}var mo=function(){function e(t,n){uo(this,e),this.render(t,n)}return po(e,[{key:"open",value:function(e,t){ot.addInApp("gallery-photo"),this.currentIndex=t.index,this.photosRect=t.position,this.reset(),this.setImageScale(),this.currentScrollViewportPosition=-window.innerWidth*this.currentIndex,o.a.set(this.refs.scrollViewport,{x:this.currentScrollViewportPosition}),o.a.set(this.element,{display:"block",pointerEvents:"auto"});var n=this.photosRect[this.currentIndex],i=n.x<window.innerWidth/2?"0% 0%":"100% 0%",a=this.refs.imageBlock.eq(this.currentIndex).find('*[data-ref="gallery-image-container"]'),s=this.refs.imageBlock.eq(this.currentIndex);o.a.set(a,{height:"auto"}),o.a.fromTo(s,{x:n.x,y:n.y,width:n.width,height:n.height,transformOrigin:i},{x:0,y:0,width:"100%",height:"100%",duration:.4,ease:"power3.out",delay:0}),o.a.set(this.refs.background,{opacity:1}),o.a.fromTo([this.refs.topBar,this.refs.bottomBar],{opacity:0},{opacity:1,duration:.3,delay:.3,ease:"power3.out"})}},{key:"onOpen",value:function(){}},{key:"close",value:function(){if(ot.getInApp("gallery-photo")){ot.removeInApp("gallery-photo"),o.a.set(this.refs.background,{opacity:0}),o.a.to([this.refs.topBar,this.refs.bottomBar],{opacity:0,duration:.2,ease:"power1.out"});var e=this.photosRect[this.currentIndex],t=e.x<window.innerWidth/2?"0% 0%":"100% 0%",n=this.refs.imageBlock.eq(this.currentIndex).find('*[data-ref="gallery-image-container"]');o.a.set(n,{width:"100%"}),o.a.to(n,{height:e.height,duration:.2,ease:"power1.out",delay:0});var i=this.refs.imageBlock.eq(this.currentIndex);o.a.fromTo(i,{x:0,y:0,width:"100%",height:"100%",transformOrigin:t},{x:e.x,y:e.y,width:e.width,height:e.height,duration:.2,ease:"power1.out",delay:0,onComplete:this.onClose.bind(this)})}}},{key:"onClose",value:function(){o.a.set(this.element,{display:"none",pointerEvents:"none"});var e=this.refs.imageBlock.eq(this.currentIndex).find('*[data-ref="gallery-image-container"]'),t=this.refs.imageBlock.eq(this.currentIndex);o.a.set(e,{height:"auto"}),o.a.set(t,{x:0,y:0,width:"100%",height:"100%",duration:.4,ease:"power3.out",delay:0})}},{key:"setImageScale",value:function(){for(var e=0;e<this.photos.length;e++){this.photos[e].setImageScale()}}},{key:"reset",value:function(){for(var e=0;e<this.photos.length;e++){this.photos[e].reset()}}},{key:"scrollViewport_TOUCH_END",value:function(e){if(this.isMoving){this.isMoving=!1;var t=Math.round(-1*this.moveableScrollViewportPosition/window.innerWidth);t=(t=t<0?0:t)>this.refs.imageBlock.length-1?this.refs.imageBlock.length-1:t,this.currentScrollViewportPosition=-window.innerWidth*t,o.a.killTweensOf(this.refs.scrollViewport),o.a.to(this.refs.scrollViewport,{x:this.currentScrollViewportPosition,duration:.3,ease:"power1.out"}),this.currentIndex=t,o.a.killTweensOf([this.refs.arrowLeft,this.refs.arrowRight]),o.a.to(this.refs.arrowLeft,{x:"-25%",duration:.5,ease:"power1.out"}),o.a.to(this.refs.arrowRight,{x:"25%",duration:.5,ease:"power1.out"})}a()(document).off("touchend"),a()(document).off("touchmove")}},{key:"scrollViewport_TOUCH_MOVE",value:function(e){if(this.photos[this.currentIndex].isPinchEnable)this.currentScrollViewportPosition=-window.innerWidth*this.currentIndex,o.a.set(this.refs.scrollViewport,{x:this.currentScrollViewportPosition}),o.a.to(this.refs.arrowLeft,{x:"-25%",duration:.3,ease:"power1.out"}),o.a.to(this.refs.arrowRight,{x:"25%",duration:.3,ease:"power1.out"}),a()(document).off("touchend"),a()(document).off("touchmove");else{this.isMoving=!0;var t=e.touches[0]||e.changedTouches[0];this.currentTouchPosition={x:t.pageX-this.initialTouchPosition.x,y:t.pageY-this.initialTouchPosition.y};var n=-(this.refs.imageBlock.length*window.innerWidth-window.innerWidth);o.a.killTweensOf([this.refs.arrowLeft,this.refs.arrowRight]);var i=25*(this.currentScrollViewportPosition+this.currentTouchPosition.x)/100;i=i>25?25:i,o.a.set(this.refs.arrowLeft,{x:"".concat(-25+i,"%")});var s=25*(n-(this.currentScrollViewportPosition+this.currentTouchPosition.x))/100;s=s>25?25:s,o.a.to(this.refs.arrowRight,{x:"".concat(25-s,"%"),duration:.1}),this.moveableScrollViewportPosition=this.currentScrollViewportPosition+this.currentTouchPosition.x,this.moveableScrollViewportPosition=this.moveableScrollViewportPosition>0?0:this.moveableScrollViewportPosition,this.moveableScrollViewportPosition=this.moveableScrollViewportPosition<n?n:this.moveableScrollViewportPosition,o.a.to(this.refs.scrollViewport,{x:this.moveableScrollViewportPosition,duration:.1})}}},{key:"scrollViewport_TOUCH_START",value:function(e){var t=this.photos[this.currentIndex].currentImageScale;if(this.isMoving=!1,t<=100){var n=e.touches[0]||e.changedTouches[0];this.initialTouchPosition={x:n.pageX,y:n.pageY},this.currentTouchPosition={x:n.pageX-this.initialTouchPosition.x,y:n.pageY-this.initialTouchPosition.y},a()(document).on("touchend",this.scrollViewport_TOUCH_END.bind(this)),a()(document).on("touchmove",this.scrollViewport_TOUCH_MOVE.bind(this))}}},{key:"render",value:function(e,t){this.element=a()(e),this.photosRect=null,this.currentScrollViewportPosition=0,this.moveableScrollViewportPosition=0,this.currentIndex=0,this.isMoving=!1,this.initialTouchPosition={x:0,y:0},this.currentTouchPosition={x:0,y:0},this.refs={background:this.element.find('*[data-ref="gallery-image-background"]'),buttonBack:this.element.find('*[data-ref="gallery-image-button-back"]'),topBar:this.element.find('*[data-ref="gallery-image-top-bar"]'),bottomBar:this.element.find('*[data-ref="gallery-image-bottom-bar"]'),scrollViewport:this.element.find('*[data-ref="gallery-image-scroll"]'),imageBlock:this.element.find('*[data-ref="gallery-image-block"]'),arrowLeft:this.element.find('*[data-ref="gallery-image-arrow-left"]'),arrowRight:this.element.find('*[data-ref="gallery-image-arrow-right"]')},this.photos=[];for(var n=0;n<this.refs.imageBlock.length;n++)this.photos.push(new bt(this.refs.imageBlock.eq(n),n));this.reset(),o.a.set(this.refs.arrowLeft,{x:"-25%"}),o.a.set(this.refs.arrowRight,{x:"25%"}),a()(this.refs.buttonBack).on("click",this.close.bind(this)),a()(window).on(yo.EVENT.OPEN,this.open.bind(this)),a()(window).on(yo.EVENT.CLOSE,this.close.bind(this)),a()(this.refs.scrollViewport).on("touchstart",this.scrollViewport_TOUCH_START.bind(this)),this.setImageScale(),o.a.set(this.element,{display:"none",pointerEvents:"none"}),a()(window).on(be.EVENT.BACK,this.close.bind(this))}}]),e}(),yo=function(){function e(t,n){uo(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return po(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppGalleryPhoto.EVENT.OPEN",CLOSE:"CAppGalleryPhoto.EVENT.CLOSE"}}}]),po(e,[{key:"render",value:function(e,t){new mo(e,t)}}]),e}(),go=yo;function bo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vo(e,t,n){return t&&wo(e.prototype,t),n&&wo(e,n),e}var Eo=function(){function e(t,n){bo(this,e),this.render(t,n)}return vo(e,[{key:"photo_CLICK",value:function(e){for(var t=a()(e.currentTarget),n=t.data("image"),i=t.data("index"),o=(t.get(0).getBoundingClientRect(),[]),s=0;s<this.refs.photos.length;s++){var r=this.refs.photos.eq(s);o.push(r.get(0).getBoundingClientRect())}a()(window).trigger(go.EVENT.OPEN,[{photo:n,index:i,position:o}])}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={photos:this.element.find('*[data-ref="app-gallery-photo"]')},this.refs.photos.on("click",this.photo_CLICK.bind(this))}}]),e}(),To=function(){function e(t,n){bo(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return vo(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppGallery.EVENT.OPEN",CLOSE:"CAppGallery.EVENT.CLOSE"}}}]),vo(e,[{key:"render",value:function(e,t){new Eo(e,t)}}]),e}();function ko(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Co(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Oo(e,t,n){return t&&Co(e.prototype,t),n&&Co(e,n),e}var Po=function(){function e(t,n){ko(this,e),this.render(t,n)}return Oo(e,[{key:"open",value:function(e,t){this.onTransition||(ot.addInApp("video"),this.onTransition=!0,o.a.killTweensOf([this.element]),this.refs.video.src=t.src,this.refs.video.muted=!1,this.refs.video.play(),this.element.css("display","block"),o.a.fromTo(this.element,{opacity:0,y:0},{opacity:1,y:0,duration:.6,ease:"power3.out",onComplete:this.on_OPEN.bind(this)}))}},{key:"on_OPEN",value:function(){this.onTransition=!1}},{key:"close",value:function(){this.onTransition||ot.getInApp("video")&&(ot.removeInApp("video"),this.onTransition=!0,this.refs.video.pause(),o.a.to(this.element,{y:0,opacity:0,duration:.4,ease:"power3.inOut",onComplete:this.on_CLOSE.bind(this)}))}},{key:"on_CLOSE",value:function(){this.refs.video.src="",this.element.css("display","none"),this.onTransition=!1}},{key:"button_CLICK",value:function(){this.close()}},{key:"render",value:function(e,t){this.element=a()(e),this.onTransition=!1,this.refs={button:this.element.find('*[data-ref="app-video-button-back"'),video:this.element.find('*[data-ref="app-video-player"]').get(0)},this.refs.button.on("click",this.button_CLICK.bind(this)),a()(window).on(_o.EVENT.OPEN,this.open.bind(this)),a()(window).on(be.EVENT.BACK,this.close.bind(this))}}]),e}(),_o=function(){function e(t,n){ko(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Oo(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppVideo.EVENT.OPEN"}}}]),Oo(e,[{key:"render",value:function(e,t){new Po(e,t)}}]),e}(),No=_o;function So(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ao(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Io(e,t,n){return t&&Ao(e.prototype,t),n&&Ao(e,n),e}var xo=function(){function e(t,n){So(this,e),this.render(t,n)}return Io(e,[{key:"render",value:function(e,t){this.element=a()(e),this.refs={content:this.element.find('*[data-ref="app-content"]')}}}]),e}(),Vo=function(){function e(t,n){So(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Io(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppGameLauncher.EVENT.OPEN",CLOSE:"CAppGameLauncher.EVENT.CLOSE"}}}]),Io(e,[{key:"render",value:function(e,t){new xo(e,t)}}]),e}();function Lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Do(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ro(e,t,n){return t&&Do(e.prototype,t),n&&Do(e,n),e}var Mo=function(){function e(t,n){Lo(this,e),this.render(t,n)}return Ro(e,[{key:"on_CLICK",value:function(e){a()(e.currentTarget);a()(window).trigger(No.EVENT.OPEN,this.data)}},{key:"render",value:function(e,t){this.element=a()(e),this.data={src:this.element.data("app-video-button-src")},this.element.on("click",this.on_CLICK.bind(this))}}]),e}(),Bo=function(){function e(t,n){Lo(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ro(e,null,[{key:"EVENT",get:function(){return{}}}]),Ro(e,[{key:"render",value:function(e,t){new Mo(e,t)}}]),e}();function Uo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ho(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ko(e,t,n){return t&&Ho(e.prototype,t),n&&Ho(e,n),e}var qo=function(){function e(t,n){Uo(this,e),this.render(t,n)}return Ko(e,[{key:"buttonTheme_CLICK",value:function(e){var t=a()(e.currentTarget).data("theme-button-index");a()(window).trigger(oo.EVENT.OPEN,["themes",t])}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={content:this.element.find('*[data-ref="app-content"]'),themeButton:this.element.find('*[data-ref="theme-button"]')},a()(this.refs.themeButton).on("click",this.buttonTheme_CLICK.bind(this))}}]),e}(),Fo=function(){function e(t,n){Uo(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ko(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppGalaxyThemes.EVENT.OPEN",CLOSE:"CAppGalaxyThemes.EVENT.CLOSE"}}}]),Ko(e,[{key:"render",value:function(e,t){new qo(e,t)}}]),e}();function jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wo(e,t,n){return t&&Yo(e.prototype,t),n&&Yo(e,n),e}var Go=function(){function e(t,n){jo(this,e),this.render(t,n)}return Wo(e,[{key:"update",value:function(e,t,n){if(this.data.isCSS)this.element.attr("data-theme",n);else if(this.data.isImage){var i=this.element.attr("src");i=i.replace(t,n),$a.instance.addImageToLoader(i),this.element.attr("src",i)}else{var a=this.element.css("background-image");-1!=a.indexOf(t)&&(a=a.replace(t,n),$a.instance.addImageToLoader(a),this.element.css("background-image",a))}}},{key:"render",value:function(e,t){this.element=a()(e);var n=this.element.attr("src"),i=this.element.data("theme");this.data={isCSS:!(""==i||!i),isImage:""!=n&&null!=n},a()(window).on($a.EVENT.UPDATE,this.update.bind(this))}}]),e}(),Xo=function(){function e(t,n){jo(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Wo(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppThemeChanger.EVENT.OPEN"}}}]),Wo(e,[{key:"render",value:function(e,t){new Go(e,t)}}]),e}();function zo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zo(e,t,n){return t&&Jo(e.prototype,t),n&&Jo(e,n),e}var Qo=function(){function e(t,n){zo(this,e),this.render(t,n)}return Zo(e,[{key:"on_CLICK",value:function(e){a()(e.currentTarget);$a.instance.update(this.data.index)}},{key:"render",value:function(e,t){this.element=a()(e),this.data={index:this.element.data("app-theme-button-index")},this.element.on("click",this.on_CLICK.bind(this))}}]),e}(),$o=function(){function e(t,n){zo(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Zo(e,null,[{key:"EVENT",get:function(){return{}}}]),Zo(e,[{key:"render",value:function(e,t){new Qo(e,t)}}]),e}();function es(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ts(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ns(e,t,n){return t&&ts(e.prototype,t),n&&ts(e,n),e}var is=function(){function e(t,n){es(this,e),this.render(t,n)}return ns(e,[{key:"mailButton_CLICK",value:function(e){var t=a()(e.currentTarget),n=t.find('*[data-ref="app-mail-button-icon"]'),i=t.find('*[data-ref="app-mail-button-text"]'),s=t.find('*[data-ref="app-mail-background"]');o.a.killTweensOf([n,i,s]);var r=o.a.timeline({});r.fromTo(n,{rotation:0,transformOrigin:"center top"},{rotation:-15,transformOrigin:"center top",duration:.2,ease:"power1.inOut"}),r.to(n,{rotation:15,transformOrigin:"center top",duration:.4,ease:"power1.inOut"}),r.to(n,{rotation:-15,transformOrigin:"center top",duration:.4,ease:"power1.inOut"}),r.to(n,{rotation:0,transformOrigin:"center top",duration:.4,ease:"power1.inOut"}),o.a.fromTo(s,{scale:1},{scale:5,transformOrigin:"center center",duration:.4,ease:"power1.out"}),o.a.fromTo(s,{opacity:1},{opacity:0,transformOrigin:"center center",duration:.3,delay:.2,ease:"power1.out"}),o.a.fromTo(i,{opacity:0,scale:0},{opacity:1,scale:1,duration:.6,ease:"power3.out"}),this.state.isExpanded||(o.a.to(this.refs.header,{top:"-15%",duration:.6,ease:"power3.out"}),o.a.to(this.refs.container,{top:"25%",duration:.6,ease:"power3.out"})),o.a.set(this.refs.descript,{display:"none"});var l=this.refs.descript.eq(this.state.descriptCounter%this.refs.descript.length);o.a.killTweensOf(l),o.a.fromTo(l,{opacity:0,y:20,display:"block"},{opacity:1,y:0,duration:.6,ease:"power3.out"}),this.state.descriptCounter++,this.state.isExpanded=!0}},{key:"reset",value:function(){this.props.shouldRestartState&&(this.props.shouldDescriptRestartWhenAppClose&&(this.state.descriptCounter=0),this.state.isExpanded=!1,o.a.set(this.refs.header,{top:"0%"}),o.a.set(this.refs.container,{top:"50%"}),o.a.set(this.refs.descript,{display:"none"}))}},{key:"app_INIT",value:function(e,t){}},{key:"app_DISPOSE",value:function(e,t){"mail"==t&&this.reset()}},{key:"render",value:function(e,t){this.element=a()(e),this.props={shouldRestartState:!0,shouldDescriptRestartWhenAppClose:!0},this.state={isExpanded:!1,descriptCounter:0},this.refs={header:this.element.find('*[data-ref="app-mail-header"]'),container:this.element.find('*[data-ref="app-mail-container"]'),descript:this.element.find('*[data-ref="app-mail-descript"]'),mailButton:this.element.find('*[data-ref="app-mail-button"]')},this.refs.mailButton.on("click",this.mailButton_CLICK.bind(this)),a()(window).on(ot.EVENT.INIT,this.app_INIT.bind(this)),a()(window).on(ot.EVENT.DISPOSE,this.app_DISPOSE.bind(this))}}]),e}(),as=function(){function e(t,n){es(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return ns(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppMail.EVENT.OPEN",CLOSE:"CAppMail.EVENT.CLOSE"}}}]),ns(e,[{key:"render",value:function(e,t){new is(e,t)}}]),e}();function os(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ss(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rs(e,t,n){return t&&ss(e.prototype,t),n&&ss(e,n),e}var ls=function(){function e(t,n){os(this,e),this.render(t,n)}return rs(e,[{key:"open",value:function(e,t){ot.addInApp("wearable-details");var n=t.index;this.state.currentItem=this.refs.items.eq(n),o.a.killTweensOf([this.refs.wrapper,this.state.currentItem,this.element]),o.a.fromTo(this.refs.wrapper,{y:0},{y:-50,duration:.4,ease:"power3.out"}),o.a.fromTo(this.state.currentItem,{display:"flex",y:100},{y:0,duration:.4,ease:"power3.out"}),o.a.fromTo(this.element,{display:"block",pointerEvents:"auto",opacity:0},{opacity:1,duration:.4,ease:"power3.out",onComplete:this.onOpen.bind(this)})}},{key:"onOpen",value:function(){}},{key:"close",value:function(){ot.getInApp("wearable-details")&&(ot.removeInApp("wearable-details"),o.a.killTweensOf([this.refs.wrapper,this.state.currentItem,this.element]),o.a.to(this.refs.wrapper,{y:0,duration:.4,ease:"power3.inOut"}),o.a.to(this.state.currentItem,{y:100,duration:.4,ease:"power3.inOut"}),o.a.to(this.element,{opacity:0,duration:.4,ease:"power3.inOut",onComplete:this.onClose.bind(this)}))}},{key:"onClose",value:function(){o.a.set(this.refs.items,{display:"none"}),o.a.set(this.element,{display:"none",pointerEvents:"none"})}},{key:"reset",value:function(){}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={wrapper:a()('*[data-ref="app-wearable-wrapper"]'),items:this.element.find('*[data-ref="app-wearable-details-item"]')},this.state={currentItem:null},this.reset(),a()(window).on(hs.EVENT.OPEN,this.open.bind(this)),a()(window).on(hs.EVENT.CLOSE,this.close.bind(this)),o.a.set(this.element,{display:"none",pointerEvents:"none"}),o.a.set(this.refs.items,{display:"none"}),a()(window).on(be.EVENT.BACK,this.close.bind(this))}}]),e}(),hs=function(){function e(t,n){os(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return rs(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppWearableDetails.EVENT.OPEN",CLOSE:"CAppWearableDetails.EVENT.CLOSE",RESET:"CAppWearableDetails.EVENT.RESET"}}}]),rs(e,[{key:"render",value:function(e,t){new ls(e,t)}}]),e}(),cs=hs;function us(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ds(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fs(e,t,n){return t&&ds(e.prototype,t),n&&ds(e,n),e}var ps=function(){function e(t,n){us(this,e),this.render(t,n)}return fs(e,[{key:"button_CLICK",value:function(e){var t=a()(e.currentTarget).data("app-wearable-button-index");a()(window).trigger(cs.EVENT.OPEN,[{index:t}])}},{key:"reset",value:function(){if(this.props.shouldRestartState&&!ot.getInApp("wearable-details")){this.refs.content.scrollTop(0),o.a.killTweensOf([this.refs.foreground,this.refs.cover,this.refs.overlay]),this.state.backgroundCounter++,o.a.set(this.refs.foregroundItem,{display:"none"});var e=this.refs.foregroundItem.eq(this.state.backgroundCounter%this.refs.foregroundItem.length),t=e.css("background-image");o.a.set(this.refs.header,{backgroundImage:t}),o.a.set(e,{display:"block"})}}},{key:"app_INIT",value:function(e,t){"wearable"==t&&(o.a.killTweensOf([this.refs.foreground,this.refs.cover,this.refs.overlay]),o.a.fromTo(this.refs.foreground,{display:"block",y:"0%"},{y:"-100%",duration:1,delay:this.props.delayToStart,ease:"power3.inOut"}),o.a.fromTo(this.refs.cover,{opacity:1},{opacity:0,duration:.5,delay:this.props.delayToStart+.5,ease:"power3.out"}),o.a.fromTo(this.refs.overlay,{y:"75%"},{y:"0%",opacity:1,duration:1,delay:this.props.delayToStart,ease:"power3.inOut",onComplete:this.onAppInit.bind(this)}))}},{key:"onAppInit",value:function(){o.a.set(this.refs.foreground,{display:"none"})}},{key:"app_DISPOSE",value:function(e,t){"wearable"==t&&this.reset()}},{key:"render",value:function(e,t){this.element=a()(e),this.props={shouldRestartState:!0,delayToStart:1},this.state={backgroundCounter:0},this.refs={content:this.element.find('*[data-ref="app-content"]'),header:this.element.find('*[data-ref="app-wearble-header"]'),buttons:this.element.find('*[data-ref="app-wearable-button"]'),cover:this.element.find('*[data-ref="app-wearable-cover"]'),overlay:this.element.find('*[data-ref="app-wearable-overlay"]'),foreground:this.element.find('*[data-ref="app-wearable-foreground"]'),foregroundItem:this.element.find('*[data-ref="app-wearable-foreground-item"]')},o.a.set(this.refs.foregroundItem,{display:"none"}),o.a.set(this.refs.foregroundItem.eq(0),{display:"block"}),this.refs.buttons.on("click",this.button_CLICK.bind(this)),a()(window).on(ot.EVENT.INIT,this.app_INIT.bind(this)),a()(window).on(ot.EVENT.DISPOSE,this.app_DISPOSE.bind(this))}}]),e}(),ms=function(){function e(t,n){us(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return fs(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppWearable.EVENT.OPEN",CLOSE:"CAppWearable.EVENT.CLOSE"}}}]),fs(e,[{key:"render",value:function(e,t){new ps(e,t)}}]),e}();function ys(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bs(e,t,n){return t&&gs(e.prototype,t),n&&gs(e,n),e}var ws=function(){function e(t,n){ys(this,e),this.render(t,n)}return bs(e,[{key:"reset",value:function(){this.props.shouldRestartState&&(o.a.killTweensOf(this.refs.splash),o.a.set(this.refs.splash,{display:"block",pointerEvents:"auto"}),o.a.killTweensOf([this.animation,this.refs.image.arrow,this.refs.image.iconLeft,this.refs.image.iconRight]),o.a.set(this.refs.image.iconLeft,{opacity:1}),o.a.set(this.refs.image.iconRight,{opacity:0}))}},{key:"animate",value:function(){for(var e=ae.shuffle(this.refs.image.iconLeft.toArray()),t=0;t<e.length;t++){var n=e[t],i=this.refs.image.iconRight.eq(parseInt(n.dataset.index)),a=1+t/2;o.a.killTweensOf([n,i]),o.a.fromTo(n,{opacity:1},{opacity:0,ease:"power3.out",delay:a}),o.a.fromTo(i,{opacity:0,scale:.3},{opacity:1,scale:1,ease:"back.out",delay:a})}o.a.fromTo(this.animation,{value:0},{value:1,duration:7,onComplete:this.animate.bind(this)})}},{key:"app_INIT",value:function(e,t){"smart-switch"==t&&(o.a.fromTo(this.refs.image.arrow,{opacity:0},{opacity:1,duration:.6,ease:"power3.inOut",repeat:-1,stagger:.1}),this.animate(),this.props.useSplashScreen?o.a.fromTo(this.refs.splash,{opacity:1},{opacity:0,duration:.6,ease:"power3.out",delay:1,onComplete:this.onApp_INIT.bind(this)}):o.a.set(this.refs.splash,{display:"none",pointerEvents:"none"}))}},{key:"onApp_INIT",value:function(){o.a.set(this.refs.splash,{display:"none",pointerEvents:"none"})}},{key:"app_DISPOSE",value:function(e,t){"smart-switch"==t&&this.reset()}},{key:"render",value:function(e,t){this.element=a()(e),this.animation={value:0},this.props={useSplashScreen:!1,shouldRestartState:!0},this.refs={splash:this.element.find('*[data-ref="app-smart-switch-splash"]'),image:{arrow:this.element.find('*[data-ref="app-smart-switch-image-arrow"]'),iconLeft:this.element.find('*[data-ref="app-smart-switch-image-icon-left"]'),iconRight:this.element.find('*[data-ref="app-smart-switch-image-icon-right"]')}},o.a.set(this.refs.image.iconRight,{opacity:0}),a()(window).on(ot.EVENT.INIT,this.app_INIT.bind(this)),a()(window).on(ot.EVENT.DISPOSE,this.app_DISPOSE.bind(this))}}]),e}(),vs=function(){function e(t,n){ys(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return bs(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppSmartSwitch.EVENT.OPEN",CLOSE:"CAppSmartSwitch.EVENT.CLOSE"}}}]),bs(e,[{key:"render",value:function(e,t){new ws(e,t)}}]),e}();function Es(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ts(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ks(e,t,n){return t&&Ts(e.prototype,t),n&&Ts(e,n),e}var Cs=function(){function e(t,n){Es(this,e),this.render(t,n)}return ks(e,[{key:"getWeekday",value:function(e){}},{key:"update",value:function(){var e=new Date,t=e.getDate(),n=k.toWeekdayName(e.getDay()),i=k.toMonthName(e.getMonth()),a="".concat(n.substr(0,3),", ").concat(t," ").concat(i.substr(0,3));a!=this.time&&(this.time=a,this.element.html(this.time))}},{key:"render",value:function(e,t){this.element=a()(e),this.time="",this.interval=setInterval(this.update.bind(this),100)}}]),e}(),Os=function(){function e(t,n){Es(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return ks(e,null,[{key:"EVENT",get:function(){return{}}}]),ks(e,[{key:"render",value:function(e,t){new Cs(e,t)}}]),e}();function Ps(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ns(e,t,n){return t&&_s(e.prototype,t),n&&_s(e,n),e}var Ss=function(){function e(t,n){Ps(this,e),this.render(t,n)}return Ns(e,[{key:"on_CLICK",value:function(e){a()(window).trigger(Wt.EVENT.NAVIGATE_TO_APP,[this.data.name])}},{key:"render",value:function(e,t){this.element=a()(e),this.data={name:this.element.data("app-link-switch-name")},a()(this.element).on("click",this.on_CLICK.bind(this))}}]),e}(),As=function(){function e(t,n){Ps(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Ns(e,null,[{key:"EVENT",get:function(){return{START:"CAppLinkSwitch.EVENT.START"}}}]),Ns(e,[{key:"render",value:function(e,t){new Ss(e,t)}}]),e}();function Is(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vs(e,t,n){return t&&xs(e.prototype,t),n&&xs(e,n),e}var Ls=function(){function e(t,n){Is(this,e),this.render(t,n)}return Vs(e,[{key:"on_CLICK",value:function(e){a()(window).trigger(Wt.EVENT.NAVIGATE_TO_APP,[this.data.name,"news"])}},{key:"render",value:function(e,t){this.element=a()(e),this.data={name:this.element.data("app-link-news-name")},a()(this.element).on("click",this.on_CLICK.bind(this))}}]),e}(),Ds=function(){function e(t,n){Is(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Vs(e,null,[{key:"EVENT",get:function(){return{START:"CAppLinkNews.EVENT.START"}}}]),Vs(e,[{key:"render",value:function(e,t){new Ls(e,t)}}]),e}();function Rs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ms(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bs(e,t,n){return t&&Ms(e.prototype,t),n&&Ms(e,n),e}var Us=function(){function e(t,n){Rs(this,e),this.render(t,n)}return Bs(e,[{key:"open",value:function(e,t){ot.addInApp("voucher-details");var n=t.index;this.state.currentItem=this.refs.items.eq(n),o.a.killTweensOf([this.refs.wrapper,this.state.currentItem,this.element]),o.a.fromTo(this.state.currentItem,{display:"flex",y:100},{y:0,duration:.4,ease:"power3.out"}),o.a.fromTo(this.element,{display:"block",pointerEvents:"auto",opacity:0},{opacity:1,duration:.4,ease:"power3.out",onComplete:this.onOpen.bind(this)})}},{key:"onOpen",value:function(){}},{key:"close",value:function(){ot.getInApp("voucher-details")&&(ot.removeInApp("voucher-details"),o.a.killTweensOf([this.refs.wrapper,this.state.currentItem,this.element]),o.a.to(this.state.currentItem,{y:100,duration:.4,ease:"power3.inOut"}),o.a.to(this.element,{opacity:0,duration:.4,ease:"power3.inOut",onComplete:this.onClose.bind(this)}))}},{key:"onClose",value:function(){o.a.set(this.refs.items,{display:"none"}),o.a.set(this.element,{display:"none",pointerEvents:"none"})}},{key:"reset",value:function(){}},{key:"render",value:function(e,t){this.element=a()(e),this.refs={items:this.element.find('*[data-ref="app-voucher-details-item"]')},this.state={currentItem:null},this.reset(),a()(window).on(Hs.EVENT.OPEN,this.open.bind(this)),a()(window).on(Hs.EVENT.CLOSE,this.close.bind(this)),o.a.set(this.element,{display:"none",pointerEvents:"none"}),o.a.set(this.refs.items,{display:"none"}),a()(window).on(be.EVENT.BACK,this.close.bind(this)),a()(window).on(be.EVENT.HOME,this.close.bind(this))}}]),e}(),Hs=function(){function e(t,n){Rs(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Bs(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppVoucherDetails.EVENT.OPEN",CLOSE:"CAppVoucherDetails.EVENT.CLOSE",RESET:"CAppVoucherDetails.EVENT.RESET"}}}]),Bs(e,[{key:"render",value:function(e,t){new Us(e,t)}}]),e}(),Ks=Hs;function qs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function js(e,t,n){return t&&Fs(e.prototype,t),n&&Fs(e,n),e}var Ys=function(){function e(t,n){qs(this,e),this.render(t,n)}return js(e,[{key:"on_CLICK",value:function(e){a()(window).trigger(Ks.EVENT.OPEN,[{index:this.data.index}])}},{key:"render",value:function(e,t){this.element=a()(e),this.data={index:this.element.data("app-link-voucher-index")},a()(this.element).on("click",this.on_CLICK.bind(this))}}]),e}(),Ws=function(){function e(t,n){qs(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return js(e,null,[{key:"EVENT",get:function(){return{START:"CAppLinkVoucher.EVENT.START"}}}]),js(e,[{key:"render",value:function(e,t){new Ys(e,t)}}]),e}();function Gs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zs(e,t,n){return t&&Xs(e.prototype,t),n&&Xs(e,n),e}var Js=function(){function e(t,n){Gs(this,e),this.render(t,n)}return zs(e,[{key:"open",value:function(){this.onTrasition=!0,this.isOpen=!0,o.a.killTweensOf([this.refs.container,this.refs.background,this.refs.buttonIcon,this.refs.title,this.refs.row]),o.a.to(this.refs.background,{opacity:1,duration:.6,ease:"power3.out"}),o.a.set(this.refs.buttonIcon,{opacity:1}),o.a.set(this.refs.title,{opacity:1}),o.a.set(this.refs.row,{y:"0%"}),o.a.to(this.refs.container,{y:this.finalY,duration:.6,ease:"power3.out",onComplete:this.onTransition_COMPLETE.bind(this)})}},{key:"close",value:function(){this.onTrasition=!0,this.isOpen=!1,o.a.killTweensOf([this.refs.container,this.refs.background,this.refs.buttonIcon,this.refs.title,this.refs.row]),o.a.to(this.refs.background,{opacity:0,duration:.6,ease:"power3.out"}),o.a.set(this.refs.buttonIcon,{opacity:0}),o.a.set(this.refs.title,{opacity:0}),o.a.set(this.refs.row,{y:"-30%"}),o.a.to(this.refs.container,{y:this.initialY,duration:.6,ease:"power3.out",onComplete:this.onTransition_COMPLETE.bind(this)})}},{key:"onTransition_COMPLETE",value:function(){this.onTrasition=!1}},{key:"update",value:function(){this.onTrasition||(this.isOpen?this.close():this.open())}},{key:"element_MOUSE_DOWN",value:function(e){this.isMoving=0}},{key:"element_MOUSE_MOVE",value:function(e){this.isMoving++}},{key:"element_MOUSE_END",value:function(e){this.isMoving>1&&(this.isMoving=0,this.update())}},{key:"render",value:function(e,t){this.element=a()(e),this.onTrasition=!1,this.isOpen=!1,this.isMoving=0,this.refs={container:this.element.find('*[data-ref="app-game-launcher-panel-container"]'),background:this.element.find('*[data-ref="app-game-launcher-panel-background"]'),buttonIcon:this.element.find('*[data-ref="app-game-launcher-panel-button-icon"]'),row:this.element.find('*[data-ref="app-game-launcher-panel-row"]'),title:this.element.find('*[data-ref="app-game-launcher-panel-title"]')},this.initialY=window.innerHeight-140,this.finalY=100,o.a.set(this.refs.background,{opacity:0}),o.a.set(this.refs.buttonIcon,{opacity:0}),o.a.set(this.refs.title,{opacity:0}),o.a.set(this.refs.row,{y:"-30%"}),o.a.set(this.refs.container,{y:this.initialY}),this.refs.container.on("touchstart",this.element_MOUSE_DOWN.bind(this)),this.element.on("touchend",this.element_MOUSE_END.bind(this)),this.element.on("touchmove",this.element_MOUSE_MOVE.bind(this))}}]),e}(),Zs=function(){function e(t,n){Gs(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return zs(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppGameLauncherPanel.EVENT.OPEN",CLOSE:"CAppGameLauncherPanel.EVENT.CLOSE"}}}]),zs(e,[{key:"render",value:function(e,t){new Js(e,t)}}]),e}();function Qs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $s(e,t,n){return t&&Qs(e.prototype,t),n&&Qs(e,n),e}var er=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.render(t),this}return $s(e,[{key:"start",value:function(){o.a.killTweensOf(this.animation),o.a.fromTo(this.animation,{value:this.data.from},{value:this.data.to,duration:2,ease:"power3.out",delay:1.2,onUpdate:this.update.bind(this)})}},{key:"update",value:function(){var e=this.animation.value;switch(this.data.type){case"int":e=Math.round(e);break;case"float":e=parseFloat(e).toFixed(1)}this.element.html(e)}},{key:"reset",value:function(){o.a.killTweensOf(this.animation),this.animation.value=this.data.from}}],[{key:"EVENT",get:function(){return{}}}]),$s(e,[{key:"render",value:function(e,t){this.element=e,this.data={from:this.element.data("text-interval-from"),to:this.element.data("text-interval-to"),type:this.element.data("text-interval-type")},this.animation={value:this.data.from}}}]),e}();function tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ir(e,t,n){return t&&nr(e.prototype,t),n&&nr(e,n),e}var ar=function(){function e(t,n){tr(this,e),this.render(t,n)}return ir(e,[{key:"reset",value:function(){if(this.props.shouldRestartState){for(var e=0;e<this.textsIntervals.length;e++){this.textsIntervals[e].reset()}o.a.killTweensOf([this.refs.foreground]),o.a.set(this.refs.foreground,{display:"block"})}}},{key:"app_INIT",value:function(e,t){if("health"==t){for(var n=0;n<this.textsIntervals.length;n++){this.textsIntervals[n].start()}var i=!0;this.props.shouldRestartState||(this.props.restartCounter>0&&(i=!1),this.props.restartCounter++),i?(o.a.killTweensOf([this.refs.foreground]),o.a.fromTo(this.refs.foreground,{display:"block",opacity:1},{opacity:0,duration:.6,delay:this.props.delayToStart,ease:"power3.inOut",onComplete:this.onAppInit.bind(this)})):this.onAppInit()}}},{key:"onAppInit",value:function(){o.a.set(this.refs.foreground,{display:"none"})}},{key:"app_DISPOSE",value:function(e,t){"health"==t&&this.reset()}},{key:"render",value:function(e,t){this.element=a()(e),this.topPositionWhenSwitchCategory=170,this.props={shouldRestartState:!0,restartCounter:0,delayToStart:.6},this.refs={foreground:this.element.find('*[data-ref="app-health-foreground"]'),textsIntervals:this.element.find('*[data-component="c-text-interval"]')},this.textsIntervals=[];for(var n=0;n<this.refs.textsIntervals.length;n++)this.textsIntervals.push(new er(this.refs.textsIntervals.eq(n)));a()(window).on(ot.EVENT.INIT,this.app_INIT.bind(this)),a()(window).on(ot.EVENT.DISPOSE,this.app_DISPOSE.bind(this))}}]),e}(),or=function(){function e(t,n){tr(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return ir(e,null,[{key:"EVENT",get:function(){return{OPEN:"CAppHealth.EVENT.OPEN",CLOSE:"CAppHealth.EVENT.CLOSE"}}}]),ir(e,[{key:"render",value:function(e,t){new ar(e,t)}}]),e}();function sr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lr(e,t,n){return t&&rr(e.prototype,t),n&&rr(e,n),e}var hr=function(){function e(t,n){sr(this,e),this.render(t,n)}return lr(e,[{key:"on_CLICK",value:function(e){y.instance.trackPage(this.data.title,"".concat(this.data.path).concat(this.data.action))}},{key:"render",value:function(e,t){this.element=a()(e),this.data={title:this.element.data("track-title"),path:this.element.data("track-path"),action:k.slugfy(this.element.data("track-action"))},a()(this.element).on("click",this.on_CLICK.bind(this))}}]),e}(),cr=function(){function e(t,n){sr(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return lr(e,null,[{key:"EVENT",get:function(){return{START:"CTrackerLink.EVENT.START"}}}]),lr(e,[{key:"render",value:function(e,t){new hr(e,t)}}]),e}();function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fr(e,t,n){return t&&dr(e.prototype,t),n&&dr(e,n),e}var pr=function(){function e(t,n){ur(this,e),this.render(t,n)}return fr(e,[{key:"blink",value:function(){if(!window.endOfTutorial){o.a.fromTo(this.refs.eyeShape,{scaleX:1},{scaleX:.5,duration:.1,delay:0,ease:"power2.out"}),o.a.fromTo(this.refs.eyeShape,{opacity:1},{duration:.025,opacity:0,delay:.025,ease:"power2.out"}),o.a.fromTo(this.refs.eyeBlink,{opacity:0},{duration:.025,opacity:1,delay:.025,ease:"power2.out"});o.a.to(this.refs.eyeBlink,{duration:.05,opacity:0,delay:.05,ease:"power2.out"}),o.a.to(this.refs.eyeShape,{scaleX:1,duration:.1,delay:.05,ease:"power2.out"}),o.a.to(this.refs.eyeShape,{duration:.05,opacity:1,delay:.1,ease:"power2.out"}),this.blinkCount++,this.blinkCount%2==0?o.a.delayedCall(5,this.blink.bind(this)):this.doubleBlink?(this.doubleBlink=!1,o.a.delayedCall(.15,this.blink.bind(this))):o.a.delayedCall(5,this.blink.bind(this))}}},{key:"look",value:function(){if(!window.endOfTutorial){var e=o.a.timeline({paused:!0,delay:0,onComplete:this.look.bind(this)});e.fromTo(this.refs.leftEye,{y:"0%"},{y:"50%",x:"-25%",scale:1,duration:1.6,ease:"power2.inOut"},3),e.fromTo(this.refs.rightEye,{y:"0%"},{y:"25%",x:"-25%",scale:1,duration:1.6,ease:"power2.inOut"},3),e.to(this.refs.leftEye,{y:"50%",x:"15%",duration:3,ease:"power2.inOut"},4.6),e.to(this.refs.rightEye,{y:"25%",x:"15%",duration:3,ease:"power2.inOut"},4.6),e.to(this.refs.leftEye,{y:"0%",x:"0%",scale:1,duration:1.6,ease:"power2.inOut"},8.6),e.to(this.refs.rightEye,{y:"0%",x:"0%",scale:1,duration:1.6,ease:"power2.inOut"},8.6),e.to(this.refs.leftEye,{y:"0%",x:"0%",scale:1,duration:1.6,ease:"power2.inOut"},10),e.to(this.refs.rightEye,{y:"0%",x:"0%",scale:1,duration:1.6,ease:"power2.inOut"},10),e.play()}}},{key:"render",value:function(e,t){this.element=a()(e),this.blinkCount=0,this.doubleBlink=!0,this.refs={shape:this.element.find('*[data-ref="app-robot-animation-shape"]'),leftEye:this.element.find('*[data-ref="app-robot-animation-left-eye"]'),rightEye:this.element.find('*[data-ref="app-robot-animation-right-eye"]'),eyeShape:this.element.find('*[data-ref="app-robot-animation-eye-shape"]'),eyeBlink:this.element.find('*[data-ref="app-robot-animation-eye-blink"]')};var n=o.a.timeline({paused:!0,delay:0});n.fromTo(this.refs.shape,{x:"100%",scale:.4},{x:"0%",scale:1,duration:1.6,delay:1,ease:"power2.out"}),n.play(),o.a.delayedCall(5,this.blink.bind(this)),o.a.delayedCall(2,this.look.bind(this))}}]),e}(),mr=function(){function e(t,n){ur(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return fr(e,null,[{key:"EVENT",get:function(){return{}}}]),fr(e,[{key:"render",value:function(e,t){new pr(e,t)}}]),e}(),yr=n("pc+1");function gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function br(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wr(e,t,n){return t&&br(e.prototype,t),n&&br(e,n),e}var vr=function(){function e(t,n){gr(this,e),this.render(t,n)}return wr(e,[{key:"buttonRead_CLICK",value:function(){this.refs.buttonRead.find('*[data-ref="button-dash-enabled"]').css("display","block"),this.refs.buttonRead.find('*[data-ref="button-dash-disabled"]').css("display","none"),this.refs.buttonPlay.find('*[data-ref="button-dash-enabled"]').css("display","none"),this.refs.buttonPlay.find('*[data-ref="button-dash-disabled"]').css("display","block"),this.refs.container.css("display","none"),this.refs.container.eq(0).css("display","block"),this.refs.content.scrollTop(0)}},{key:"buttonPlay_CLICK",value:function(){this.refs.buttonRead.find('*[data-ref="button-dash-enabled"]').css("display","none"),this.refs.buttonRead.find('*[data-ref="button-dash-disabled"]').css("display","block"),this.refs.buttonPlay.find('*[data-ref="button-dash-enabled"]').css("display","block"),this.refs.buttonPlay.find('*[data-ref="button-dash-disabled"]').css("display","none"),this.refs.container.css("display","none"),this.refs.container.eq(1).css("display","block"),this.refs.content.scrollTop(0)}},{key:"scroll_TOUCH_START",value:function(e){e.preventDefault();var t=e.touches[0]||e.changedTouches[0],n=this.refs.scroll.get(0);this.initialTouchPosition={x:t.pageX,y:t.pageY,left:n.scrollLeft,isMoving:0},this.isScrollActive=!0}},{key:"scroll_TOUCH_END",value:function(){if(this.isScrollActive){this.isScrollActive=!1;var e=this.refs.scroll.get(0),t=this.refs.instantItems.toArray(),n=0;t.map((function(e,t){e.getBoundingClientRect().x<window.innerWidth/2&&(n=t)}));var i=t[n],o=i.getBoundingClientRect().width*n;yr.v.killTweensOf(e),yr.v.to(e,{scrollLeft:o,duration:.4,ease:"power3.out"}),yr.v.killTweensOf(this.refs.instantItems),yr.v.to(i,{opacity:1,duration:.4,ease:"power3.out"}),this.isFaded=!1,0==n&&this.initialTouchPosition.isMoving<5&&a()(window).trigger(de.EVENT.OPEN)}}},{key:"scroll_TOUCH_MOVE",value:function(e){if(this.isScrollActive){var t=this.refs.scroll.get(0),n=e.touches[0]||e.changedTouches[0],i={x:n.pageX-this.initialTouchPosition.x,y:n.pageY-this.initialTouchPosition.y};this.initialTouchPosition.isMoving++,yr.v.killTweensOf(t),yr.v.set(t,{scrollLeft:this.initialTouchPosition.left+-1*i.x}),this.isFaded||(this.isFaded=!0,yr.v.to(this.refs.instantItems,{opacity:.5,duration:.5,ease:"power3.out"}))}}},{key:"news_OPEN",value:function(){var e=this;yr.v.killTweensOf(this.refs.cover),yr.v.to(this.refs.cover,{opacity:0,duration:.6,ease:"power3.out",delay:1,onComplete:function(){yr.v.set(e.refs.cover,{display:"none"})}})}},{key:"news_CLOSE",value:function(){}},{key:"instantGames_CLICK",value:function(){this.currentMessageIndex||(this.currentMessageIndex=0);var e=[{title:"Want to play?",message:"Try out the Scrump Jump game."},{title:"Instant Plays",message:"Instant Plays are fun little games that don’t require any installation. Just click and play."},{title:"",message:"Instant Plays are definitely more fun than clicking repeatedly to find out what new thing we’ve written."},{title:"",message:"Ok so we’re doing this?"},{title:"",message:"Who will back down first? Will we start repeating ourselves? Or will you give up?"},{title:"",message:"What score did you get on Scrump Jump? Average is 21 apples, just saying."},{title:"",message:"Bet you can’t get 21."},{title:"",message:"Joking about 21. Not sure what the average is."},{title:"",message:"Ok we gotta give this up… you win."},{title:"",message:"Instant Plays are fun little games that don’t require any installation. Just click and play."},{title:"",message:"Tricked you. We weren’t finished."},{title:"",message:"Ok now we’re finished."}],t=e[this.currentMessageIndex%e.length];a()(window).trigger(qe.EVENT.OPEN,[t.title,t.message,"OK"]),this.currentMessageIndex++}},{key:"render",value:function(e){this.element=a()(e),this.isScrollActive=!1,this.isFaded=!1,this.initialTouchPosition={x:0,y:0,left:0,isMoving:0},this.refs={content:this.element.find('*[data-ref="dashboard-free-content"]'),container:this.element.find('*[data-ref="dashboard-free-container"]'),scroll:this.element.find('*[data-ref="dashboard-free-scroll"]'),cover:this.element.find('*[data-ref="dashboard-free-cover"]'),buttonRead:this.element.find('*[data-ref="app-dashboard-button-read"]'),buttonPlay:this.element.find('*[data-ref="app-dashboard-button-play"]'),instantItems:this.element.find('*[data-ref="dashboard-free-instant-item"]'),instantGames:this.element.find('*[data-ref="dashboard-news-instant-button"]')},yr.v.set(this.refs.instantItems,{opacity:.5}),yr.v.set(this.refs.instantItems.eq(0),{opacity:1}),this.refs.scroll.on("touchstart",this.scroll_TOUCH_START.bind(this)),a()(window).on("touchend",this.scroll_TOUCH_END.bind(this)),a()(window).on("touchmove",this.scroll_TOUCH_MOVE.bind(this)),this.refs.container.css("display","none"),this.refs.container.eq(0).css("display","block"),a()(this.refs.buttonRead).on("click",this.buttonRead_CLICK.bind(this)),a()(this.refs.buttonPlay).on("click",this.buttonPlay_CLICK.bind(this)),a()(this.refs.instantGames).on("click",this.instantGames_CLICK.bind(this)),a()(window).on(be.EVENT.OPEN_NEWS_APP,this.news_OPEN.bind(this))}}]),e}(),Er=function(){function e(t,n){gr(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return wr(e,[{key:"render",value:function(e,t){new vr(e,t)}}]),e}();function Tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Cr(e,t,n){return t&&kr(e.prototype,t),n&&kr(e,n),e}var Or=function(){function e(t,n){Tr(this,e),this.render(t,n)}return Cr(e,[{key:"on_CLICK",value:function(){a()(window).trigger(de.EVENT.OPEN)}},{key:"render",value:function(e){this.element=a()(e),a()(this.element).on("click",this.on_CLICK.bind(this))}}]),e}(),Pr=function(){function e(t,n){Tr(this,e),this.all=n.querySelectorAll(t);for(var i=0;i<this.all.length;i++)this.render(this.all[i],i)}return Cr(e,[{key:"render",value:function(e,t){new Or(e,t)}}]),e}();window.clickable=!0,window.moveCount=0,window.interactive=!1;var _r=null;function Nr(){window.clickable=!0,window.moveCount=0}function Sr(){window.clickable&&window.moveCount>10&&(window.clickable=!1),window.moveCount++}function Ar(){clearTimeout(_r),_r=setTimeout(Nr,500),window.removeEventListener("touchend",Ar),window.removeEventListener("touchmove",Sr)}function Ir(){window.clickable=!0,window.moveCount=0,window.addEventListener("touchend",Ar,{passive:!1}),window.addEventListener("touchmove",Sr,{passive:!1})}function xr(){var e={name:"".concat(localization.data.messages.samsungContactName),phone:"".concat(localization.data.messages.samsungContactPhoneNumber),country:""};a()(window).trigger(q.EVENT.OPEN,[q.TYPE.INCOMING,e])}new r.a;document.addEventListener("DOMContentLoaded",(function(){o.a.registerPlugin(h.a),window.addEventListener("touchstart",Ir,{passive:!1}),window.addEventListener("mousedown",Ir,{passive:!1}),V.instance,$a.instance,new E('*[data-component="app"]',document),new ut('*[data-component="slider"]',document),new oi('*[data-component="audio"]',document),new Bn('*[data-component="clock"]',document),new Os('*[data-component="daytime"]',document),new Fn('*[data-component="cursor"]',document),new Ua('*[data-component="clipboard"]',document),new Ce('*[data-component="dashboard"]',document),new ee('*[data-component="dashboard-header"]',document),new be('*[data-component="dashboard-footer"]',document),new X('*[data-component="dashboard-content"]',document),new Ae('*[data-component="dashboard-overlay"]',document),new bn('*[data-component="dashboard-news"]',document),new Er('*[data-component="dashboard-free"]',document),new fn('*[data-component="dashboard-notifications"]',document),new $e('*[data-component="dashboard-search"]',document),new ln('*[data-component="dashboard-notification-button"]',document),new kn('*[data-component="news-filter"]',document),new Ji('*[data-component="giphy"]',document),new Vn('*[data-component="weather"]',document),new ot('*[data-component="app-view"]',document),new as('*[data-component="app-mail"]',document),new ms('*[data-component="app-wearable"]',document),new cs('*[data-component="app-wearable-details"]',document),new Ks('*[data-component="app-voucher-details"]',document),new Ws('*[data-component="app-link-voucher"]',document),new xa('*[data-component="app-kids"]',document),new _a('*[data-component="app-kids-details"]',document),new vs('*[data-component="app-smart-switch"]',document),new or('*[data-component="app-health"]',document),new Dt('*[data-component="app-messages"]',document),new Ht('*[data-component="app-messages-notification-label"]',document),new Zt('*[data-component="app-messages-notification"]',document),new At('*[data-component="app-chat"]',document),new Ct('*[data-component="messages-photo"]',document),new Xn('*[data-component="app-call"]',document),new q('*[data-component="app-call-inoutgoing"]',document),new I('*[data-component="button-call"]',document),new Vi('*[data-component="app-camera"]',document),new Yi('*[data-component="camera-settings"]',document),new Pi('*[data-component="camera-zoom"]',document),new vi('*[data-component="camera-scene"]',document),new pi('*[data-component="camera-modes"]',document),new Ui('*[data-component="camera-filters"]',document),new Ea('*[data-component="app-settings"]',document),new ya('*[data-component="app-settings-details"]',document),new co('*[data-component="app-galaxy-store"]',document),new To('*[data-component="app-gallery"]',document),new go('*[data-component="gallery-photo"]',document),new Vo('*[data-component="app-game-launcher"]',document),new Zs('*[data-component="app-game-launcher-panel"]',document),new Fo('*[data-component="app-galaxy-themes"]',document),new $o('*[data-component="app-theme-button"]',document),new Xo('*[data-component="app-themes-changes"]',document),new oo('*[data-component="app-theme"]',document),new Ja('*[data-component="app-theme-loader"]',document),new yt('*[data-component="app-header"]',document),new ja('*[data-component="app-header-slider"]',document),new Re('*[data-component="app-link"]',document),new As('*[data-component="app-link-switch"]',document),new Ds('*[data-component="app-link-news"]',document),new $n('*[data-component="app-trigger"]',document),new Wt('*[data-component="app-locker"]',document),new qe('*[data-component="app-alert"]',document),new Ge('*[data-component="app-alert-button"]',document),new No('*[data-component="app-video"]',document),new Bo('*[data-component="app-video-button"]',document),new nn('*[data-component="button-background"]',document),new cr('*[data-tracker="c-tracker"]',document),new na('*[data-loader="image"]',document),new ra('*[data-component="app-tutorial"]',document),new mr('*[data-component="app-robot-animation"]',document),new de('*[data-component="app-game-1"]',document),new Pr('*[data-component="app-game-link"]',document),window.call=xr}))}},[[0,1,2]]]);

}
/*
     FILE ARCHIVED ON 05:35:30 Jan 19, 2022 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 12:12:03 Apr 13, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 0.823
  exclusion.robots: 0.099
  exclusion.robots.policy: 0.087
  cdx.remote: 0.068
  esindex: 0.01
  LoadShardBlock: 2095.089 (3)
  PetaboxLoader3.resolve: 2371.212 (4)
  PetaboxLoader3.datanode: 94.747 (4)
  load_resource: 399.599
*/